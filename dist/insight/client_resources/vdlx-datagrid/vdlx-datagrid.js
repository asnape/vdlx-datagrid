(function () {function k(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Ua=this;var cr=[{name:"id",description:"Specify an element id for the grid. Useful if you later want to target the grid using a selector. If not given then an id will be generated."},{name:"scenario",description:"The default scenario to use for fetching data in the grid. This can be overridden per column but the default will be used when a column does not specify a particular scenario and the index sets will be fetched from the default scenario.",acceptsExpression:!0},{name:"page-size",description:"The number of rows to show per-page in paged mode. Defaults to 50.",acceptsExpression:!0},{name:"page-mode",description:"By default the grid will show all rows in scrolling mode. Set this attribute to \"paged\" to enable grid pagination."},{name:"height",acceptsExpression:!0,description:"Grid height, When page-mode is set to \"scrolling\" you can set the height of the grid to something other than the default 600"},{name:"column-filter",description:"Set this to \"true\" to enable the column filters. This will show a header row with filter inputs for each column."},{name:"add-remove-row",description:"Setting this will show the add-remove row buttons at the bottom of the grid. Set to \"true\" to prompt for index selection on row add. Set to \"addrow-autoinc\" will switch the behaviour to allow new index values to be created, incrementing from the highest value in the set(s)."},{name:"width",description:"Set the grid to a fixed width, in pixels. Accepts an integer value. If set to the string \"custom\" then the grid width is calculated by adding up all the widths of the columns in the grid. If a column doesn't have a width specified then it is given a default value of 100px.",acceptsExpression:!1},{name:"class",description:"Space-separated list of the classes of the element.",acceptsExpression:!1},{name:"always-show-selection",description:"Whether to display selection on inactive grids. Set to \"true\" to keep selection on a grid when it becomes inactive. Defaults to false.",acceptsExpression:!1},{name:"row-filter",description:"Expression to be used for filtering the rows of a <vdl-datagrid>. This must be an expression and should resolve to either a function or a boolean value. If a function it will be executed when grid updates. The function will have the following signature (rowData, indices) and should return a boolean.",acceptsExpression:!0,required:!1,expressionVars:[{name:"rowData",type:"Array.<(string|boolean|number)>",description:"Data for all row cells"},{name:"indices",type:"Array.<(string|boolean|number)>",description:"Data for the index columns of the row"}]},{name:"save-state",description:"Set this to \"false\" to disable grid state saving. By default grid state is stored in the user's browser session so that user settings (e.g. page, sorting and search) are preserved if grid data is reloaded. Defaults to true.",acceptsExpression:!1,required:!1},{name:"grid-data",acceptsExpression:!0},{name:"freeze-columns",description:"The number of columns to freeze in the table starting from the left hand column.",required:!1}];function Pr(a,e,r){var $eeO1$$interop$default=k(j);var d=r.getComponentParamsBuilder(a),i=$eeO1$$interop$default.d(a),s=e.scenario;if(s)if(s.expression.isString){var o=parseInt(s.rawValue);if(isNaN(o))d.addParam("scenarioId",s.rawValue);else{if(o<0)throw Error("If scenario-id is specifying an index it must be a positive integer.");d.addParam("scenarioId",o)}}else d.addParam("scenarioId",s.expression.value,!0);var t=e["page-size"];if(t)if(t.expression.isString){var l=parseInt(t.rawValue);isNaN(l)||d.addParam("pageSize",l)}else d.addParam("pageSize",t.expression.value,!0);var n=e["page-mode"];n&&"paged"===n.rawValue?d.addParam("pageMode",n.rawValue):(d.addParam("pageMode","scrolling"),$eeO1$$interop$default.d(a).addClass("scrolling"));var u=e["column-filter"];u&&d.addParam("columnFilter","true"===u.rawValue);var m=e["add-remove-row"];m&&("true"===m.rawValue?d.addParam("addRemoveRow",!0):"addrow-autoinc"===m.rawValue&&d.addParam("addRemoveRow","addrow-autoinc"));var p=e.id;p&&(i.attr("id",null),d.addParam("tableId",p.rawValue));var w=e.width;w&&d.addParam("width",w.rawValue);var g=e["save-state"];g&&"false"===g.rawValue&&d.addParam("saveState",!1);var v=e["freeze-columns"];v&&d.addParam("freezeColumns",v.rawValue);var c=e.class;c&&(i.removeAttr("class"),d.addParam("class",c.rawValue));var P=e["always-show-selection"];P&&"TRUE"===P.rawValue.toUpperCase()&&d.addParam("alwaysShowSelection",!0);var f=e["row-filter"];if(f){if(f.expression.isString)throw Error("The vdl-table \"row-filter\" attribute must be supplied as an expression");d.addFunctionOrExpressionParam("rowFilter",f.expression.value,["rowData","indices"])}var $=e["grid-data"];$&&d.addParam("gridData",$.expression.value,!0);var x=e.height;x&&(x.expression.isString?d.addParam("gridHeight",x.rawValue,!1):d.addParam("gridHeight",x.expression.value,!0))}var X,K;function Mb(){throw new Error("setTimeout has not been defined")}function Kb(){throw new Error("clearTimeout has not been defined")}function Or(r){if(X===setTimeout)return setTimeout(r,0);if((X===Mb||!X)&&setTimeout)return X=setTimeout,setTimeout(r,0);try{return X(r,0)}catch($){try{return X.call(null,r,0)}catch($){return X.call(this,r,0)}}}function Dr(r){if(K===clearTimeout)return clearTimeout(r);if((K===Kb||!K)&&clearTimeout)return K=clearTimeout,clearTimeout(r);try{return K(r)}catch($){try{return K.call(null,r)}catch($){return K.call(this,r)}}}!function(){try{X="function"==typeof setTimeout?setTimeout:Mb}catch(r){X=Mb}try{K="function"==typeof clearTimeout?clearTimeout:Kb}catch(r){K=Kb}}();var ja,ka=[],Bc=!1,Hc=-1;function vr(){Bc&&ja&&(Bc=!1,ja.length?ka=ja.concat(ka):Hc=-1,ka.length&&rr())}function rr(){if(!Bc){var r=Or(vr);Bc=!0;for(var $=ka.length;$;){for(ja=ka,ka=[];++Hc<$;)ja&&ja[Hc].run();Hc=-1,$=ka.length}ja=null,Bc=!1,Dr(r)}}function qr(r,$){this.fun=r,this.array=$}qr.prototype.run=function(){this.fun.apply(null,this.array)};var Bb,j={},l=arguments[0];!function(e,t){"object"==typeof j?j=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:j,function(e,t){var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,p=f.toString,d=p.call(Object),h={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},y={type:!0,src:!0,nonce:!0,noModule:!0};function m(e,t,n){var i,o,a=(n=n||r).createElement("script");if(a.text=e,t)for(i in y)(o=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,o);n.head.appendChild(a).parentNode.removeChild(a)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var b=function(e,t){return new b.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function T(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}b.fn=b.prototype={jquery:"3.4.1",constructor:b,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return b.each(this,e)},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},b.extend=b.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(b.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||b.isPlainObject(n)?n:{},i=!1,a[t]=b.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},b.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e))&&(!(t=i(e))||"function"==typeof(n=f.call(t,"constructor")&&t.constructor)&&p.call(n)===d)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){m(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?b.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:h}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=n[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var C=function(e){var t,n,r,i,o,a,s,u,l,c,f,p,d,h,g,v,y,m,x,b="sizzle"+1*new Date,w=e.document,T=0,C=0,E=ue(),k=ue(),S=ue(),N=ue(),A=function(e,t){return e===t&&(f=!0),0},D={}.hasOwnProperty,j=[],q=j.pop,L=j.push,H=j.push,O=j.slice,$=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",I="\\["+R+"*("+M+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+R+"*\\]",W=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+I+")*)|.*)\\)|)",F=new RegExp(R+"+","g"),B=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),_=new RegExp("^"+R+"*,"+R+"*"),z=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),U=new RegExp(R+"|>"),X=new RegExp(W),V=new RegExp("^"+M+"$"),G={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\uFFFD":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){p()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(j=O.call(w.childNodes),w.childNodes),j[w.childNodes.length].nodeType}catch(ke){H={apply:j.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,l,c,f,h,y,m=t&&t.ownerDocument,T=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==T&&9!==T&&11!==T)return r;if(!i&&((t?t.ownerDocument||t:w)!==d&&p(t),t=t||d,g)){if(11!==T&&(f=Z.exec(e)))if(o=f[1]){if(9===T){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(m&&(l=m.getElementById(o))&&x(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return H.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return H.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!N[e+" "]&&(!v||!v.test(e))&&(1!==T||"object"!==t.nodeName.toLowerCase())){if(y=e,m=t,1===T&&U.test(e)){for((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=b),s=(h=a(e)).length;s--;)h[s]="#"+c+" "+xe(h[s]);y=h.join(","),m=ee.test(e)&&ye(t.parentNode)||t}try{return H.apply(r,m.querySelectorAll(y)),r}catch(C){N(e,!0)}finally{c===b&&t.removeAttribute("id")}}}return u(e.replace(B,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[b]=!0,e}function ce(e){var t=d.createElement("fieldset");try{return!!e(t)}catch(ke){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function de(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ve(e){return le(function(t){return t=+t,le(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==d&&9===a.nodeType&&a.documentElement?(h=(d=a).documentElement,g=!o(d),w!==d&&(i=d.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ce(function(e){return e.appendChild(d.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=K.test(d.getElementsByClassName),n.getById=ce(function(e){return h.appendChild(e).id=b,!d.getElementsByName||!d.getElementsByName(b).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},y=[],v=[],(n.qsa=K.test(d.querySelectorAll))&&(ce(function(e){h.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+R+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+b+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=d.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=K.test(m=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce(function(e){n.disconnectedMatch=m.call(e,"*"),m.call(e,"[s!='']:x"),y.push("!=",W)}),v=v.length&&new RegExp(v.join("|")),y=y.length&&new RegExp(y.join("|")),t=K.test(h.compareDocumentPosition),x=t||K.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===d||e.ownerDocument===w&&x(w,e)?-1:t===d||t.ownerDocument===w&&x(w,t)?1:c?$(c,e)-$(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===d?-1:t===d?1:i?-1:o?1:c?$(c,e)-$(c,t):0;if(i===o)return pe(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?pe(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},d):d},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==d&&p(e),n.matchesSelector&&g&&!N[t+" "]&&(!y||!y.test(t))&&(!v||!v.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(ke){N(t,!0)}return se(t,d,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==d&&p(e),x(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==d&&p(e);var i=r.attrHandle[t.toLowerCase()],o=i&&D.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=E[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&E(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&m){for(x=(d=(l=(c=(f=(p=v)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1])&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[T,d,x];break}}else if(m&&(x=d=(l=(c=(f=(p=t)[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]||[])[0]===T&&l[1]),!1===x)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++x||(m&&((c=(f=p[b]||(p[b]={}))[p.uniqueID]||(f[p.uniqueID]={}))[e]=[T,x]),p!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=$(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:le(function(e){var t=[],n=[],r=s(e.replace(B,"$1"));return r[b]?le(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:le(function(e){return function(t){return se(e,t).length>0}}),contains:le(function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}}),lang:le(function(e){return V.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=de(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[T,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[b]||(t[b]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===T&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(e,t,n,r,i,o){return r&&!r[b]&&(r=Ce(r)),i&&!i[b]&&(i=Ce(i,o)),le(function(o,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:Te(g,p,e,s,u),y=n?i||(o?e:h||r)?[]:a:v;if(n&&n(v,y,s,u),r)for(l=Te(y,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(y[d[c]]=!(v[d[c]]=f));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(f=y[c])&&l.push(v[c]=f);i(null,y=[],l,u)}for(c=y.length;c--;)(f=y[c])&&(l=i?$(o,f):p[c])>-1&&(o[l]=!(a[l]=f))}}else y=Te(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function Ee(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=be(function(e){return e===t},s,!0),f=be(function(e){return $(t,e)>-1},s,!0),p=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])p=[be(we(p),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[b]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return Ce(u>1&&we(p),u>1&&xe(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(B,"$1"),n,u<i&&Ee(e.slice(u,i)),i<o&&Ee(e=e.slice(i)),i<o&&xe(e))}p.push(n)}return we(p)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=se.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=_.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=z.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(B," ")}),s=s.slice(n.length)),r.filter)!(i=G[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):k(e,u).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=S[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ee(t[n]))[b]?i.push(s):o.push(s);(s=S(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,h,v,y=0,m="0",x=o&&[],b=[],w=l,C=o||i&&r.find.TAG("*",c),E=T+=null==w?1:Math.random()||.1,k=C.length;for(c&&(l=a===d||a||c);m!==k&&null!=(f=C[m]);m++){if(i&&f){for(h=0,a||f.ownerDocument===d||(p(f),s=!g);v=e[h++];)if(v(f,a||d,s)){u.push(f);break}c&&(T=E)}n&&((f=!v&&f)&&y--,o&&x.push(f))}if(y+=m,n&&m!==y){for(h=0;v=t[h++];)v(x,b,a,s);if(o){if(y>0)for(;m--;)x[m]||b[m]||(b[m]=q.call(u));b=Te(b)}H.apply(u,b),c&&!o&&b.length>0&&y+t.length>1&&se.uniqueSort(u)}return c&&(T=E,l=w),x};return n?le(o):o}(o,i))).selector=e}return s},u=se.select=function(e,t,n,i){var o,u,l,c,f,p="function"==typeof e&&e,d=!i&&a(e=p.selector||e);if(n=n||[],1===d.length){if((u=d[0]=d[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=G.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ye(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&xe(u)))return H.apply(n,i),n;break}}return(p||s(e,d))(i,t,!g,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},n.sortStable=b.split("").sort(A).join("")===b,n.detectDuplicates=!!f,p(),n.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(d.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(e);b.find=C,b.expr=C.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=C.uniqueSort,b.text=C.getText,b.isXMLDoc=C.isXML,b.contains=C.contains,b.escapeSelector=C.escape;var E=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&b(e).is(n))break;r.push(e)}return r},k=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},S=b.expr.match.needsContext;function N(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return g(t)?b.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?b.grep(e,function(e){return e===t!==n}):"string"!=typeof t?b.grep(e,function(e){return u.call(t,e)>-1!==n}):b.filter(t,e,n)}b.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?b.find.matchesSelector(r,e)?[r]:[]:b.find.matches(e,b.grep(t,function(e){return 1===e.nodeType}))},b.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(b(e).filter(function(){for(t=0;t<r;t++)if(b.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)b.find(e,i[t],n);return r>1?b.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&S.test(e)?b(e):e||[],!1).length}});var j,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||j,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:q.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof b?t[0]:t,b.merge(this,b.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:r,!0)),A.test(i[1])&&b.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(b):b.makeArray(e,this)}).prototype=b.fn,j=b(r);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}b.fn.extend({has:function(e){var t=b(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(b.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&b(e);if(!S.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&b.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?b.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(b(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(N(e,"template")&&(e=e.content||e),b.merge([],e.childNodes))}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),this.length>1&&(H[e]||b.uniqueSort(i),L.test(e)&&i.reverse()),this.pushStack(i)}});var $=/[^\x20\t\r\n\f]+/g;function P(e){return e}function R(e){throw e}function M(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}b.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return b.each(e.match($)||[],function(e,n){t[n]=!0}),t}(e):b.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){b.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return b.each(arguments,function(e,t){for(var n;(n=b.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?b.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},b.extend({Deferred:function(t){var n=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return b.Deferred(function(t){b.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==typeof e||"function"==typeof e)&&e.then,g(l)?i?l.call(e,a(o,n,P,i),a(o,n,R,i)):(o++,l.call(e,a(o,n,P,i),a(o,n,R,i),a(o,n,P,n.notifyWith))):(r!==P&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==R&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(b.Deferred.getStackHook&&(c.stackTrace=b.Deferred.getStackHook()),e.setTimeout(c))}}return b.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:P,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:P)),n[2][3].add(a(0,e,g(r)?r:R))}).promise()},promise:function(e){return null!=e?b.extend(e,i):i}},o={};return b.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=b.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(M(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)M(i[n],s(n),a.reject);return a.promise()}});var I=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&I.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},b.readyException=function(t){e.setTimeout(function(){throw t})};var W=b.Deferred();function F(){r.removeEventListener("DOMContentLoaded",F),e.removeEventListener("load",F),b.ready()}b.fn.ready=function(e){return W.then(e).catch(function(e){b.readyException(e)}),this},b.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--b.readyWait:b.isReady)||(b.isReady=!0,!0!==e&&--b.readyWait>0||W.resolveWith(r,[b]))}}),b.ready.then=W.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(b.ready):(r.addEventListener("DOMContentLoaded",F),e.addEventListener("load",F));var B=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===x(n))for(s in i=!0,n)B(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(b(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=b.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match($)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||b.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!b.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:J.test(e)?JSON.parse(e):e)}(n)}catch(i){}Q.set(e,t,n)}else n=void 0;return n}b.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),b.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):B(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))?n:void 0!==(n=Z(o,e))?n:void 0;this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){b.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:b.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),b.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?b.queue(this[0],e):void 0===t?this:this.each(function(){var n=b.queue(this,e,t);b._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=b.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=r.documentElement,ie=function(e){return b.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return b.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===b.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return b.css(e,t,"")},u=s(),l=n&&n[3]||(b.cssNumber[t]?"":"px"),c=e.nodeType&&(b.cssNumber[t]||"px"!==l&&+u)&&te.exec(b.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)b.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,b.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=b.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Y.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",Y.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}b.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?b(this).show():b(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&N(e,t)?b.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===x(o))b.merge(p,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+b.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;b.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&b.inArray(o,r)>-1)i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n)for(c=0;o=a[c++];)he.test(o.type||"")&&n.push(o);return f}me=r.createDocumentFragment().appendChild(r.createElement("div")),(xe=r.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),h.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return r.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return b().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=b.guid++)),e.each(function(){b.event.add(this,t,i,r,n)})}function De(e,t,n){n?(Y.set(e,t,!1),b.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=Y.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(b.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=o.call(arguments),Y.set(this,t,a),r=n(this,t),this[t](),a!==(i=Y.get(this,t))||r?Y.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else a.length&&(Y.set(this,t,{value:b.event.trigger(b.extend(a[0],b.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,t)&&b.event.add(e,t,ke)}b.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(e);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&b.find.matchesSelector(re,i),n.guid||(n.guid=b.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==b&&b.event.triggered!==t.type?b.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match($)||[""]).length;l--;)d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=b.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=b.event.special[d]||{},c=b.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&b.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),b.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match($)||[""]).length;l--;)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){for(f=b.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||b.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=b.event.fix(e),u=new Array(arguments.length),l=(Y.get(this,"events")||{})[s.type]||[],c=b.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=b.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((b.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?b(i,this).index(l)>-1:b.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(b.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[b.expando]?e:new b.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&N(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&N(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&N(t,"input")&&Y.get(t,"click")||N(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},b.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},function(e,t){b.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||b.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),b.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,b(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){b.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return N(e,"table")&&N(11!==t.nodeType?t:t.firstChild,"tr")&&b(e).children("tbody")[0]||e}function $e(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Pe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Re(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Y.hasData(e)&&(o=Y.access(e),a=Y.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)b.event.add(t,i,l[i][n]);Q.hasData(e)&&(s=Q.access(e),u=b.extend({},s),Q.set(t,u))}}function Me(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,p=e.length,d=p-1,v=t[0],y=g(v);if(y||p>1&&"string"==typeof v&&!h.checkClone&&Le.test(v))return e.each(function(i){var o=e.eq(i);y&&(t[0]=v.call(this,i,o.html())),Me(o,t,n,r)});if(p&&(o=(i=we(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=b.map(ve(i,"script"),$e)).length;f<p;f++)l=i,f!==d&&(l=b.clone(l,!0,!0),u&&b.merge(s,ve(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,b.map(s,Pe),f=0;f<u;f++)l=s[f],he.test(l.type||"")&&!Y.access(l,"globalEval")&&b.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?b._evalUrl&&!l.noModule&&b._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")}):m(l.textContent.replace(He,""),l,c))}return e}function Ie(e,t,n){for(var r,i=t?b.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||b.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}b.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],l=void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Re(o[r],a[r]);else Re(e,c);return(a=ve(c,"script")).length>0&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=b.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?b.event.remove(n,r):b.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),b.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return B(this,function(e){return void 0===e?b.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Me(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Me(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Me(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Me(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(b.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return B(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=b.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(b.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Me(this,arguments,function(t){var n=this.parentNode;b.inArray(this,e)<0&&(b.cleanData(ve(this)),n&&n.replaceChild(t,this))},e)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,r=[],i=b(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),b(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var We=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Fe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Be=new RegExp(ne.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=b.style(e,t)),!h.pixelBoxStyles()&&We.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=12===n(c.offsetWidth/3),re.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===c.style.backgroundClip,b.extend(h,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();var Ue=["Webkit","Moz","ms"],Xe=r.createElement("div").style,Ve={};function Ge(e){var t=b.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;n--;)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=b.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=b.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=b.css(e,"border"+ne[a]+"Width",!0,i))):(u+=b.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=b.css(e,"border"+ne[a]+"Width",!0,i):s+=b.css(e,"border"+ne[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!h.boxSizingReliable()||n)&&"border-box"===b.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(We.test(a)){if(!n)return a;a="auto"}return(!h.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===b.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===b.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=b.cssHooks[t]||b.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(b.cssNumber[s]?"":"px")),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Qe.test(t)||(t=Ge(s)),(a=b.cssHooks[t]||b.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return!Ye.test(b.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,t,r):se(e,Je,function(){return tt(e,t,r)})},set:function(e,n,r){var i,o=Fe(e),a=!h.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===b.css(e,"boxSizing",!1,o),u=r?et(e,t,r,s,o):0;return s&&a&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-et(e,t,"border",!1,o)-.5)),u&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=b.css(e,t)),Ze(0,n,u)}}}),b.cssHooks.marginLeft=ze(h.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(b.cssHooks[e+t].set=Ze)}),b.fn.extend({css:function(e,t){return B(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=b.css(e,t[a],!1,r);return o}return void 0!==n?b.style(e,t,n):b.css(e,t)},e,t,arguments.length>1)}}),b.Tween=nt,nt.prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||b.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}},nt.prototype.init.prototype=nt.prototype,nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=b.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):1!==e.elem.nodeType||!b.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:b.style(e.elem,e.prop,e.now+e.unit)}}},nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},b.fx=nt.prototype.init,b.fx.step={};var rt,it,ot=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){it&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(st):e.setTimeout(st,b.fx.interval),b.fx.tick())}function ut(){return e.setTimeout(function(){rt=void 0}),rt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ft.tweeners[t]||[]).concat(ft.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ft(e,t,n){var r,i,o=0,a=ft.prefilters.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=rt||ut(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||ut(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=b.cssHooks[r])&&("expand"in a))for(n in o=a.expand(o),delete e[r],o)(n in e)||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=ft.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(b._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return b.map(c,ct,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}b.Animation=b.extend(ft,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match($);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ft.tweeners[n]=ft.tweeners[n]||[],ft.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=b._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,b.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],ot.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||b.style(e,r)}if((u=!b.isEmptyObject(t))||!b.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=b.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=b.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===b.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Y.remove(e,"fxshow"),d)b.style(e,r,d[r])})),u=ct(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ft.prefilters.unshift(e):ft.prefilters.push(e)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return b.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in b.fx.speeds?r.duration=b.fx.speeds[r.duration]:r.duration=b.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=ft(this,b.extend({},e),o);(i||Y.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=b.timers,a=Y.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&at.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||b.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Y.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,i)}}),b.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.timers=[],b.fx.tick=function(){var e,t=0,n=b.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||b.fx.stop(),rt=void 0},b.fx.timer=function(e){b.timers.push(e),b.fx.start()},b.fx.interval=13,b.fx.start=function(){it||(it=!0,st())},b.fx.stop=function(){it=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(t,n){return t=b.fx&&b.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",h.checkOn=""!==e.value,h.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",h.radioValue="t"===e.value}();var pt,dt=b.expr.attrHandle;b.fn.extend({attr:function(e,t){return B(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})}}),b.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?b.prop(e,t,n):(1===o&&b.isXMLDoc(e)||(i=b.attrHooks[t.toLowerCase()]||(b.expr.match.bool.test(t)?pt:void 0)),void 0!==n?null===n?void b.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=b.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&N(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match($);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),pt={set:function(e,t,n){return!1===t?b.removeAttr(e,n):e.setAttribute(n,n),n}},b.each(b.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||b.find.attr;dt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}});var ht=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;function vt(e){return(e.match($)||[]).join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}b.fn.extend({prop:function(e,t){return B(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[b.propFix[e]||e]})}}),b.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&b.isXMLDoc(e)||(t=b.propFix[t]||t,i=b.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||gt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(b.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){b.propFix[this.toLowerCase()]=this}),b.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){b(this).addClass(e.call(this,t,yt(this)))});if((t=mt(e)).length)for(;n=this[u++];)if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){b(this).removeClass(e.call(this,t,yt(this)))});if(!arguments.length)return this.attr("class","");if((t=mt(e)).length)for(;n=this[u++];)if(i=yt(n),r=1===n.nodeType&&" "+vt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=vt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,yt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=b(this),a=mt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=yt(this))&&Y.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+vt(yt(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;b.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,b(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=b.map(i,function(e){return null==e?"":e+""})),(t=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=b.valHooks[i.type]||b.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(xt,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:vt(b.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(t=b(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=b.makeArray(t),a=i.length;a--;)((r=i[a]).selected=b.inArray(b.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=b.inArray(b(e).val(),t)>-1}},h.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),h.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};b.extend(b.event,{trigger:function(t,n,i,o){var a,s,u,l,c,p,d,h,y=[i||r],m=f.call(t,"type")?t.type:t,x=f.call(t,"namespace")?t.namespace.split("."):[];if(s=h=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!bt.test(m+b.event.triggered)&&(m.indexOf(".")>-1&&(x=m.split("."),m=x.shift(),x.sort()),c=m.indexOf(":")<0&&"on"+m,(t=t[b.expando]?t:new b.Event(m,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=x.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:b.makeArray(n,[t]),d=b.event.special[m]||{},o||!d.trigger||!1!==d.trigger.apply(i,n))){if(!o&&!d.noBubble&&!v(i)){for(l=d.delegateType||m,bt.test(l+m)||(s=s.parentNode);s;s=s.parentNode)y.push(s),u=s;u===(i.ownerDocument||r)&&y.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=y[a++])&&!t.isPropagationStopped();)h=s,t.type=a>1?l:d.bindType||m,(p=(Y.get(s,"events")||{})[t.type]&&Y.get(s,"handle"))&&p.apply(s,n),(p=c&&s[c])&&p.apply&&V(s)&&(t.result=p.apply(s,n),!1===t.result&&t.preventDefault());return t.type=m,o||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),n)||!V(i)||c&&g(i[m])&&!v(i)&&((u=i[c])&&(i[c]=null),b.event.triggered=m,t.isPropagationStopped()&&h.addEventListener(m,wt),i[m](),t.isPropagationStopped()&&h.removeEventListener(m,wt),b.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=b.extend(new b.Event,n,{type:e,isSimulated:!0});b.event.trigger(r,null,t)}}),b.fn.extend({trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),h.focusin||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){b.event.simulate(t,e.target,b.event.fix(e))};b.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Y.access(r,t);i||r.addEventListener(e,n,!0),Y.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Y.access(r,t)-1;i?Y.access(r,t,i):(r.removeEventListener(e,n,!0),Y.remove(r,t))}}});var Tt=e.location,Ct=Date.now(),Et=/\?/;b.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=new e.DOMParser().parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+t),n};var kt=/\[\]$/,St=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,r){var i;if(Array.isArray(t))b.each(t,function(t,i){n||kt.test(e)?r(e,i):Dt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==x(t))r(e,t);else for(i in t)Dt(e+"["+i+"]",t[i],n,r)}b.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){i(this.name,this.value)});else for(n in e)Dt(n,e[n],t,i);return r.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&At.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:Array.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}});var jt=/%20/g,qt=/#.*$/,Lt=/([?&])_=[^&]*/,Ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ot=/^(?:GET|HEAD)$/,$t=/^\/\//,Pt={},Rt={},Mt="*/".concat("*"),It=r.createElement("a");function Wt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match($)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},o=e===Rt;function a(s){var u;return i[s]=!0,b.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Bt(e,t){var n,r,i=b.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&b.extend(!0,e,r),e}It.href=Tt.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Mt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,b.ajaxSettings),t):Bt(b.ajaxSettings,e)},ajaxPrefilter:Wt(Pt),ajaxTransport:Wt(Rt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=b.ajaxSetup({},n),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?b(g):b.event,y=b.Deferred(),m=b.Callbacks("once memory"),x=h.statusCode||{},w={},T={},C="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Ht.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)E.always(e[E.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||C;return i&&i.abort(t),k(0,t),this}};if(y.promise(E),h.url=((t||h.url||Tt.href)+"").replace($t,Tt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match($)||[""],null==h.crossDomain){l=r.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=It.protocol+"//"+It.host!=l.protocol+"//"+l.host}catch(S){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=b.param(h.data,h.traditional)),Ft(Pt,h,n,E),c)return E;for(p in(f=b.event&&h.global)&&0==b.active++&&b.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ot.test(h.type),o=h.url.replace(qt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(jt,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(Et.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(o=o.replace(Lt,"$1"),d=(Et.test(o)?"&":"?")+"_="+Ct++ +d),h.url=o+d),h.ifModified&&(b.lastModified[o]&&E.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&E.setRequestHeader("If-None-Match",b.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||n.contentType)&&E.setRequestHeader("Content-Type",h.contentType),E.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Mt+"; q=0.01":""):h.accepts["*"]),h.headers)E.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(!1===h.beforeSend.call(g,E,h)||c))return E.abort();if(C="abort",m.add(h.complete),E.done(h.success),E.fail(h.error),i=Ft(Rt,h,n,E)){if(E.readyState=1,f&&v.trigger("ajaxSend",[E,h]),c)return E;h.async&&h.timeout>0&&(u=e.setTimeout(function(){E.abort("timeout")},h.timeout));try{c=!1,i.send(w,k)}catch(S){if(c)throw S;k(-1,S)}}else k(-1,"No Transport");function k(t,n,r,s){var l,p,d,w,T,C=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",E.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(h,E,r)),w=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(S){return{state:"parsererror",error:a?S:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(h,w,E,l),l?(h.ifModified&&((T=E.getResponseHeader("Last-Modified"))&&(b.lastModified[o]=T),(T=E.getResponseHeader("etag"))&&(b.etag[o]=T)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=w.state,p=w.data,l=!(d=w.error))):(d=C,!t&&C||(C="error",t<0&&(t=0))),E.status=t,E.statusText=(n||C)+"",l?y.resolveWith(g,[p,C,E]):y.rejectWith(g,[E,C,d]),E.statusCode(x),x=void 0,f&&v.trigger(l?"ajaxSuccess":"ajaxError",[E,h,l?p:d]),m.fireWith(g,[E,C]),f&&(v.trigger("ajaxComplete",[E,h]),--b.active||b.event.trigger("ajaxStop")))}return E},getJSON:function(e,t,n){return b.get(e,t,n,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],function(e,t){b[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),b.ajax(b.extend({url:e,type:t,dataType:i,data:n,success:r},b.isPlainObject(e)&&e))}}),b._evalUrl=function(e,t){return b.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){b.globalEval(e,t)}})},b.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=b(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){b(this).replaceWith(this.childNodes)}),this}}),b.expr.pseudos.hidden=function(e){return!b.expr.pseudos.visible(e)},b.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var _t={0:200,1223:204},zt=b.ajaxSettings.xhr();h.cors=!!zt&&"withCredentials"in zt,h.ajax=zt=!!zt,b.ajaxTransport(function(t){var n,r;if(h.cors||zt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(_t[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}}),b.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),b.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,o){t=b("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var Ut,Xt=[],Vt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||b.expando+"_"+Ct++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Vt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Vt,"$1"+i):!1!==t.jsonp&&(t.url+=(Et.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||b.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?b(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Xt.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),h.createHTMLDocument=((Ut=r.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ut.childNodes.length),b.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(h.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),a=!n&&[],(o=A.exec(e))?[t.createElement(o[1])]:(o=we([e],t,a),a&&a.length&&b(a).remove(),b.merge([],o.childNodes)));var i,o,a},b.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=vt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&b.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?b("<div>").append(b.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.expr.pseudos.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length},b.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=b.css(e,"position"),c=b(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=b.css(e,"top"),u=b.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,b.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},b.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){b.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===b.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===b.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=b(e).offset()).top+=b.css(e,"borderTopWidth",!0),i.left+=b.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-b.css(r,"marginTop",!0),left:t.left-i.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===b.css(e,"position");)e=e.offsetParent;return e||re})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;b.fn[e]=function(r){return B(this,function(e,r,i){var o;if(v(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),b.each(["top","left"],function(e,t){b.cssHooks[t]=ze(h.pixelPosition,function(e,n){if(n)return n=_e(e,t),We.test(n)?b(e).position()[t]+"px":n})}),b.each({Height:"height",Width:"width"},function(e,t){b.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){b.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return B(this,function(t,n,i){var o;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?b.css(t,n,s):b.style(t,n,i,s)},t,a?i:void 0,a)}})}),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),b.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),b.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||b.guid++,i},b.holdReady=function(e){e?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=N,b.isFunction=g,b.isWindow=v,b.camelCase=X,b.type=x,b.now=Date.now,b.isNumeric=function(e){var t=b.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof Bb&&Bb.amd&&Bb("jquery",[],function(){return b});var Gt=e.jQuery,Yt=e.$;return b.noConflict=function(t){return e.$===b&&(e.$=Yt),t&&e.jQuery===b&&(e.jQuery=Gt),b},t||(e.jQuery=e.$=b),b});function $b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$b(r,!0).forEach(function(t){mr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$b(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tc(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jr(e,t,r){return t&&tc(e.prototype,t),r&&tc(e,r),e}var yb,Ga={},r=arguments[0],q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===(void 0===Ga?"undefined":q(Ga))?Ga=e():"function"==typeof yb&&yb.amd?yb(e):t.Tabulator=e()}(Ga,function(){Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError("\"this\" is null or not defined");var e=Object(this),o=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var s=e[n];if(t.call(i,s,n,e))return n;n++}return-1}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("\"this\" is null or not defined");var e=Object(this),o=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],n=0;n<o;){var s=e[n];if(t.call(i,s,n,e))return s;n++}}});var t=function(t){this.table=t,this.headersElement=this.createHeadersElement(),this.element=this.createHeaderElement(),this.rowManager=null,this.columns=[],this.columnsByIndex=[],this.columnsByField=[],this.scrollLeft=0,this.element.insertBefore(this.headersElement,this.element.firstChild)};t.prototype.createHeadersElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-headers"),t},t.prototype.createHeaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-header"),t},t.prototype.setRowManager=function(t){this.rowManager=t},t.prototype.getElement=function(){return this.element},t.prototype.getHeadersElement=function(){return this.headersElement},t.prototype.scrollHorizontal=function(t){var e=0,o=this.element.scrollWidth-this.table.element.clientWidth;this.element.scrollLeft=t,t>o?(e=t-o,this.element.style.marginLeft=-e+"px"):this.element.style.marginLeft=0,this.scrollLeft=t,this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},t.prototype.setColumns=function(t,e){for(var o=this;o.headersElement.firstChild;)o.headersElement.removeChild(o.headersElement.firstChild);o.columns=[],o.columnsByIndex=[],o.columnsByField=[],o.table.modExists("frozenColumns")&&o.table.modules.frozenColumns.reset(),t.forEach(function(t,e){o._addColumn(t)}),o._reIndexColumns(),o.table.options.responsiveLayout&&o.table.modExists("responsiveLayout",!0)&&o.table.modules.responsiveLayout.initialize(),o.redraw(!0)},t.prototype._addColumn=function(t,e,o){var n=new i(t,this),s=n.getElement(),r=o?this.findColumnIndex(o):o;if(o&&r>-1){var a=this.columns.indexOf(o.getTopColumn()),l=o.getElement();e?(this.columns.splice(a,0,n),l.parentNode.insertBefore(s,l)):(this.columns.splice(a+1,0,n),l.parentNode.insertBefore(s,l.nextSibling))}else e?(this.columns.unshift(n),this.headersElement.insertBefore(n.getElement(),this.headersElement.firstChild)):(this.columns.push(n),this.headersElement.appendChild(n.getElement()));return n},t.prototype.registerColumnField=function(t){t.definition.field&&(this.columnsByField[t.definition.field]=t)},t.prototype.registerColumnPosition=function(t){this.columnsByIndex.push(t)},t.prototype._reIndexColumns=function(){this.columnsByIndex=[],this.columns.forEach(function(t){t.reRegisterPosition()})},t.prototype._verticalAlignHeaders=function(){var t=this,e=0;t.columns.forEach(function(t){var o;t.clearVerticalAlign(),(o=t.getHeight())>e&&(e=o)}),t.columns.forEach(function(o){o.verticalAlign(t.table.options.columnVertAlign,e)}),t.rowManager.adjustTableSize()},t.prototype.findColumn=function(t){return"object"!=(void 0===t?"undefined":q(t))?this.columnsByField[t]||!1:t instanceof i?t:t instanceof o?t._getSelf()||!1:t instanceof HTMLElement&&this.columns.find(function(e){return e.element===t})||!1},t.prototype.getColumnByField=function(t){return this.columnsByField[t]},t.prototype.getColumnByIndex=function(t){return this.columnsByIndex[t]},t.prototype.getColumns=function(){return this.columns},t.prototype.findColumnIndex=function(t){return this.columnsByIndex.findIndex(function(e){return t===e})},t.prototype.getRealColumns=function(){return this.columnsByIndex},t.prototype.traverse=function(t){this.columnsByIndex.forEach(function(e,o){t(e,o)})},t.prototype.getDefinitions=function(t){var e=[];return this.columnsByIndex.forEach(function(o){(!t||t&&o.visible)&&e.push(o.getDefinition())}),e},t.prototype.getDefinitionTree=function(){var t=[];return this.columns.forEach(function(e){t.push(e.getDefinition(!0))}),t},t.prototype.getComponents=function(t){var e=[];return(t?this.columns:this.columnsByIndex).forEach(function(t){e.push(t.getComponent())}),e},t.prototype.getWidth=function(){var t=0;return this.columnsByIndex.forEach(function(e){e.visible&&(t+=e.getWidth())}),t},t.prototype.moveColumn=function(t,e,o){this._moveColumnInArray(this.columns,t,e,o),this._moveColumnInArray(this.columnsByIndex,t,e,o,!0),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.options.columnMoved&&this.table.options.columnMoved.call(this.table,t.getComponent(),this.table.columnManager.getComponents()),this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns")},t.prototype._moveColumnInArray=function(t,e,o,i,n){var s,r=t.indexOf(e);r>-1&&(t.splice(r,1),(s=t.indexOf(o))>-1?i&&(s+=1):s=r,t.splice(s,0,e),n&&this.table.rowManager.rows.forEach(function(t){if(t.cells.length){var e=t.cells.splice(r,1)[0];t.cells.splice(s,0,e)}}))},t.prototype.scrollToColumn=function(t,e,o){var i=this,n=0,s=0,r=0,a=t.getElement();return new Promise(function(l,u){if(void 0===e&&(e=i.table.options.scrollToColumnPosition),void 0===o&&(o=i.table.options.scrollToColumnIfVisible),t.visible){switch(e){case"middle":case"center":r=-i.element.clientWidth/2;break;case"right":r=a.clientWidth-i.headersElement.clientWidth;}if(!o&&(s=a.offsetLeft)>0&&s+a.offsetWidth<i.element.clientWidth)return!1;n=a.offsetLeft+i.element.scrollLeft+r,n=Math.max(Math.min(n,i.table.rowManager.element.scrollWidth-i.table.rowManager.element.clientWidth),0),i.table.rowManager.scrollHorizontal(n),i.scrollHorizontal(n),l()}else console.warn("Scroll Error - Column not visible"),u("Scroll Error - Column not visible")})},t.prototype.generateCells=function(t){var e=[];return this.columnsByIndex.forEach(function(o){e.push(o.generateCell(t))}),e},t.prototype.getFlexBaseWidth=function(){var t=this,e=t.table.element.clientWidth,o=0;return t.rowManager.element.scrollHeight>t.rowManager.element.clientHeight&&(e-=t.rowManager.element.offsetWidth-t.rowManager.element.clientWidth),this.columnsByIndex.forEach(function(i){var n,s,r;i.visible&&(n=i.definition.width||0,s=void 0===i.minWidth?t.table.options.columnMinWidth:parseInt(i.minWidth),r="string"==typeof n?n.indexOf("%")>-1?e/100*parseInt(n):parseInt(n):n,o+=r>s?r:s)}),o},t.prototype.addColumn=function(t,e,o){var i=this._addColumn(t,e,o);this._reIndexColumns(),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),this.redraw(),"fitColumns"!=this.table.modules.layout.getMode()&&i.reinitializeWidth(),this._verticalAlignHeaders(),this.table.rowManager.reinitialize()},t.prototype.deregisterColumn=function(t){var e,o=t.getField();o&&delete this.columnsByField[o],(e=this.columnsByIndex.indexOf(t))>-1&&this.columnsByIndex.splice(e,1),(e=this.columns.indexOf(t))>-1&&this.columns.splice(e,1),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.initialize(),this.redraw()},t.prototype.redraw=function(t){t&&(c.prototype.helpers.elVisible(this.element)&&this._verticalAlignHeaders(),this.table.rowManager.resetScroll(),this.table.rowManager.reinitialize()),"fitColumns"==this.table.modules.layout.getMode()?this.table.modules.layout.layout():t?this.table.modules.layout.layout():this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows),t&&(this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns"),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.redraw()),this.table.footerManager.redraw()};var o=function(t){this._column=t,this.type="ColumnComponent"};o.prototype.getElement=function(){return this._column.getElement()},o.prototype.getDefinition=function(){return this._column.getDefinition()},o.prototype.getField=function(){return this._column.getField()},o.prototype.getCells=function(){var t=[];return this._column.cells.forEach(function(e){t.push(e.getComponent())}),t},o.prototype.getVisibility=function(){return this._column.visible},o.prototype.show=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.show()}):this._column.show()},o.prototype.hide=function(){this._column.isGroup?this._column.columns.forEach(function(t){t.hide()}):this._column.hide()},o.prototype.toggle=function(){this._column.visible?this.hide():this.show()},o.prototype.delete=function(){this._column.delete()},o.prototype.getSubColumns=function(){var t=[];return this._column.columns.length&&this._column.columns.forEach(function(e){t.push(e.getComponent())}),t},o.prototype.getParentColumn=function(){return this._column.parent instanceof i&&this._column.parent.getComponent()},o.prototype._getSelf=function(){return this._column},o.prototype.scrollTo=function(){return this._column.table.columnManager.scrollToColumn(this._column)},o.prototype.getTable=function(){return this._column.table},o.prototype.headerFilterFocus=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterFocus(this._column)},o.prototype.reloadHeaderFilter=function(){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.reloadHeaderFilter(this._column)},o.prototype.setHeaderFilterValue=function(t){this._column.table.modExists("filter",!0)&&this._column.table.modules.filter.setHeaderFilterValue(this._column,t)};var i=function t(e,o){var i=this;this.table=o.table,this.definition=e,this.parent=o,this.type="column",this.columns=[],this.cells=[],this.element=this.createElement(),this.contentElement=!1,this.groupElement=this.createGroupElement(),this.isGroup=!1,this.tooltip=!1,this.hozAlign="",this.field="",this.fieldStructure="",this.getFieldValue="",this.setFieldValue="",this.setField(this.definition.field),this.modules={},this.cellEvents={cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1},this.width=null,this.minWidth=null,this.widthFixed=!1,this.visible=!0,e.columns?(this.isGroup=!0,e.columns.forEach(function(e,o){var n=new t(e,i);i.attachColumn(n)}),i.checkColumnVisibility()):o.registerColumnField(this),e.rowHandle&&!1!==this.table.options.movableRows&&this.table.modExists("moveRow")&&this.table.modules.moveRow.setHandle(!0),this._buildHeader()};i.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.setAttribute("role","columnheader"),t.setAttribute("aria-sort","none"),t},i.prototype.createGroupElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col-group-cols"),t},i.prototype.setField=function(t){this.field=t,this.fieldStructure=t?this.table.options.nestedFieldSeparator?t.split(this.table.options.nestedFieldSeparator):[t]:[],this.getFieldValue=this.fieldStructure.length>1?this._getNestedData:this._getFlatData,this.setFieldValue=this.fieldStructure.length>1?this._setNesteData:this._setFlatData},i.prototype.registerColumnPosition=function(t){this.parent.registerColumnPosition(t)},i.prototype.registerColumnField=function(t){this.parent.registerColumnField(t)},i.prototype.reRegisterPosition=function(){this.isGroup?this.columns.forEach(function(t){t.reRegisterPosition()}):this.registerColumnPosition(this)},i.prototype.setTooltip=function(){var t=this,e=t.definition,o=e.headerTooltip||!1===e.tooltip?e.headerTooltip:t.table.options.tooltipsHeader;o?!0===o?e.field?t.table.modules.localize.bind("columns|"+e.field,function(o){t.element.setAttribute("title",o||e.title)}):t.element.setAttribute("title",e.title):("function"==typeof o&&!1===(o=o(t.getComponent()))&&(o=""),t.element.setAttribute("title",o)):t.element.setAttribute("title","")},i.prototype._buildHeader=function(){for(var t=this,e=t.definition;t.element.firstChild;)t.element.removeChild(t.element.firstChild);e.headerVertical&&(t.element.classList.add("tabulator-col-vertical"),"flip"===e.headerVertical&&t.element.classList.add("tabulator-col-vertical-flip")),t.contentElement=t._bindEvents(),t.contentElement=t._buildColumnHeaderContent(),t.element.appendChild(t.contentElement),t.isGroup?t._buildGroupHeader():t._buildColumnHeader(),t.setTooltip(),t.table.options.resizableColumns&&t.table.modExists("resizeColumns")&&t.table.modules.resizeColumns.initializeColumn("header",t,t.element),e.headerFilter&&t.table.modExists("filter")&&t.table.modExists("edit")&&(void 0!==e.headerFilterPlaceholder&&e.field&&t.table.modules.localize.setHeaderFilterColumnPlaceholder(e.field,e.headerFilterPlaceholder),t.table.modules.filter.initializeColumn(t)),t.table.modExists("frozenColumns")&&t.table.modules.frozenColumns.initializeColumn(t),t.table.options.movableColumns&&!t.isGroup&&t.table.modExists("moveColumn")&&t.table.modules.moveColumn.initializeColumn(t),(e.topCalc||e.bottomCalc)&&t.table.modExists("columnCalcs")&&t.table.modules.columnCalcs.initializeColumn(t),t.element.addEventListener("mouseenter",function(e){t.setTooltip()})},i.prototype._bindEvents=function(){var t,e,o,i=this,n=i.definition;"function"==typeof n.headerClick&&i.element.addEventListener("click",function(t){n.headerClick(t,i.getComponent())}),"function"==typeof n.headerDblClick&&i.element.addEventListener("dblclick",function(t){n.headerDblClick(t,i.getComponent())}),"function"==typeof n.headerContext&&i.element.addEventListener("contextmenu",function(t){n.headerContext(t,i.getComponent())}),"function"==typeof n.headerTap&&(o=!1,i.element.addEventListener("touchstart",function(t){o=!0}),i.element.addEventListener("touchend",function(t){o&&n.headerTap(t,i.getComponent()),o=!1})),"function"==typeof n.headerDblTap&&(t=null,i.element.addEventListener("touchend",function(e){t?(clearTimeout(t),t=null,n.headerDblTap(e,i.getComponent())):t=setTimeout(function(){clearTimeout(t),t=null},300)})),"function"==typeof n.headerTapHold&&(e=null,i.element.addEventListener("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,o=!1,n.headerTapHold(t,i.getComponent())},1e3)}),i.element.addEventListener("touchend",function(t){clearTimeout(e),e=null})),"function"==typeof n.cellClick&&(i.cellEvents.cellClick=n.cellClick),"function"==typeof n.cellDblClick&&(i.cellEvents.cellDblClick=n.cellDblClick),"function"==typeof n.cellContext&&(i.cellEvents.cellContext=n.cellContext),"function"==typeof n.cellTap&&(i.cellEvents.cellTap=n.cellTap),"function"==typeof n.cellDblTap&&(i.cellEvents.cellDblTap=n.cellDblTap),"function"==typeof n.cellTapHold&&(i.cellEvents.cellTapHold=n.cellTapHold),"function"==typeof n.cellEdited&&(i.cellEvents.cellEdited=n.cellEdited),"function"==typeof n.cellEditing&&(i.cellEvents.cellEditing=n.cellEditing),"function"==typeof n.cellEditCancelled&&(i.cellEvents.cellEditCancelled=n.cellEditCancelled)},i.prototype._buildColumnHeader=function(){var t=this,e=t.definition,o=t.table;(o.modExists("sort")&&o.modules.sort.initializeColumn(t,t.contentElement),o.modExists("format")&&o.modules.format.initializeColumn(t),void 0!==e.editor&&o.modExists("edit")&&o.modules.edit.initializeColumn(t),void 0!==e.validator&&o.modExists("validate")&&o.modules.validate.initializeColumn(t),o.modExists("mutator")&&o.modules.mutator.initializeColumn(t),o.modExists("accessor")&&o.modules.accessor.initializeColumn(t),q(o.options.responsiveLayout)&&o.modExists("responsiveLayout")&&o.modules.responsiveLayout.initializeColumn(t),void 0!==e.visible&&(e.visible?t.show(!0):t.hide(!0)),e.cssClass)&&e.cssClass.split(" ").forEach(function(e){t.element.classList.add(e)});e.field&&this.element.setAttribute("tabulator-field",e.field),t.setMinWidth(void 0===e.minWidth?t.table.options.columnMinWidth:e.minWidth),t.reinitializeWidth(),t.tooltip=t.definition.tooltip||!1===t.definition.tooltip?t.definition.tooltip:t.table.options.tooltips,t.hozAlign=void 0===t.definition.align?"":t.definition.align},i.prototype._buildColumnHeaderContent=function(){this.definition,this.table;var t=document.createElement("div");return t.classList.add("tabulator-col-content"),t.appendChild(this._buildColumnHeaderTitle()),t},i.prototype._buildColumnHeaderTitle=function(){var t=this,e=t.definition,o=t.table,i=document.createElement("div");if(i.classList.add("tabulator-col-title"),e.editableTitle){var n=document.createElement("input");n.classList.add("tabulator-title-editor"),n.addEventListener("click",function(t){t.stopPropagation(),n.focus()}),n.addEventListener("change",function(){e.title=n.value,o.options.columnTitleChanged.call(t.table,t.getComponent())}),i.appendChild(n),e.field?o.modules.localize.bind("columns|"+e.field,function(t){n.value=t||e.title||"&nbsp"}):n.value=e.title||"&nbsp"}else e.field?o.modules.localize.bind("columns|"+e.field,function(o){t._formatColumnHeaderTitle(i,o||e.title||"&nbsp")}):t._formatColumnHeaderTitle(i,e.title||"&nbsp");return i},i.prototype._formatColumnHeaderTitle=function(t,e){var o,i,n,s;if(this.definition.titleFormatter&&this.table.modExists("format"))switch(o=this.table.modules.format.getFormatter(this.definition.titleFormatter),s={getValue:function(){return e},getElement:function(){return t}},n="function"==typeof(n=this.definition.titleFormatterParams||{})?n():n,void 0===(i=o.call(this.table.modules.format,s,n))?"undefined":q(i)){case"object":i instanceof Node?this.element.appendChild(i):(this.element.innerHTML="",console.warn("Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",i));break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=i;}else t.innerHTML=e},i.prototype._buildGroupHeader=function(){this.element.classList.add("tabulator-col-group"),this.element.setAttribute("role","columngroup"),this.element.setAttribute("aria-title",this.definition.title),this.element.appendChild(this.groupElement)},i.prototype._getFlatData=function(t){return t[this.field]},i.prototype._getNestedData=function(t){for(var e,o=t,i=this.fieldStructure,n=i.length,s=0;s<n&&(e=o=o[i[s]],o);s++);return e},i.prototype._setFlatData=function(t,e){this.field&&(t[this.field]=e)},i.prototype._setNesteData=function(t,e){for(var o=t,i=this.fieldStructure,n=i.length,s=0;s<n;s++)s==n-1?o[i[s]]=e:(o[i[s]]||(o[i[s]]={}),o=o[i[s]])},i.prototype.attachColumn=function(t){this.groupElement?(this.columns.push(t),this.groupElement.appendChild(t.getElement())):console.warn("Column Warning - Column being attached to another column instead of column group")},i.prototype.verticalAlign=function(t,e){var o=this.parent.isGroup?this.parent.getGroupElement().clientHeight:e||this.parent.getHeadersElement().clientHeight;this.element.style.height=o+"px",this.isGroup&&(this.groupElement.style.minHeight=o-this.contentElement.offsetHeight+"px"),this.isGroup||"top"===t||(this.element.style.paddingTop="bottom"===t?this.element.clientHeight-this.contentElement.offsetHeight+"px":(this.element.clientHeight-this.contentElement.offsetHeight)/2+"px"),this.columns.forEach(function(e){e.verticalAlign(t)})},i.prototype.clearVerticalAlign=function(){this.element.style.paddingTop="",this.element.style.height="",this.element.style.minHeight="",this.groupElement.style.minHeight="",this.columns.forEach(function(t){t.clearVerticalAlign()})},i.prototype.getElement=function(){return this.element},i.prototype.getGroupElement=function(){return this.groupElement},i.prototype.getField=function(){return this.field},i.prototype.getFirstColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[0].getFirstColumn():this},i.prototype.getLastColumn=function(){return this.isGroup?!!this.columns.length&&this.columns[this.columns.length-1].getLastColumn():this},i.prototype.getColumns=function(){return this.columns},i.prototype.getCells=function(){return this.cells},i.prototype.getTopColumn=function(){return this.parent.isGroup?this.parent.getTopColumn():this},i.prototype.getDefinition=function(t){var e=[];return this.isGroup&&t&&(this.columns.forEach(function(t){e.push(t.getDefinition(!0))}),this.definition.columns=e),this.definition},i.prototype.checkColumnVisibility=function(){var t=!1;this.columns.forEach(function(e){e.visible&&(t=!0)}),t?(this.show(),this.parent.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1)):this.hide()},i.prototype.show=function(t,e){this.visible||(this.visible=!0,this.element.style.display="",this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.show()}),this.isGroup||null!==this.width||this.reinitializeWidth(),this.table.columnManager._verticalAlignHeaders(),this.table.options.persistentLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!0))},i.prototype.hide=function(t,e){this.visible&&(this.visible=!1,this.element.style.display="none",this.table.columnManager._verticalAlignHeaders(),this.parent.isGroup&&this.parent.checkColumnVisibility(),this.cells.forEach(function(t){t.hide()}),this.table.options.persistentLayout&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("columns"),!e&&this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.updateColumnVisibility(this,this.visible),t||this.table.options.columnVisibilityChanged.call(this.table,this.getComponent(),!1))},i.prototype.matchChildWidths=function(){var t=0;this.contentElement&&this.columns.length&&(this.columns.forEach(function(e){t+=e.getWidth()}),this.contentElement.style.maxWidth=t-1+"px")},i.prototype.setWidth=function(t){this.widthFixed=!0,this.setWidthActual(t)},i.prototype.setWidthActual=function(t){isNaN(t)&&(t=Math.floor(this.table.element.clientWidth/100*parseInt(t))),t=Math.max(this.minWidth,t),this.width=t,this.element.style.width=t?t+"px":"",this.isGroup||this.cells.forEach(function(e){e.setWidth(t)}),this.parent.isGroup&&this.parent.matchChildWidths(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()},i.prototype.checkCellHeights=function(){var t=[];this.cells.forEach(function(e){e.row.heightInitialized&&(null!==e.row.getElement().offsetParent?(t.push(e.row),e.row.clearCellHeight()):e.row.heightInitialized=!1)}),t.forEach(function(t){t.calcHeight()}),t.forEach(function(t){t.setCellHeight()})},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.element.offsetHeight},i.prototype.setMinWidth=function(t){this.minWidth=t,this.element.style.minWidth=t?t+"px":"",this.cells.forEach(function(e){e.setMinWidth(t)})},i.prototype.delete=function(){this.isGroup&&this.columns.forEach(function(t){t.delete()});for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete();this.element.parentNode.removeChild(this.element),this.table.columnManager.deregisterColumn(this)},i.prototype.generateCell=function(t){var e=new l(this,t);return this.cells.push(e),e},i.prototype.reinitializeWidth=function(t){this.widthFixed=!1,void 0===this.definition.width||t||this.setWidth(this.definition.width),this.table.modExists("filter")&&this.table.modules.filter.hideHeaderFilterElements(),this.fitToData(),this.table.modExists("filter")&&this.table.modules.filter.showHeaderFilterElements()},i.prototype.fitToData=function(){this.widthFixed||(this.element.style.width="",this.cells.forEach(function(t){t.setWidth("")}));var t=this.element.offsetWidth;this.width&&this.widthFixed||(this.cells.forEach(function(e){var o=e.getWidth();o>t&&(t=o)}),t&&this.setWidthActual(t+1))},i.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},i.prototype.getComponent=function(){return new o(this)};var n=function(t){this.table=t,this.element=this.createHolderElement(),this.tableElement=this.createTableElement(),this.columnManager=null,this.height=0,this.firstRender=!1,this.renderMode="classic",this.rows=[],this.activeRows=[],this.activeRowsCount=0,this.displayRows=[],this.displayRowsCount=0,this.scrollTop=0,this.scrollLeft=0,this.vDomRowHeight=20,this.vDomTop=0,this.vDomBottom=0,this.vDomScrollPosTop=0,this.vDomScrollPosBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0,this.vDomMaxRenderChain=90,this.vDomWindowBuffer=0,this.vDomWindowMinTotalRows=20,this.vDomWindowMinMarginRows=5,this.vDomTopNewRows=[],this.vDomBottomNewRows=[]};n.prototype.createHolderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-tableHolder"),t.setAttribute("tabindex",0),t},n.prototype.createTableElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-table"),t},n.prototype.getElement=function(){return this.element},n.prototype.getTableElement=function(){return this.tableElement},n.prototype.getRowPosition=function(t,e){return e?this.activeRows.indexOf(t):this.rows.indexOf(t)},n.prototype.setColumnManager=function(t){this.columnManager=t},n.prototype.initialize=function(){var t=this;t.setRenderMode(),t.element.appendChild(t.tableElement),t.firstRender=!0,t.element.addEventListener("scroll",function(){var e=t.element.scrollLeft;t.scrollLeft!=e&&(t.columnManager.scrollHorizontal(e),t.table.options.groupBy&&t.table.modules.groupRows.scrollHeaders(e),t.table.modExists("columnCalcs")&&t.table.modules.columnCalcs.scrollHorizontal(e)),t.scrollLeft=e}),"virtual"===this.renderMode&&t.element.addEventListener("scroll",function(){var e=t.element.scrollTop,o=t.scrollTop>e;t.scrollTop!=e?(t.scrollTop=e,t.scrollVertical(o),"scroll"==t.table.options.ajaxProgressiveLoad&&t.table.modules.ajax.nextPage(t.element.scrollHeight-t.element.clientHeight-e)):t.scrollTop=e})},n.prototype.findRow=function(t){var e=this;return"object"!=(void 0===t?"undefined":q(t))?null!=t&&(e.rows.find(function(o){return o.data[e.table.options.index]==t})||!1):t instanceof r?t:t instanceof s?t._getSelf()||!1:t instanceof HTMLElement&&e.rows.find(function(e){return e.element===t})||!1},n.prototype.getRowFromPosition=function(t,e){return e?this.activeRows[t]:this.rows[t]},n.prototype.scrollToRow=function(t,e,o){var i,n=this,s=this.getDisplayRows().indexOf(t),r=t.getElement(),a=0;return new Promise(function(t,l){if(s>-1){if(void 0===e&&(e=n.table.options.scrollToRowPosition),void 0===o&&(o=n.table.options.scrollToRowIfVisible),"nearest"===e)switch(n.renderMode){case"classic":i=c.prototype.helpers.elOffset(r).top,e=Math.abs(n.element.scrollTop-i)>Math.abs(n.element.scrollTop+n.element.clientHeight-i)?"bottom":"top";break;case"virtual":e=Math.abs(n.vDomTop-s)>Math.abs(n.vDomBottom-s)?"bottom":"top";}if(!o&&c.prototype.helpers.elVisible(r)&&(a=c.prototype.helpers.elOffset(r).top-c.prototype.helpers.elOffset(n.element).top)>0&&a<n.element.clientHeight-r.offsetHeight)return!1;switch(n.renderMode){case"classic":n.element.scrollTop=c.prototype.helpers.elOffset(r).top-c.prototype.helpers.elOffset(n.element).top+n.element.scrollTop;break;case"virtual":n._virtualRenderFill(s,!0);}switch(e){case"middle":case"center":n.element.scrollTop=n.element.scrollTop-n.element.clientHeight/2;break;case"bottom":n.element.scrollTop=n.element.scrollTop-n.element.clientHeight+r.offsetHeight;}t()}else console.warn("Scroll Error - Row not visible"),l("Scroll Error - Row not visible")})},n.prototype.setData=function(t,e){var o=this,i=this;return new Promise(function(n,s){e&&o.getDisplayRows().length?i.table.options.pagination?i._setDataActual(t,!0):o.reRenderInPosition(function(){i._setDataActual(t)}):(o.resetScroll(),o._setDataActual(t)),n()})},n.prototype._setDataActual=function(t,e){var o=this;o.table.options.dataLoading.call(this.table,t),o.rows.forEach(function(t){t.wipe()}),o.rows=[],this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.clear(),Array.isArray(t)?(this.table.modExists("selectRow")&&this.table.modules.selectRow.clearSelectionData(),t.forEach(function(t,e){if(t&&"object"===(void 0===t?"undefined":q(t))){var i=new r(t,o);o.rows.push(i)}else console.warn("Data Loading Warning - Invalid row data detected and ignored, expecting object but received:",t)}),o.table.options.dataLoaded.call(this.table,t),o.refreshActiveData(!1,!1,e)):console.error("Data Loading Error - Unable to process data due to invalid data type \nExpecting: array \nReceived: ",void 0===t?"undefined":q(t),"\nData:     ",t)},n.prototype.deleteRow=function(t){var e=this.rows.indexOf(t),o=this.activeRows.indexOf(t);o>-1&&this.activeRows.splice(o,1),e>-1&&this.rows.splice(e,1),this.setActiveRows(this.activeRows),this.displayRowIterator(function(e){var o=e.indexOf(t);o>-1&&e.splice(o,1)}),this.reRenderInPosition(),this.table.options.rowDeleted.call(this.table,t.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.updateGroupRows(!0):this.table.options.pagination&&this.table.modExists("page")?this.refreshActiveData(!1,!1,!0):this.table.options.pagination&&this.table.modExists("page")&&this.refreshActiveData("page")},n.prototype.addRow=function(t,e,o,i){var n=this.addRowActual(t,e,o,i);return this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowAdd",n,{data:t,pos:e,index:o}),n},n.prototype.addRows=function(t,e,o){var i=this,n=this,s=[];return new Promise(function(r,a){e=i.findAddRowPos(e),Array.isArray(t)||(t=[t]),t.length-1,(void 0===o&&e||void 0!==o&&!e)&&t.reverse(),t.forEach(function(t,i){var r=n.addRow(t,e,o,!0);s.push(r)}),i.table.options.groupBy&&i.table.modExists("groupRows")?i.table.modules.groupRows.updateGroupRows(!0):i.table.options.pagination&&i.table.modExists("page")?i.refreshActiveData(!1,!1,!0):i.reRenderInPosition(),i.table.modExists("columnCalcs")&&i.table.modules.columnCalcs.recalc(i.table.rowManager.activeRows),r(s)})},n.prototype.findAddRowPos=function(t){return void 0===t&&(t=this.table.options.addRowPos),"pos"===t&&(t=!0),"bottom"===t&&(t=!1),t},n.prototype.addRowActual=function(t,e,o,i){var n,s=t instanceof r?t:new r(t||{},this),a=this.findAddRowPos(e);if(!o&&this.table.options.pagination&&"page"==this.table.options.paginationAddRow&&(n=this.getDisplayRows(),a?n.length?o=n[0]:this.activeRows.length&&(o=this.activeRows[this.activeRows.length-1],a=!1):n.length&&(o=n[n.length-1],a=!(n.length<this.table.modules.page.getPageSize()))),o&&(o=this.findRow(o)),this.table.options.groupBy&&this.table.modExists("groupRows")){this.table.modules.groupRows.assignRowToGroup(s);var l=s.getGroup().rows;l.length>1&&(!o||o&&-1==l.indexOf(o)?a?l[0]!==s&&(o=l[0],this._moveRowInArray(s.getGroup().rows,s,o,a)):l[l.length-1]!==s&&(o=l[l.length-1],this._moveRowInArray(s.getGroup().rows,s,o,a)):this._moveRowInArray(s.getGroup().rows,s,o,a))}if(o){var u=this.rows.indexOf(o),c=this.activeRows.indexOf(o);this.displayRowIterator(function(t){var e=t.indexOf(o);e>-1&&t.splice(a?e:e+1,0,s)}),c>-1&&this.activeRows.splice(a?c:c+1,0,s),u>-1&&this.rows.splice(a?u:u+1,0,s)}else a?(this.displayRowIterator(function(t){t.unshift(s)}),this.activeRows.unshift(s),this.rows.unshift(s)):(this.displayRowIterator(function(t){t.push(s)}),this.activeRows.push(s),this.rows.push(s));return this.setActiveRows(this.activeRows),this.table.options.rowAdded.call(this.table,s.getComponent()),this.table.options.dataEdited.call(this.table,this.getData()),i||this.reRenderInPosition(),s},n.prototype.moveRow=function(t,e,o){this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("rowMove",t,{pos:this.getRowPosition(t),to:e,after:o}),this.moveRowActual(t,e,o),this.table.options.rowMoved.call(this.table,t.getComponent())},n.prototype.moveRowActual=function(t,e,o){var i=this;if(this._moveRowInArray(this.rows,t,e,o),this._moveRowInArray(this.activeRows,t,e,o),this.displayRowIterator(function(n){i._moveRowInArray(n,t,e,o)}),this.table.options.groupBy&&this.table.modExists("groupRows")){var n=e.getGroup(),s=t.getGroup();n===s?this._moveRowInArray(n.rows,t,e,o):(s&&s.removeRow(t),n.insertRow(t,e,o))}},n.prototype._moveRowInArray=function(t,e,o,i){var n,s,r;if(e!==o&&((n=t.indexOf(e))>-1&&(t.splice(n,1),(s=t.indexOf(o))>-1?i?t.splice(s+1,0,e):t.splice(s,0,e):t.splice(n,0,e)),t===this.getDisplayRows())){r=s>n?s:n+1;for(var a=n<s?n:s;a<=r;a++)t[a]&&this.styleRow(t[a],a)}},n.prototype.clearData=function(){this.setData([])},n.prototype.getRowIndex=function(t){return this.findRowIndex(t,this.rows)},n.prototype.getDisplayRowIndex=function(t){var e=this.getDisplayRows().indexOf(t);return e>-1&&e},n.prototype.nextDisplayRow=function(t,e){var o=this.getDisplayRowIndex(t),i=!1;return!1!==o&&o<this.displayRowsCount-1&&(i=this.getDisplayRows()[o+1]),!i||i instanceof r&&"row"==i.type?i:this.nextDisplayRow(i,e)},n.prototype.prevDisplayRow=function(t,e){var o=this.getDisplayRowIndex(t),i=!1;return o&&(i=this.getDisplayRows()[o-1]),!i||i instanceof r&&"row"==i.type?i:this.prevDisplayRow(i,e)},n.prototype.findRowIndex=function(t,e){var o;return!!((t=this.findRow(t))&&(o=e.indexOf(t))>-1)&&o},n.prototype.getData=function(t,e){var o=[];return(t?this.activeRows:this.rows).forEach(function(t){o.push(t.getData(e||"data"))}),o},n.prototype.getHtml=function(t){var e=this.getData(t),o=[],i="",n="";return this.table.columnManager.getColumns().forEach(function(t){var e=t.getDefinition();t.visible&&!e.hideInHtml&&(i+="<th>"+(e.title||"")+"</th>",o.push(t))}),e.forEach(function(t){var e="";o.forEach(function(o){var i=o.getFieldValue(t);null==i&&(i=":"),e+="<td>"+i+"</td>"}),n+="<tr>"+e+"</tr>"}),"<table>\n\n\t\t\t<thead>\n\n\t\t\t<tr>"+i+"</tr>\n\n\t\t\t</thead>\n\n\t\t\t<tbody>"+n+"</tbody>\n\n\t\t\t</table>"},n.prototype.getComponents=function(t){var e=[];return(t?this.activeRows:this.rows).forEach(function(t){e.push(t.getComponent())}),e},n.prototype.getDataCount=function(t){return t?this.rows.length:this.activeRows.length},n.prototype._genRemoteRequest=function(){var t=this,e=t.table,o=e.options,i={};if(e.modExists("page")){if(o.ajaxSorting){var n=t.table.modules.sort.getSort();n.forEach(function(t){delete t.column}),i[t.table.modules.page.paginationDataSentNames.sorters]=n}if(o.ajaxFiltering){var s=t.table.modules.filter.getFilters(!0,!0);i[t.table.modules.page.paginationDataSentNames.filters]=s}t.table.modules.ajax.setParams(i,!0)}e.modules.ajax.sendRequest().then(function(e){t.setData(e)}).catch(function(t){})},n.prototype.filterRefresh=function(){var t=this.table,e=t.options,o=this.scrollLeft;e.ajaxFiltering?"remote"==e.pagination&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("filter"),this.scrollHorizontal(o)},n.prototype.sorterRefresh=function(){var t=this.table,e=this.table.options,o=this.scrollLeft;e.ajaxSorting?("remote"==e.pagination||e.progressiveLoad)&&t.modExists("page")?(t.modules.page.reset(!0),t.modules.page.setPage(1).then(function(){}).catch(function(){})):e.ajaxProgressiveLoad?t.modules.ajax.loadData().then(function(){}).catch(function(){}):this._genRemoteRequest():this.refreshActiveData("sort"),this.scrollHorizontal(o)},n.prototype.scrollHorizontal=function(t){this.scrollLeft=t,this.element.scrollLeft=t,this.table.options.groupBy&&this.table.modules.groupRows.scrollHeaders(t),this.table.modExists("columnCalcs")&&this.table.modules.columnCalcs.scrollHorizontal(t)},n.prototype.refreshActiveData=function(t,e,o){var i,n=this.table;switch(t||(t="all"),n.options.selectable&&!n.options.selectablePersistence&&n.modExists("selectRow")&&n.modules.selectRow.deselectRows(),t){case"all":case"filter":e?e=!1:n.modExists("filter")?this.setActiveRows(n.modules.filter.filter(this.rows)):this.setActiveRows(this.rows.slice(0));case"sort":e?e=!1:n.modExists("sort")&&n.modules.sort.sort();case"display":this.resetDisplayRows();case"freeze":e?e=!1:this.table.modExists("frozenRows")&&n.modules.frozenRows.isFrozen()&&(n.modules.frozenRows.getDisplayIndex()||n.modules.frozenRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.frozenRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.frozenRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.frozenRows.setDisplayIndex(i));case"group":e?e=!1:n.options.groupBy&&n.modExists("groupRows")&&(n.modules.groupRows.getDisplayIndex()||n.modules.groupRows.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.groupRows.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.groupRows.getRows(this.getDisplayRows(i-1)),i))&&n.modules.groupRows.setDisplayIndex(i));case"tree":e?e=!1:n.options.dataTree&&n.modExists("dataTree")&&(n.modules.dataTree.getDisplayIndex()||n.modules.dataTree.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.dataTree.getDisplayIndex(),!0!==(i=this.setDisplayRows(n.modules.dataTree.getRows(this.getDisplayRows(i-1)),i))&&n.modules.dataTree.setDisplayIndex(i)),n.options.pagination&&n.modExists("page")&&!o&&"local"==n.modules.page.getMode()&&n.modules.page.reset();case"page":e?e=!1:n.options.pagination&&n.modExists("page")&&(n.modules.page.getDisplayIndex()||n.modules.page.setDisplayIndex(this.getNextDisplayIndex()),i=n.modules.page.getDisplayIndex(),"local"==n.modules.page.getMode()&&n.modules.page.setMaxRows(this.getDisplayRows(i-1).length),!0!==(i=this.setDisplayRows(n.modules.page.getRows(this.getDisplayRows(i-1)),i))&&n.modules.page.setDisplayIndex(i));}c.prototype.helpers.elVisible(this.element)&&(o?this.reRenderInPosition():(this.renderTable(),n.options.layoutColumnsOnNewData&&this.table.columnManager.redraw(!0))),n.modExists("columnCalcs")&&n.modules.columnCalcs.recalc(this.activeRows)},n.prototype.setActiveRows=function(t){this.activeRows=t,this.activeRowsCount=this.activeRows.length},n.prototype.resetDisplayRows=function(){this.displayRows=[],this.displayRows.push(this.activeRows.slice(0)),this.displayRowsCount=this.displayRows[0].length,this.table.modExists("frozenRows")&&this.table.modules.frozenRows.setDisplayIndex(0),this.table.options.groupBy&&this.table.modExists("groupRows")&&this.table.modules.groupRows.setDisplayIndex(0),this.table.options.pagination&&this.table.modExists("page")&&this.table.modules.page.setDisplayIndex(0)},n.prototype.getNextDisplayIndex=function(){return this.displayRows.length},n.prototype.setDisplayRows=function(t,e){var o=!0;return e&&void 0!==this.displayRows[e]?(this.displayRows[e]=t,o=!0):(this.displayRows.push(t),o=e=this.displayRows.length-1),e==this.displayRows.length-1&&(this.displayRowsCount=this.displayRows[this.displayRows.length-1].length),o},n.prototype.getDisplayRows=function(t){return void 0===t?this.displayRows.length?this.displayRows[this.displayRows.length-1]:[]:this.displayRows[t]||[]},n.prototype.displayRowIterator=function(t){this.displayRows.forEach(t),this.displayRowsCount=this.displayRows[this.displayRows.length-1].length},n.prototype.getRows=function(){return this.rows},n.prototype.reRenderInPosition=function(t){if("virtual"==this.getRenderMode()){for(var e=this.element.scrollTop,o=!1,i=!1,n=this.scrollLeft,s=this.getDisplayRows(),r=this.vDomTop;r<=this.vDomBottom;r++)if(s[r]){var a=e-s[r].getElement().offsetTop;if(!(!1===i||Math.abs(a)<i))break;i=a,o=r}t&&t(),this._virtualRenderFill(!1===o?this.displayRowsCount-1:o,!0,i||0),this.scrollHorizontal(n)}else this.renderTable()},n.prototype.setRenderMode=function(){(this.table.element.clientHeight||this.table.options.height)&&this.table.options.virtualDom?this.renderMode="virtual":this.renderMode="classic"},n.prototype.getRenderMode=function(){return this.renderMode},n.prototype.renderTable=function(){switch(this.table.options.renderStarted.call(this.table),this.element.scrollTop=0,this.renderMode){case"classic":this._simpleRender();break;case"virtual":this._virtualRenderFill();}this.firstRender&&(this.displayRowsCount?(this.firstRender=!1,this.table.modules.layout.layout()):this.renderEmptyScroll()),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout(),this.displayRowsCount||this.table.options.placeholder&&(this.renderMode&&this.table.options.placeholder.setAttribute("tabulator-render-mode",this.renderMode),this.getElement().appendChild(this.table.options.placeholder)),this.table.options.renderComplete.call(this.table)},n.prototype._simpleRender=function(){this._clearVirtualDom(),this.displayRowsCount?this.checkClassicModeGroupHeaderWidth():this.renderEmptyScroll()},n.prototype.checkClassicModeGroupHeaderWidth=function(){var t=this,e=this.tableElement,o=!0;t.getDisplayRows().forEach(function(i,n){t.styleRow(i,n),e.appendChild(i.getElement()),i.initialize(!0),"group"!==i.type&&(o=!1)}),e.style.minWidth=o?t.table.columnManager.getWidth()+"px":""},n.prototype.renderEmptyScroll=function(){this.tableElement.style.minWidth=this.table.columnManager.getWidth()+"px",this.tableElement.style.minHeight="1px",this.tableElement.style.visibility="hidden"},n.prototype._clearVirtualDom=function(){var t=this.tableElement;for(this.table.options.placeholder&&this.table.options.placeholder.parentNode&&this.table.options.placeholder.parentNode.removeChild(this.table.options.placeholder);t.firstChild;)t.removeChild(t.firstChild);t.style.paddingTop="",t.style.paddingBottom="",t.style.minWidth="",t.style.minHeight="",t.style.visibility="",this.scrollTop=0,this.scrollLeft=0,this.vDomTop=0,this.vDomBottom=0,this.vDomTopPad=0,this.vDomBottomPad=0},n.prototype.styleRow=function(t,e){var o=t.getElement();e%2?(o.classList.add("tabulator-row-even"),o.classList.remove("tabulator-row-odd")):(o.classList.add("tabulator-row-odd"),o.classList.remove("tabulator-row-even"))},n.prototype._virtualRenderFill=function(t,e,o){var i=this.tableElement,n=this.element,s=0,r=0,a=0,l=0,u=!0,d=this.getDisplayRows();if(o=o||0,t=t||0){for(;i.firstChild;)i.removeChild(i.firstChild);var h=(this.displayRowsCount-t+1)*this.vDomRowHeight;h<this.height&&(t-=Math.ceil((this.height-h)/this.vDomRowHeight))<0&&(t=0),t-=s=Math.min(Math.max(Math.floor(this.vDomWindowBuffer/this.vDomRowHeight),this.vDomWindowMinMarginRows),t)}else this._clearVirtualDom();if(this.displayRowsCount&&c.prototype.helpers.elVisible(this.element)){for(this.vDomTop=t,this.vDomBottom=t-1;(r<=this.height+this.vDomWindowBuffer||l<this.vDomWindowMinTotalRows)&&this.vDomBottom<this.displayRowsCount-1;){var p=this.vDomBottom+1,m=d[p];this.styleRow(m,p),i.appendChild(m.getElement()),m.initialized?m.heightInitialized||m.normalizeHeight(!0):m.initialize(!0),l<s?a+=m.getHeight():r+=m.getHeight(),"group"!==m.type&&(u=!1),this.vDomBottom++,l++}t?(this.vDomTopPad=e?this.vDomRowHeight*this.vDomTop+o:this.scrollTop-a,this.vDomBottomPad=this.vDomBottom==this.displayRowsCount-1?0:Math.max(this.vDomScrollHeight-this.vDomTopPad-r-a,0)):(this.vDomTopPad=0,this.vDomRowHeight=Math.floor((r+a)/l),this.vDomBottomPad=this.vDomRowHeight*(this.displayRowsCount-this.vDomBottom-1),this.vDomScrollHeight=a+r+this.vDomBottomPad-this.height),i.style.paddingTop=this.vDomTopPad+"px",i.style.paddingBottom=this.vDomBottomPad+"px",e&&(this.scrollTop=this.vDomTopPad+a+o-(this.element.scrollWidth>this.element.clientWidth?this.element.offsetHeight-this.element.clientHeight:0)),this.scrollTop=Math.min(this.scrollTop,this.element.scrollHeight-this.height),this.element.scrollWidth>this.element.offsetWidth&&e&&(this.scrollTop+=this.element.offsetHeight-this.element.clientHeight),this.vDomScrollPosTop=this.scrollTop,this.vDomScrollPosBottom=this.scrollTop,n.scrollTop=this.scrollTop,i.style.minWidth=u?this.table.columnManager.getWidth()+"px":"",this.table.options.groupBy&&"fitDataFill"!=this.table.modules.layout.getMode()&&this.displayRowsCount==this.table.modules.groupRows.countGroups()&&(this.tableElement.style.minWidth=this.table.columnManager.getWidth())}else this.renderEmptyScroll()},n.prototype.scrollVertical=function(t){var e=this.scrollTop-this.vDomScrollPosTop,o=this.scrollTop-this.vDomScrollPosBottom,i=2*this.vDomWindowBuffer;if(-e>i||o>i){var n=this.scrollLeft;this._virtualRenderFill(Math.floor(this.element.scrollTop/this.element.scrollHeight*this.displayRowsCount)),this.scrollHorizontal(n)}else t?(e<0&&this._addTopRow(-e),e<0&&this.vDomScrollHeight-this.scrollTop>this.vDomWindowBuffer&&this._removeBottomRow(-o)):(e>=0&&this.scrollTop>this.vDomWindowBuffer&&this._removeTopRow(e),o>=0&&this._addBottomRow(o))},n.prototype._addTopRow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomTop){var n=this.vDomTop-1,s=i[n],r=s.getHeight()||this.vDomRowHeight;t>=r&&(this.styleRow(s,n),o.insertBefore(s.getElement(),o.firstChild),s.initialized&&s.heightInitialized||(this.vDomTopNewRows.push(s),s.heightInitialized||s.clearCellHeight()),s.initialize(),this.vDomTopPad-=r,this.vDomTopPad<0&&(this.vDomTopPad=n*this.vDomRowHeight),n||(this.vDomTopPad=0),o.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop-=r,this.vDomTop--),t=-(this.scrollTop-this.vDomScrollPosTop),e<this.vDomMaxRenderChain&&this.vDomTop&&t>=(i[this.vDomTop-1].getHeight()||this.vDomRowHeight)?this._addTopRow(t,e+1):this._quickNormalizeRowHeight(this.vDomTopNewRows)}},n.prototype._removeTopRow=function(t){var e=this.tableElement,o=this.getDisplayRows()[this.vDomTop],i=o.getHeight()||this.vDomRowHeight;if(t>=i){var n=o.getElement();n.parentNode.removeChild(n),this.vDomTopPad+=i,e.style.paddingTop=this.vDomTopPad+"px",this.vDomScrollPosTop+=this.vDomTop?i:i+this.vDomWindowBuffer,this.vDomTop++,t=this.scrollTop-this.vDomScrollPosTop,this._removeTopRow(t)}},n.prototype._addBottomRow=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.tableElement,i=this.getDisplayRows();if(this.vDomBottom<this.displayRowsCount-1){var n=this.vDomBottom+1,s=i[n],r=s.getHeight()||this.vDomRowHeight;t>=r&&(this.styleRow(s,n),o.appendChild(s.getElement()),s.initialized&&s.heightInitialized||(this.vDomBottomNewRows.push(s),s.heightInitialized||s.clearCellHeight()),s.initialize(),this.vDomBottomPad-=r,(this.vDomBottomPad<0||n==this.displayRowsCount-1)&&(this.vDomBottomPad=0),o.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom+=r,this.vDomBottom++),t=this.scrollTop-this.vDomScrollPosBottom,e<this.vDomMaxRenderChain&&this.vDomBottom<this.displayRowsCount-1&&t>=(i[this.vDomBottom+1].getHeight()||this.vDomRowHeight)?this._addBottomRow(t,e+1):this._quickNormalizeRowHeight(this.vDomBottomNewRows)}},n.prototype._removeBottomRow=function(t){var e=this.tableElement,o=this.getDisplayRows()[this.vDomBottom],i=o.getHeight()||this.vDomRowHeight;if(t>=i){var n=o.getElement();n.parentNode&&n.parentNode.removeChild(n),this.vDomBottomPad+=i,this.vDomBottomPad<0&&(this.vDomBottomPad=0),e.style.paddingBottom=this.vDomBottomPad+"px",this.vDomScrollPosBottom-=i,this.vDomBottom--,t=-(this.scrollTop-this.vDomScrollPosBottom),this._removeBottomRow(t)}},n.prototype._quickNormalizeRowHeight=function(t){t.forEach(function(t){t.calcHeight()}),t.forEach(function(t){t.setCellHeight()}),t.length=0},n.prototype.normalizeHeight=function(){this.activeRows.forEach(function(t){t.normalizeHeight()})},n.prototype.adjustTableSize=function(){if("virtual"===this.renderMode){this.height=this.element.clientHeight,this.vDomWindowBuffer=this.table.options.virtualDomBuffer||this.height;var t=this.columnManager.getElement().offsetHeight+(this.table.footerManager&&!this.table.footerManager.external?this.table.footerManager.getElement().offsetHeight:0);this.element.style.minHeight="calc(100% - "+t+"px)",this.element.style.height="calc(100% - "+t+"px)",this.element.style.maxHeight="calc(100% - "+t+"px)"}},n.prototype.reinitialize=function(){this.rows.forEach(function(t){t.reinitialize()})},n.prototype.redraw=function(t){var e=this.scrollLeft;this.adjustTableSize(),t?this.renderTable():("classic"==self.renderMode?self.table.options.groupBy?self.refreshActiveData("group",!1,!1):this._simpleRender():(this.reRenderInPosition(),this.scrollHorizontal(e)),this.displayRowsCount||this.table.options.placeholder&&this.getElement().appendChild(this.table.options.placeholder))},n.prototype.resetScroll=function(){if(this.element.scrollLeft=0,this.element.scrollTop=0,"ie"===this.table.browser){var t=document.createEvent("Event");t.initEvent("scroll",!1,!0),this.element.dispatchEvent(t)}else this.element.dispatchEvent(new Event("scroll"))};var s=function(t){this._row=t};s.prototype.getData=function(t){return this._row.getData(t)},s.prototype.getElement=function(){return this._row.getElement()},s.prototype.getCells=function(){var t=[];return this._row.getCells().forEach(function(e){t.push(e.getComponent())}),t},s.prototype.getCell=function(t){var e=this._row.getCell(t);return!!e&&e.getComponent()},s.prototype.getIndex=function(){return this._row.getData("data")[this._row.table.options.index]},s.prototype.getPosition=function(t){return this._row.table.rowManager.getRowPosition(this._row,t)},s.prototype.delete=function(){return this._row.delete()},s.prototype.scrollTo=function(){return this._row.table.rowManager.scrollToRow(this._row)},s.prototype.update=function(t){return this._row.updateData(t)},s.prototype.normalizeHeight=function(){this._row.normalizeHeight(!0)},s.prototype.select=function(){this._row.table.modules.selectRow.selectRows(this._row)},s.prototype.deselect=function(){this._row.table.modules.selectRow.deselectRows(this._row)},s.prototype.toggleSelect=function(){this._row.table.modules.selectRow.toggleRow(this._row)},s.prototype.isSelected=function(){return this._row.table.modules.selectRow.isRowSelected(this._row)},s.prototype._getSelf=function(){return this._row},s.prototype.freeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.freezeRow(this._row)},s.prototype.unfreeze=function(){this._row.table.modExists("frozenRows",!0)&&this._row.table.modules.frozenRows.unfreezeRow(this._row)},s.prototype.treeCollapse=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.collapseRow(this._row)},s.prototype.treeExpand=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.expandRow(this._row)},s.prototype.treeToggle=function(){this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.toggleRow(this._row)},s.prototype.getTreeParent=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeParent(this._row)},s.prototype.getTreeChildren=function(){return!!this._row.table.modExists("dataTree",!0)&&this._row.table.modules.dataTree.getTreeChildren(this._row)},s.prototype.reformat=function(){return this._row.reinitialize()},s.prototype.getGroup=function(){return this._row.getGroup().getComponent()},s.prototype.getTable=function(){return this._row.table},s.prototype.getNextRow=function(){return this._row.nextRow()},s.prototype.getPrevRow=function(){return this._row.prevRow()};var r=function(t,e){this.table=e.table,this.parent=e,this.data={},this.type="row",this.element=this.createElement(),this.modules={},this.cells=[],this.height=0,this.outerHeight=0,this.initialized=!1,this.heightInitialized=!1,this.setData(t),this.generateElement()};r.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.setAttribute("role","row"),t},r.prototype.getElement=function(){return this.element},r.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},r.prototype.generateElement=function(){var t,e,o,i=this;!1!==i.table.options.selectable&&i.table.modExists("selectRow")&&i.table.modules.selectRow.initializeRow(this),!1!==i.table.options.movableRows&&i.table.modExists("moveRow")&&i.table.modules.moveRow.initializeRow(this),!1!==i.table.options.dataTree&&i.table.modExists("dataTree")&&i.table.modules.dataTree.initializeRow(this),i.table.options.rowClick&&i.element.addEventListener("click",function(t){i.table.options.rowClick(t,i.getComponent())}),i.table.options.rowDblClick&&i.element.addEventListener("dblclick",function(t){i.table.options.rowDblClick(t,i.getComponent())}),i.table.options.rowContext&&i.element.addEventListener("contextmenu",function(t){i.table.options.rowContext(t,i.getComponent())}),i.table.options.rowTap&&(o=!1,i.element.addEventListener("touchstart",function(t){o=!0}),i.element.addEventListener("touchend",function(t){o&&i.table.options.rowTap(t,i.getComponent()),o=!1})),i.table.options.rowDblTap&&(t=null,i.element.addEventListener("touchend",function(e){t?(clearTimeout(t),t=null,i.table.options.rowDblTap(e,i.getComponent())):t=setTimeout(function(){clearTimeout(t),t=null},300)})),i.table.options.rowTapHold&&(e=null,i.element.addEventListener("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,o=!1,i.table.options.rowTapHold(t,i.getComponent())},1e3)}),i.element.addEventListener("touchend",function(t){clearTimeout(e),e=null}))},r.prototype.generateCells=function(){this.cells=this.table.columnManager.generateCells(this)},r.prototype.initialize=function(t){var e=this;if(!e.initialized||t){for(e.deleteCells();e.element.firstChild;)e.element.removeChild(e.element.firstChild);this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutRow(this),this.generateCells(),e.cells.forEach(function(t){e.element.appendChild(t.getElement()),t.cellRendered()}),t&&e.normalizeHeight(),e.table.options.dataTree&&e.table.modExists("dataTree")&&e.table.modules.dataTree.layoutRow(this),"collapse"===e.table.options.responsiveLayout&&e.table.modExists("responsiveLayout")&&e.table.modules.responsiveLayout.layoutRow(this),e.table.options.rowFormatter&&e.table.options.rowFormatter(e.getComponent()),e.table.options.resizableRows&&e.table.modExists("resizeRows")&&e.table.modules.resizeRows.initializeRow(e),e.initialized=!0}},r.prototype.reinitializeHeight=function(){this.heightInitialized=!1,null!==this.element.offsetParent&&this.normalizeHeight(!0)},r.prototype.reinitialize=function(){this.initialized=!1,this.heightInitialized=!1,this.height=0,null!==this.element.offsetParent&&this.initialize(!0)},r.prototype.calcHeight=function(){var t=0,e=this.table.options.resizableRows?this.element.clientHeight:0;this.cells.forEach(function(e){var o=e.getHeight();o>t&&(t=o)}),this.height=Math.max(t,e),this.outerHeight=this.element.offsetHeight},r.prototype.setCellHeight=function(){var t=this.height;this.cells.forEach(function(e){e.setHeight(t)}),this.heightInitialized=!0},r.prototype.clearCellHeight=function(){this.cells.forEach(function(t){t.clearHeight()})},r.prototype.normalizeHeight=function(t){t&&this.clearCellHeight(),this.calcHeight(),this.setCellHeight()},r.prototype.setHeight=function(t){this.height=t,this.setCellHeight()},r.prototype.setHeight=function(t,e){(this.height!=t||e)&&(this.height=t,this.setCellHeight(),this.outerHeight=this.element.offsetHeight)},r.prototype.getHeight=function(){return this.outerHeight},r.prototype.getWidth=function(){return this.element.offsetWidth},r.prototype.deleteCell=function(t){var e=this.cells.indexOf(t);e>-1&&this.cells.splice(e,1)},r.prototype.setData=function(t){this.table.modExists("mutator")?this.data=this.table.modules.mutator.transformRow(t,"data"):this.data=t},r.prototype.updateData=function(t){var e=this,o=this,i=c.prototype.helpers.elVisible(this.element);return new Promise(function(n,s){for(var r in"string"==typeof t&&(t=JSON.parse(t)),o.table.modExists("mutator")&&(t=o.table.modules.mutator.transformRow(t,"data",!0)),t)o.data[r]=t[r];for(var r in t){var a=e.getCell(r);a&&a.getValue()!=t[r]&&(a.setValueProcessData(t[r]),i&&a.cellRendered())}i?(o.normalizeHeight(),o.table.options.rowFormatter&&o.table.options.rowFormatter(o.getComponent())):(e.initialized=!1,e.height=0),o.table.options.rowUpdated.call(e.table,o.getComponent()),n()})},r.prototype.getData=function(t){return t?this.table.modExists("accessor")?this.table.modules.accessor.transformRow(this.data,t):void 0:this.data},r.prototype.getCell=function(t){return t=this.table.columnManager.findColumn(t),this.cells.find(function(e){return e.column===t})},r.prototype.getCellIndex=function(t){return this.cells.findIndex(function(e){return e===t})},r.prototype.findNextEditableCell=function(t){var e=!1;if(t<this.cells.length-1)for(var o=t+1;o<this.cells.length;o++){var i=this.cells[o];if(i.column.modules.edit&&c.prototype.helpers.elVisible(i.getElement())){var n=!0;if("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n){e=i;break}}}return e},r.prototype.findPrevEditableCell=function(t){var e=!1;if(t>0)for(var o=t-1;o>=0;o--){var i=this.cells[o],n=!0;if(i.column.modules.edit&&c.prototype.helpers.elVisible(i.getElement())&&("function"==typeof i.column.modules.edit.check&&(n=i.column.modules.edit.check(i.getComponent())),n)){e=i;break}}return e},r.prototype.getCells=function(){return this.cells},r.prototype.nextRow=function(){var t=this.table.rowManager.nextDisplayRow(this,!0);return!!t&&t.getComponent()},r.prototype.prevRow=function(){var t=this.table.rowManager.prevDisplayRow(this,!0);return!!t&&t.getComponent()},r.prototype.delete=function(){var t=this;return new Promise(function(e,o){var i=t.table.rowManager.getRowIndex(t);t.deleteActual(),t.table.options.history&&t.table.modExists("history")&&(i&&(i=t.table.rowManager.rows[i-1]),t.table.modules.history.action("rowDelete",t,{data:t.getData(),pos:!i,index:i})),e()})},r.prototype.deleteActual=function(){this.table.rowManager.getRowIndex(this);this.table.modExists("selectRow")&&this.table.modules.selectRow._deselectRow(this,!0),this.table.rowManager.deleteRow(this),this.deleteCells(),this.initialized=!1,this.heightInitialized=!1,this.modules.group&&this.modules.group.removeRow(this),this.table.modExists("columnCalcs")&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},r.prototype.deleteCells=function(){for(var t=this.cells.length,e=0;e<t;e++)this.cells[0].delete()},r.prototype.wipe=function(){for(this.deleteCells();this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.parentNode&&this.element.parentNode.removeChild(this.element)},r.prototype.getGroup=function(){return this.modules.group||!1},r.prototype.getComponent=function(){return new s(this)};var a=function(t){this._cell=t};a.prototype.getValue=function(){return this._cell.getValue()},a.prototype.getOldValue=function(){return this._cell.getOldValue()},a.prototype.getElement=function(){return this._cell.getElement()},a.prototype.getRow=function(){return this._cell.row.getComponent()},a.prototype.getData=function(){return this._cell.row.getData()},a.prototype.getField=function(){return this._cell.column.getField()},a.prototype.getColumn=function(){return this._cell.column.getComponent()},a.prototype.setValue=function(t,e){void 0===e&&(e=!0),this._cell.setValue(t,e)},a.prototype.restoreOldValue=function(){this._cell.setValueActual(this._cell.getOldValue())},a.prototype.edit=function(t){return this._cell.edit(t)},a.prototype.cancelEdit=function(){this._cell.cancelEdit()},a.prototype.nav=function(){return this._cell.nav()},a.prototype.checkHeight=function(){this._cell.checkHeight()},a.prototype.getTable=function(){return this._cell.table},a.prototype._getSelf=function(){return this._cell};var l=function(t,e){this.table=t.table,this.column=t,this.row=e,this.element=null,this.value=null,this.oldValue=null,this.height=null,this.width=null,this.minWidth=null,this.build()};l.prototype.build=function(){this.generateElement(),this.setWidth(this.column.width),this._configureCell(),this.setValueActual(this.column.getFieldValue(this.row.data))},l.prototype.generateElement=function(){this.element=document.createElement("div"),this.element.className="tabulator-cell",this.element.setAttribute("role","gridcell"),this.element=this.element},l.prototype._configureCell=function(){var t,e,o,i=this,n=i.column.cellEvents,s=i.element,r=this.column.getField();(s.style.textAlign=i.column.hozAlign,r&&s.setAttribute("tabulator-field",r),i.column.definition.cssClass)&&i.column.definition.cssClass.split(" ").forEach(function(t){s.classList.add(t)});(n.cellClick||i.table.options.cellClick)&&i.element.addEventListener("click",function(t){var e=i.getComponent();n.cellClick&&n.cellClick.call(i.table,t,e),i.table.options.cellClick&&i.table.options.cellClick.call(i.table,t,e)}),(n.cellDblClick||this.table.options.cellDblClick)&&s.addEventListener("dblclick",function(t){var e=i.getComponent();n.cellDblClick&&n.cellDblClick.call(i.table,t,e),i.table.options.cellDblClick&&i.table.options.cellDblClick.call(i.table,t,e)}),(n.cellContext||this.table.options.cellContext)&&s.addEventListener("contextmenu",function(t){var e=i.getComponent();n.cellContext&&n.cellContext.call(i.table,t,e),i.table.options.cellContext&&i.table.options.cellContext.call(i.table,t,e)}),"hover"===this.table.options.tooltipGenerationMode&&s.addEventListener("mouseenter",function(t){i._generateTooltip()}),(n.cellTap||this.table.options.cellTap)&&(o=!1,s.addEventListener("touchstart",function(t){o=!0}),s.addEventListener("touchend",function(t){if(o){var e=i.getComponent();n.cellTap&&n.cellTap.call(i.table,t,e),i.table.options.cellTap&&i.table.options.cellTap.call(i.table,t,e)}o=!1})),(n.cellDblTap||this.table.options.cellDblTap)&&(t=null,s.addEventListener("touchend",function(e){if(t){clearTimeout(t),t=null;var o=i.getComponent();n.cellDblTap&&n.cellDblTap.call(i.table,e,o),i.table.options.cellDblTap&&i.table.options.cellDblTap.call(i.table,e,o)}else t=setTimeout(function(){clearTimeout(t),t=null},300)})),(n.cellTapHold||this.table.options.cellTapHold)&&(e=null,s.addEventListener("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,o=!1;var s=i.getComponent();n.cellTapHold&&n.cellTapHold.call(i.table,t,s),i.table.options.cellTapHold&&i.table.options.cellTapHold.call(i.table,t,s)},1e3)}),s.addEventListener("touchend",function(t){clearTimeout(e),e=null})),i.column.modules.edit&&i.table.modules.edit.bindEditor(i),i.column.definition.rowHandle&&!1!==i.table.options.movableRows&&i.table.modExists("moveRow")&&i.table.modules.moveRow.initializeCell(i),i.column.visible||i.hide()},l.prototype._generateContents=function(){var t;switch(void 0===(t=this.table.modExists("format")?this.table.modules.format.formatValue(this):this.element.innerHTML=this.value)?"undefined":q(t)){case"object":if(t instanceof Node){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(t)}else this.element.innerHTML="",null!=t&&console.warn("Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:",t);break;case"undefined":case"null":this.element.innerHTML="";break;default:this.element.innerHTML=t;}},l.prototype.cellRendered=function(){this.table.modExists("format")&&this.table.modules.format.cellRendered&&this.table.modules.format.cellRendered(this)},l.prototype._generateTooltip=function(){var t=this.column.tooltip;t?(!0===t?t=this.value:"function"==typeof t&&!1===(t=t(this.getComponent()))&&(t=""),void 0===t&&(t=""),this.element.setAttribute("title",t)):this.element.setAttribute("title","")},l.prototype.getElement=function(){return this.element},l.prototype.getValue=function(){return this.value},l.prototype.getOldValue=function(){return this.oldValue},l.prototype.setValue=function(t,e){var o;this.setValueProcessData(t,e)&&(this.table.options.history&&this.table.modExists("history")&&this.table.modules.history.action("cellEdit",this,{oldValue:this.oldValue,newValue:this.value}),o=this.getComponent(),this.column.cellEvents.cellEdited&&this.column.cellEvents.cellEdited.call(this.table,o),this.table.options.cellEdited.call(this.table,o),this.table.options.dataEdited.call(this.table,this.table.rowManager.getData())),this.table.modExists("columnCalcs")&&(this.column.definition.topCalc||this.column.definition.bottomCalc)&&(this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.columnCalcs.recalcRowGroup(this.row):this.table.modules.columnCalcs.recalc(this.table.rowManager.activeRows))},l.prototype.setValueProcessData=function(t,e){var o=!1;return this.value!=t&&(o=!0,e&&this.column.modules.mutate&&(t=this.table.modules.mutator.transformCell(this,t))),this.setValueActual(t),o},l.prototype.setValueActual=function(t){this.oldValue=this.value,this.value=t,this.column.setFieldValue(this.row.data,t),this._generateContents(),this._generateTooltip(),this.table.options.resizableColumns&&this.table.modExists("resizeColumns")&&this.table.modules.resizeColumns.initializeColumn("cell",this.column,this.element),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layoutElement(this.element,this.column)},l.prototype.setWidth=function(t){this.width=t,this.element.style.width=t?t+"px":""},l.prototype.getWidth=function(){return this.width||this.element.offsetWidth},l.prototype.setMinWidth=function(t){this.minWidth=t,this.element.style.minWidth=t?t+"px":""},l.prototype.checkHeight=function(){this.row.reinitializeHeight()},l.prototype.clearHeight=function(){this.element.style.height="",this.height=null},l.prototype.setHeight=function(t){this.height=t,this.element.style.height=t?t+"px":""},l.prototype.getHeight=function(){return this.height||this.element.offsetHeight},l.prototype.show=function(){this.element.style.display=""},l.prototype.hide=function(){this.element.style.display="none"},l.prototype.edit=function(t){if(this.table.modExists("edit",!0))return this.table.modules.edit.editCell(this,t)},l.prototype.cancelEdit=function(){if(this.table.modExists("edit",!0)){var t=this.table.modules.edit.getCurrentCell();t&&t._getSelf()===this?this.table.modules.edit.cancelEdit():console.warn("Cancel Editor Error - This cell is not currently being edited ")}},l.prototype.delete=function(){this.element.parentNode.removeChild(this.element),this.column.deleteCell(this),this.row.deleteCell(this)},l.prototype.nav=function(){var t=this,e=!1,o=this.row.getCellIndex(this);return{next:function(){var e,o=this.right();return!!o||!(!(e=t.table.rowManager.nextDisplayRow(t.row,!0))||!(o=e.findNextEditableCell(-1)))&&(o.edit(),!0)},prev:function(){var e,o=this.left();return!!o||!(!(e=t.table.rowManager.prevDisplayRow(t.row,!0))||!(o=e.findPrevEditableCell(e.cells.length)))&&(o.edit(),!0)},left:function(){return!!(e=t.row.findPrevEditableCell(o))&&(e.edit(),!0)},right:function(){return!!(e=t.row.findNextEditableCell(o))&&(e.edit(),!0)},up:function(){var e=t.table.rowManager.prevDisplayRow(t.row,!0);e&&e.cells[o].edit()},down:function(){var e=t.table.rowManager.nextDisplayRow(t.row,!0);e&&e.cells[o].edit()}}},l.prototype.getIndex=function(){this.row.getCellIndex(this)},l.prototype.getComponent=function(){return new a(this)};var u=function(t){this.table=t,this.active=!1,this.element=this.createElement(),this.external=!1,this.links=[],this._initialize()};u.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-footer"),t},u.prototype._initialize=function(t){if(this.table.options.footerElement)switch(q(this.table.options.footerElement)){case"string":"<"===this.table.options.footerElement[0]?this.element.innerHTML=this.table.options.footerElement:(this.external=!0,this.element=document.querySelector(this.table.options.footerElement));break;default:this.element=this.table.options.footerElement;}},u.prototype.getElement=function(){return this.element},u.prototype.append=function(t,e){this.activate(e),this.element.appendChild(t),this.table.rowManager.adjustTableSize()},u.prototype.prepend=function(t,e){this.activate(e),this.element.insertBefore(t,this.element.firstChild),this.table.rowManager.adjustTableSize()},u.prototype.remove=function(t){t.parentNode.removeChild(t),this.deactivate()},u.prototype.deactivate=function(t){this.element.firstChild&&!t||(this.external||this.element.parentNode.removeChild(this.element),this.active=!1)},u.prototype.activate=function(t){this.active||(this.active=!0,this.external||(this.table.element.appendChild(this.getElement()),this.table.element.style.display="")),t&&this.links.push(t)},u.prototype.redraw=function(){this.links.forEach(function(t){t.footerRedraw()})};var c=function t(e,o){this.options={},this.columnManager=null,this.rowManager=null,this.footerManager=null,this.browser="",this.browserSlow=!1,this.modules={},this.initializeElement(e),this.initializeOptions(o||{}),this._create(),t.prototype.comms.register(this)};c.prototype.defaultOptions={height:!1,layout:"fitData",layoutColumnsOnNewData:!1,columnMinWidth:40,columnVertAlign:"top",resizableColumns:!0,resizableRows:!1,autoResize:!0,columns:[],data:[],nestedFieldSeparator:".",tooltips:!1,tooltipsHeader:!1,tooltipGenerationMode:"load",initialSort:!1,initialFilter:!1,columnHeaderSortMulti:!0,sortOrderReverse:!1,footerElement:!1,index:"id",keybindings:[],clipboard:!1,clipboardCopyStyled:!0,clipboardCopySelector:"active",clipboardCopyFormatter:"table",clipboardPasteParser:"table",clipboardPasteAction:"insert",clipboardCopyConfig:!1,clipboardCopied:function(){},clipboardPasted:function(){},clipboardPasteError:function(){},downloadDataFormatter:!1,downloadReady:function(t,e){return e},downloadComplete:!1,downloadConfig:!1,dataTree:!1,dataTreeBranchElement:!0,dataTreeChildIndent:9,dataTreeChildField:"_children",dataTreeCollapseElement:!1,dataTreeExpandElement:!1,dataTreeStartExpanded:!1,dataTreeRowExpanded:function(){},dataTreeRowCollapsed:function(){},addRowPos:"bottom",selectable:"highlight",selectableRangeMode:"drag",selectableRollingSelection:!0,selectablePersistence:!0,selectableCheck:function(t,e){return!0},headerFilterPlaceholder:!1,history:!1,locale:!1,langs:{},virtualDom:!0,persistentLayout:!1,persistentSort:!1,persistentFilter:!1,persistenceID:"",persistenceMode:!0,responsiveLayout:!1,responsiveLayoutCollapseStartOpen:!0,responsiveLayoutCollapseUseFormatters:!0,responsiveLayoutCollapseFormatter:!1,pagination:!1,paginationSize:!1,paginationButtonCount:5,paginationElement:!1,paginationDataSent:{},paginationDataReceived:{},paginationAddRow:"page",ajaxURL:!1,ajaxURLGenerator:!1,ajaxParams:{},ajaxConfig:"get",ajaxContentType:"form",ajaxRequestFunc:!1,ajaxLoader:!0,ajaxLoaderLoading:!1,ajaxLoaderError:!1,ajaxFiltering:!1,ajaxSorting:!1,ajaxProgressiveLoad:!1,ajaxProgressiveLoadDelay:0,ajaxProgressiveLoadScrollMargin:0,groupBy:!1,groupStartOpen:!0,groupValues:!1,groupHeader:!1,movableColumns:!1,movableRows:!1,movableRowsConnectedTables:!1,movableRowsSender:!1,movableRowsReceiver:"insert",movableRowsSendingStart:function(){},movableRowsSent:function(){},movableRowsSentFailed:function(){},movableRowsSendingStop:function(){},movableRowsReceivingStart:function(){},movableRowsReceived:function(){},movableRowsReceivedFailed:function(){},movableRowsReceivingStop:function(){},scrollToRowPosition:"top",scrollToRowIfVisible:!0,scrollToColumnPosition:"left",scrollToColumnIfVisible:!0,rowFormatter:!1,placeholder:!1,tableBuilding:function(){},tableBuilt:function(){},renderStarted:function(){},renderComplete:function(){},rowClick:!1,rowDblClick:!1,rowContext:!1,rowTap:!1,rowDblTap:!1,rowTapHold:!1,rowAdded:function(){},rowDeleted:function(){},rowMoved:function(){},rowUpdated:function(){},rowSelectionChanged:function(){},rowSelected:function(){},rowDeselected:function(){},rowResized:function(){},cellClick:!1,cellDblClick:!1,cellContext:!1,cellTap:!1,cellDblTap:!1,cellTapHold:!1,cellEditing:function(){},cellEdited:function(){},cellEditCancelled:function(){},columnMoved:!1,columnResized:function(){},columnTitleChanged:function(){},columnVisibilityChanged:function(){},htmlImporting:function(){},htmlImported:function(){},dataLoading:function(){},dataLoaded:function(){},dataEdited:function(){},ajaxRequesting:function(){},ajaxResponse:!1,ajaxError:function(){},dataFiltering:!1,dataFiltered:!1,dataSorting:function(){},dataSorted:function(){},groupToggleElement:"arrow",groupClosedShowCalcs:!1,dataGrouping:function(){},dataGrouped:!1,groupVisibilityChanged:function(){},groupClick:!1,groupDblClick:!1,groupContext:!1,groupTap:!1,groupDblTap:!1,groupTapHold:!1,columnCalcs:!0,pageLoaded:function(){},localized:function(){},validationFailed:function(){},historyUndo:function(){},historyRedo:function(){}},c.prototype.initializeOptions=function(t){for(var e in this.defaultOptions)e in t?this.options[e]=t[e]:Array.isArray(this.defaultOptions[e])?this.options[e]=[]:"object"===q(this.defaultOptions[e])?this.options[e]={}:this.options[e]=this.defaultOptions[e]},c.prototype.initializeElement=function(t){return t instanceof HTMLElement?(this.element=t,!0):"string"==typeof t?(this.element=document.querySelector(t),!!this.element||(console.error("Tabulator Creation Error - no element found matching selector: ",t),!1)):(console.error("Tabulator Creation Error - Invalid element provided:",t),!1)},c.prototype._mapDepricatedFunctionality=function(){},c.prototype._create=function(){this._clearObjectPointers(),this._mapDepricatedFunctionality(),this.bindModules(),"TABLE"===this.element.tagName&&this.modExists("htmlTableImport",!0)&&this.modules.htmlTableImport.parseTable(),this.columnManager=new t(this),this.rowManager=new n(this),this.footerManager=new u(this),this.columnManager.setRowManager(this.rowManager),this.rowManager.setColumnManager(this.columnManager),this._buildElement(),this._loadInitialData()},c.prototype._clearObjectPointers=function(){this.options.columns=this.options.columns.slice(0),this.options.data=this.options.data.slice(0)},c.prototype._buildElement=function(){var t=this.element,e=this.modules,o=this.options;for(o.tableBuilding.call(this),t.classList.add("tabulator"),t.setAttribute("role","grid");t.firstChild;)t.removeChild(t.firstChild);for(var i in o.height&&(o.height=isNaN(o.height)?o.height:o.height+"px",t.style.height=o.height),this.rowManager.initialize(),this._detectBrowser(),this.modExists("layout",!0)&&e.layout.initialize(o.layout),!1!==o.headerFilterPlaceholder&&e.localize.setHeaderFilterPlaceholder(o.headerFilterPlaceholder),o.langs)e.localize.installLang(i,o.langs[i]);if(e.localize.setLocale(o.locale),"string"==typeof o.placeholder){var n=document.createElement("div");n.classList.add("tabulator-placeholder");var s=document.createElement("span");s.innerHTML=o.placeholder,n.appendChild(s),o.placeholder=n}if(t.appendChild(this.columnManager.getElement()),t.appendChild(this.rowManager.getElement()),o.footerElement&&this.footerManager.activate(),o.dataTree&&this.modExists("dataTree",!0)&&e.dataTree.initialize(),(o.persistentLayout||o.persistentSort||o.persistentFilter)&&this.modExists("persistence",!0)&&e.persistence.initialize(o.persistenceMode,o.persistenceID),o.persistentLayout&&this.modExists("persistence",!0)&&(o.columns=e.persistence.load("columns",o.columns)),o.movableRows&&this.modExists("moveRow")&&e.moveRow.initialize(),this.modExists("columnCalcs")&&e.columnCalcs.initialize(),this.columnManager.setColumns(o.columns),this.modExists("frozenRows")&&this.modules.frozenRows.initialize(),(o.persistentSort||o.initialSort)&&this.modExists("sort",!0)){var r=[];o.persistentSort&&this.modExists("persistence",!0)?!1===(r=e.persistence.load("sort"))&&o.initialSort&&(r=o.initialSort):o.initialSort&&(r=o.initialSort),e.sort.setSort(r)}if((o.persistentFilter||o.initialFilter)&&this.modExists("filter",!0)){var a=[];o.persistentFilter&&this.modExists("persistence",!0)?!1===(a=e.persistence.load("filter"))&&o.initialFilter&&(a=o.initialFilter):o.initialFilter&&(a=o.initialFilter),e.filter.setFilter(a)}this.modExists("ajax")&&e.ajax.initialize(),o.pagination&&this.modExists("page",!0)&&e.page.initialize(),o.groupBy&&this.modExists("groupRows",!0)&&e.groupRows.initialize(),this.modExists("keybindings")&&e.keybindings.initialize(),this.modExists("selectRow")&&e.selectRow.clearSelectionData(!0),o.autoResize&&this.modExists("resizeTable")&&e.resizeTable.initialize(),this.modExists("clipboard")&&e.clipboard.initialize(),o.tableBuilt.call(this)},c.prototype._loadInitialData=function(){this.options.pagination&&this.modExists("page")?(this.modules.page.reset(!0),"local"==this.options.pagination?this.options.data.length?this.rowManager.setData(this.options.data):(this.options.ajaxURL||this.options.ajaxURLGenerator)&&this.modExists("ajax")?this.modules.ajax.loadData().then(function(){}).catch(function(){}):this.rowManager.setData(this.options.data):this.options.ajaxURL?this.modules.page.setPage(1).then(function(){}).catch(function(){}):this.rowManager.setData([])):this.options.data.length?this.rowManager.setData(this.options.data):(this.options.ajaxURL||this.options.ajaxURLGenerator)&&this.modExists("ajax")?this.modules.ajax.loadData().then(function(){}).catch(function(){}):this.rowManager.setData(this.options.data)},c.prototype.destroy=function(){var t=this.element;for(c.prototype.comms.deregister(this),this.rowManager.rows.forEach(function(t){t.wipe()}),this.rowManager.rows=[],this.rowManager.activeRows=[],this.rowManager.displayRows=[],this.options.autoResize&&this.modExists("resizeTable")&&this.modules.resizeTable.clearBindings(),this.modExists("keybindings")&&this.modules.keybindings.clearBindings();t.firstChild;)t.removeChild(t.firstChild);t.classList.remove("tabulator")},c.prototype._detectBrowser=function(){var t=navigator.userAgent;t.indexOf("Trident")>-1?(this.browser="ie",this.browserSlow=!0):t.indexOf("Edge")>-1?(this.browser="edge",this.browserSlow=!0):t.indexOf("Firefox")>-1?(this.browser="firefox",this.browserSlow=!1):(this.browser="other",this.browserSlow=!1)},c.prototype.setData=function(t,e,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,o)},c.prototype._setData=function(t,e,o,i){return"string"!=typeof t?t?this.rowManager.setData(t,i):this.modExists("ajax")&&(this.modules.ajax.getUrl||this.options.ajaxURLGenerator)?"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i):this.rowManager.setData([],i):0==t.indexOf("{")||0==t.indexOf("[")?this.rowManager.setData(JSON.parse(t),i):this.modExists("ajax",!0)?(e&&this.modules.ajax.setParams(e),o&&this.modules.ajax.setConfig(o),this.modules.ajax.setUrl(t),"remote"==this.options.pagination&&this.modExists("page",!0)?(this.modules.page.reset(!0),this.modules.page.setPage(1)):this.modules.ajax.loadData(i)):void 0},c.prototype.clearData=function(){this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this.rowManager.clearData()},c.prototype.getData=function(t){return this.rowManager.getData(t)},c.prototype.getDataCount=function(t){return this.rowManager.getDataCount(t)},c.prototype.searchRows=function(t,e,o){if(this.modExists("filter",!0))return this.modules.filter.search("rows",t,e,o)},c.prototype.searchData=function(t,e,o){if(this.modExists("filter",!0))return this.modules.filter.search("data",t,e,o)},c.prototype.getHtml=function(t){return this.rowManager.getHtml(t)},c.prototype.getAjaxUrl=function(){if(this.modExists("ajax",!0))return this.modules.ajax.getUrl()},c.prototype.replaceData=function(t,e,o){return this.modExists("ajax")&&this.modules.ajax.blockActiveRequest(),this._setData(t,e,o,!0)},c.prototype.updateData=function(t){var e=this,o=this,i=0;return new Promise(function(n,s){e.modExists("ajax")&&e.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach(function(t){var e=o.rowManager.findRow(t[o.options.index]);e&&(i++,e.updateData(t).then(function(){--i||n()}))}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})},c.prototype.addData=function(t,e,o){var i=this;return new Promise(function(n,s){i.modExists("ajax")&&i.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?i.rowManager.addRows(t,e,o).then(function(t){var e=[];t.forEach(function(t){e.push(t.getComponent())}),n(e)}):(console.warn("Update Error - No data provided"),s("Update Error - No data provided"))})},c.prototype.updateOrAddData=function(t){var e=this,o=this,i=[],n=0;return new Promise(function(s,r){e.modExists("ajax")&&e.modules.ajax.blockActiveRequest(),"string"==typeof t&&(t=JSON.parse(t)),t?t.forEach(function(t){var e=o.rowManager.findRow(t[o.options.index]);n++,e?e.updateData(t).then(function(){n--,i.push(e.getComponent()),n||s(i)}):o.rowManager.addRows(t).then(function(t){n--,i.push(t[0].getComponent()),n||s(i)})}):(console.warn("Update Error - No data provided"),r("Update Error - No data provided"))})},c.prototype.getRow=function(t){var e=this.rowManager.findRow(t);return e?e.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},c.prototype.getRowFromPosition=function(t,e){var o=this.rowManager.getRowFromPosition(t,e);return o?o.getComponent():(console.warn("Find Error - No matching row found:",t),!1)},c.prototype.deleteRow=function(t){var e=this;return new Promise(function(o,i){var n=e.rowManager.findRow(t);n?n.delete().then(function(){o()}).catch(function(t){i(t)}):(console.warn("Delete Error - No matching row found:",t),i("Delete Error - No matching row found"))})},c.prototype.addRow=function(t,e,o){var i=this;return new Promise(function(n,s){"string"==typeof t&&(t=JSON.parse(t)),i.rowManager.addRows(t,e,o).then(function(t){i.modExists("columnCalcs")&&i.modules.columnCalcs.recalc(i.rowManager.activeRows),n(t[0].getComponent())})})},c.prototype.updateOrAddRow=function(t,e){var o=this;return new Promise(function(i,n){var s=o.rowManager.findRow(t);"string"==typeof e&&(e=JSON.parse(e)),s?s.updateData(e).then(function(){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(s.getComponent())}).catch(function(t){n(t)}):s=o.rowManager.addRows(e).then(function(t){o.modExists("columnCalcs")&&o.modules.columnCalcs.recalc(o.rowManager.activeRows),i(t[0].getComponent())}).catch(function(t){n(t)})})},c.prototype.updateRow=function(t,e){var o=this;return new Promise(function(i,n){var s=o.rowManager.findRow(t);"string"==typeof e&&(e=JSON.parse(e)),s?s.updateData(e).then(function(){i(s.getComponent())}).catch(function(t){n(t)}):(console.warn("Update Error - No matching row found:",t),n("Update Error - No matching row found"))})},c.prototype.scrollToRow=function(t,e,o){var i=this;return new Promise(function(n,s){var r=i.rowManager.findRow(t);r?i.rowManager.scrollToRow(r,e,o).then(function(){n()}).catch(function(t){s(t)}):(console.warn("Scroll Error - No matching row found:",t),s("Scroll Error - No matching row found"))})},c.prototype.getRows=function(t){return this.rowManager.getComponents(t)},c.prototype.getRowPosition=function(t,e){var o=this.rowManager.findRow(t);return o?this.rowManager.getRowPosition(o,e):(console.warn("Position Error - No matching row found:",t),!1)},c.prototype.copyToClipboard=function(t,e,o,i){this.modExists("clipboard",!0)&&this.modules.clipboard.copy(t,e,o,i)},c.prototype.setColumns=function(t){this.columnManager.setColumns(t)},c.prototype.getColumns=function(t){return this.columnManager.getComponents(t)},c.prototype.getColumn=function(t){var e=this.columnManager.findColumn(t);return e?e.getComponent():(console.warn("Find Error - No matching column found:",t),!1)},c.prototype.getColumnDefinitions=function(){return this.columnManager.getDefinitionTree()},c.prototype.getColumnLayout=function(){if(this.modExists("persistence",!0))return this.modules.persistence.parseColumns(this.columnManager.getColumns())},c.prototype.setColumnLayout=function(t){return!!this.modExists("persistence",!0)&&(this.columnManager.setColumns(this.modules.persistence.mergeDefinition(this.options.columns,t)),!0)},c.prototype.showColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Show Error - No matching column found:",t),!1;e.show(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},c.prototype.hideColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Hide Error - No matching column found:",t),!1;e.hide(),this.options.responsiveLayout&&this.modExists("responsiveLayout",!0)&&this.modules.responsiveLayout.update()},c.prototype.toggleColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Visibility Toggle Error - No matching column found:",t),!1;e.visible?e.hide():e.show()},c.prototype.addColumn=function(t,e,o){var i=this.columnManager.findColumn(o);this.columnManager.addColumn(t,e,i)},c.prototype.deleteColumn=function(t){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Delete Error - No matching column found:",t),!1;e.delete()},c.prototype.scrollToColumn=function(t,e,o){var i=this;return new Promise(function(n,s){var r=i.columnManager.findColumn(t);r?i.columnManager.scrollToColumn(r,e,o).then(function(){n()}).catch(function(t){s(t)}):(console.warn("Scroll Error - No matching column found:",t),s("Scroll Error - No matching column found"))})},c.prototype.setLocale=function(t){this.modules.localize.setLocale(t)},c.prototype.getLocale=function(){return this.modules.localize.getLocale()},c.prototype.getLang=function(t){return this.modules.localize.getLang(t)},c.prototype.redraw=function(t){this.columnManager.redraw(t),this.rowManager.redraw(t)},c.prototype.setHeight=function(t){this.options.height=isNaN(t)?t:t+"px",this.element.style.height=this.options.height,this.rowManager.redraw()},c.prototype.setSort=function(t,e){this.modExists("sort",!0)&&(this.modules.sort.setSort(t,e),this.rowManager.sorterRefresh())},c.prototype.getSorters=function(){if(this.modExists("sort",!0))return this.modules.sort.getSort()},c.prototype.clearSort=function(){this.modExists("sort",!0)&&(this.modules.sort.clear(),this.rowManager.sorterRefresh())},c.prototype.setFilter=function(t,e,o){this.modExists("filter",!0)&&(this.modules.filter.setFilter(t,e,o),this.rowManager.filterRefresh())},c.prototype.addFilter=function(t,e,o){this.modExists("filter",!0)&&(this.modules.filter.addFilter(t,e,o),this.rowManager.filterRefresh())},c.prototype.getFilters=function(t){if(this.modExists("filter",!0))return this.modules.filter.getFilters(t)},c.prototype.setHeaderFilterFocus=function(t){if(this.modExists("filter",!0)){var e=this.columnManager.findColumn(t);if(!e)return console.warn("Column Filter Focus Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterFocus(e)}},c.prototype.setHeaderFilterValue=function(t,e){if(this.modExists("filter",!0)){var o=this.columnManager.findColumn(t);if(!o)return console.warn("Column Filter Error - No matching column found:",t),!1;this.modules.filter.setHeaderFilterValue(o,e)}},c.prototype.getHeaderFilters=function(){if(this.modExists("filter",!0))return this.modules.filter.getHeaderFilters()},c.prototype.removeFilter=function(t,e,o){this.modExists("filter",!0)&&(this.modules.filter.removeFilter(t,e,o),this.rowManager.filterRefresh())},c.prototype.clearFilter=function(t){this.modExists("filter",!0)&&(this.modules.filter.clearFilter(t),this.rowManager.filterRefresh())},c.prototype.clearHeaderFilter=function(){this.modExists("filter",!0)&&(this.modules.filter.clearHeaderFilter(),this.rowManager.filterRefresh())},c.prototype.selectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.selectRows(t)},c.prototype.deselectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.deselectRows(t)},c.prototype.toggleSelectRow=function(t){this.modExists("selectRow",!0)&&this.modules.selectRow.toggleRow(t)},c.prototype.getSelectedRows=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedRows()},c.prototype.getSelectedData=function(){if(this.modExists("selectRow",!0))return this.modules.selectRow.getSelectedData()},c.prototype.setMaxPage=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setMaxPage(t)},c.prototype.setPage=function(t){return this.options.pagination&&this.modExists("page")?this.modules.page.setPage(t):new Promise(function(t,e){e()})},c.prototype.setPageSize=function(t){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.setPageSize(t),this.modules.page.setPage(1).then(function(){}).catch(function(){})},c.prototype.getPageSize=function(){if(this.options.pagination&&this.modExists("page",!0))return this.modules.page.getPageSize()},c.prototype.previousPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.previousPage()},c.prototype.nextPage=function(){if(!this.options.pagination||!this.modExists("page"))return!1;this.modules.page.nextPage()},c.prototype.getPage=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPage()},c.prototype.getPageMax=function(){return!(!this.options.pagination||!this.modExists("page"))&&this.modules.page.getPageMax()},c.prototype.setGroupBy=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupBy=t,this.modules.groupRows.initialize(),this.rowManager.refreshActiveData("display")},c.prototype.setGroupStartOpen=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupStartOpen=t,this.modules.groupRows.initialize(),this.options.groupBy?this.rowManager.refreshActiveData("group"):console.warn("Grouping Update - cant refresh view, no groups have been set")},c.prototype.setGroupHeader=function(t){if(!this.modExists("groupRows",!0))return!1;this.options.groupHeader=t,this.modules.groupRows.initialize(),this.options.groupBy?this.rowManager.refreshActiveData("group"):console.warn("Grouping Update - cant refresh view, no groups have been set")},c.prototype.getGroups=function(t){return!!this.modExists("groupRows",!0)&&this.modules.groupRows.getGroups(!0)},c.prototype.getGroupedData=function(){if(this.modExists("groupRows",!0))return this.options.groupBy?this.modules.groupRows.getGroupedData():this.getData()},c.prototype.getCalcResults=function(){return!!this.modExists("columnCalcs",!0)&&this.modules.columnCalcs.getResults()},c.prototype.navigatePrev=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().prev())},c.prototype.navigateNext=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().next())},c.prototype.navigateLeft=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().left())},c.prototype.navigateRight=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().right())},c.prototype.navigateUp=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().up())},c.prototype.navigateDown=function(){var t=!1;return!(!this.modExists("edit",!0)||!(t=this.modules.edit.currentCell))&&(e.preventDefault(),t.nav().dpwn())},c.prototype.undo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.undo()},c.prototype.redo=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.redo()},c.prototype.getHistoryUndoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryUndoSize()},c.prototype.getHistoryRedoSize=function(){return!(!this.options.history||!this.modExists("history",!0))&&this.modules.history.getHistoryRedoSize()},c.prototype.download=function(t,e,o){this.modExists("download",!0)&&this.modules.download.download(t,e,o)},c.prototype.tableComms=function(t,e,o,i){this.modules.comms.receive(t,e,o,i)},c.prototype.moduleBindings={},c.prototype.extendModule=function(t,e,o){if(c.prototype.moduleBindings[t]){var i=c.prototype.moduleBindings[t].prototype[e];if(i){if("object"==(void 0===o?"undefined":q(o)))for(var n in o)i[n]=o[n];else console.warn("Module Error - Invalid value type, it must be an object");}else console.warn("Module Error - property does not exist:",e)}else console.warn("Module Error - module does not exist:",t)},c.prototype.registerModule=function(t,e){c.prototype.moduleBindings[t]=e},c.prototype.bindModules=function(){for(var t in this.modules={},c.prototype.moduleBindings)this.modules[t]=new c.prototype.moduleBindings[t](this)},c.prototype.modExists=function(t,e){return!!this.modules[t]||(e&&console.error("Tabulator Module Not Installed: "+t),!1)},c.prototype.helpers={elVisible:function(t){return!(t.offsetWidth<=0&&t.offsetHeight<=0)},elOffset:function(t){var e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft}},deepClone:function(t){var e=Array.isArray(t)?[]:{};for(var o in t)null!=t[o]&&"object"===q(t[o])?t[o]instanceof Date?e[o]=new Date(t[o]):e[o]=this.deepClone(t[o]):e[o]=t[o];return e}},c.prototype.comms={tables:[],register:function(t){c.prototype.comms.tables.push(t)},deregister:function(t){var e=c.prototype.comms.tables.indexOf(t);e>-1&&c.prototype.comms.tables.splice(e,1)},lookupTable:function(t){var e,o,i=[];if("string"==typeof t){if((e=document.querySelectorAll(t)).length)for(var n=0;n<e.length;n++)(o=c.prototype.comms.matchElement(e[n]))&&i.push(o)}else t instanceof HTMLElement||t instanceof c?(o=c.prototype.comms.matchElement(t))&&i.push(o):Array.isArray(t)?t.forEach(function(t){i=i.concat(c.prototype.comms.lookupTable(t))}):console.warn("Table Connection Error - Invalid Selector",t);return i},matchElement:function(t){return c.prototype.comms.tables.find(function(e){return t instanceof c?e===t:e.element===t})}};var d=function(t){this.table=t,this.mode=null};d.prototype.initialize=function(t){this.modes[t]?this.mode=t:(console.warn("Layout Error - invalid mode set, defaulting to 'fitData' : "+t),this.mode="fitData"),this.table.element.setAttribute("tabulator-layout",this.mode)},d.prototype.getMode=function(){return this.mode},d.prototype.layout=function(){this.modes[this.mode].call(this,this.table.columnManager.columnsByIndex)},d.prototype.modes={fitData:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitDataFill:function(t){t.forEach(function(t){t.reinitializeWidth()}),this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update()},fitColumns:function(t){var e,o,i=this.table.element.clientWidth,n=0,s=0,r=0,a=[],l=[],u=0,c=0;function d(t){return"string"==typeof t?t.indexOf("%")>-1?i/100*parseInt(t):parseInt(t):t}function h(t,e,o,i){var n=[],s=0,r=0,a=0,l=0,u=0,c=[];function p(t){return o*(t.column.definition.widthGrow||1)}function m(t){return d(t.width)-o*(t.column.definition.widthShrink||0)}return t.forEach(function(t,e){var o=i?m(t):p(t);t.column.minWidth>=o?n.push(t):(c.push(t),u+=i?t.column.definition.widthShrink||1:t.column.definition.widthGrow||1)}),n.length?(n.forEach(function(t){s+=i?t.width-t.column.minWidth:t.column.minWidth,t.width=t.column.minWidth}),l=(r=e-s)-(a=u?Math.floor(r/u):r)*u,l+=h(c,r,a,i)):(l=u?e-Math.floor(e/u)*u:e,c.forEach(function(t){t.width=i?m(t):p(t)})),l}this.table.options.responsiveLayout&&this.table.modExists("responsiveLayout",!0)&&this.table.modules.responsiveLayout.update(),this.table.rowManager.element.scrollHeight>this.table.rowManager.element.clientHeight&&(i-=this.table.rowManager.element.offsetWidth-this.table.rowManager.element.clientWidth),t.forEach(function(t){var e,o,i;t.visible&&(e=t.definition.width,o=parseInt(t.minWidth),e?(i=d(e),n+=i>o?i:o,t.definition.widthShrink&&(l.push({column:t,width:i>o?i:o}),u+=t.definition.widthShrink)):(a.push({column:t,width:0}),r+=t.definition.widthGrow||1))}),s=i-n,e=Math.floor(s/r);c=h(a,s,e,!1);a.length&&c>0&&(a[a.length-1].width+=+c),a.forEach(function(t){s-=t.width}),(o=Math.abs(c)+s)>0&&u&&(c=h(l,o,Math.floor(o/u),!0)),l.length&&(l[l.length-1].width-=c),a.forEach(function(t){t.column.setWidth(t.width)}),l.forEach(function(t){t.column.setWidth(t.width)})}},c.prototype.registerModule("layout",d);var h=function(t){this.table=t,this.locale="default",this.lang=!1,this.bindings={}};h.prototype.setHeaderFilterPlaceholder=function(t){this.langs.default.headerFilters.default=t},h.prototype.setHeaderFilterColumnPlaceholder=function(t,e){this.langs.default.headerFilters.columns[t]=e,this.lang&&!this.lang.headerFilters.columns[t]&&(this.lang.headerFilters.columns[t]=e)},h.prototype.installLang=function(t,e){this.langs[t]?this._setLangProp(this.langs[t],e):this.langs[t]=e},h.prototype._setLangProp=function(t,e){for(var o in e)t[o]&&"object"==q(t[o])?this._setLangProp(t[o],e[o]):t[o]=e[o]},h.prototype.setLocale=function(t){if(!0===(t=t||"default")&&navigator.language&&(t=navigator.language.toLowerCase()),t&&!this.langs[t]){var e=t.split("-")[0];this.langs[e]?(console.warn("Localization Error - Exact matching locale not found, using closest match: ",t,e),t=e):(console.warn("Localization Error - Matching locale not found, using default: ",t),t="default")}this.locale=t,this.lang=c.prototype.helpers.deepClone(this.langs.default||{}),"default"!=t&&function t(e,o){for(var i in e)"object"==q(e[i])?(o[i]||(o[i]={}),t(e[i],o[i])):o[i]=e[i]}(this.langs[t],this.lang),this.table.options.localized.call(this.table,this.locale,this.lang),this._executeBindings()},h.prototype.getLocale=function(t){return self.locale},h.prototype.getLang=function(t){return t?this.langs[t]:this.lang},h.prototype.getText=function(t,e){var o=(t=e?t+"|"+e:t).split("|");return this._getLangElement(o,this.locale)||""},h.prototype._getLangElement=function(t,e){var o=this.lang;return t.forEach(function(t){var e;o&&(e=o[t],o=void 0!==e&&e)}),o},h.prototype.bind=function(t,e){this.bindings[t]||(this.bindings[t]=[]),this.bindings[t].push(e),e(this.getText(t),this.lang)},h.prototype._executeBindings=function(){var t=this,e=function(e){t.bindings[e].forEach(function(o){o(t.getText(e),t.lang)})};for(var o in t.bindings)e(o)},h.prototype.langs={default:{groups:{item:"item",items:"items"},columns:{},ajax:{loading:"Loading",error:"Error"},pagination:{first:"First",first_title:"First Page",last:"Last",last_title:"Last Page",prev:"Prev",prev_title:"Prev Page",next:"Next",next_title:"Next Page"},headerFilters:{default:"filter column...",columns:{}}}},c.prototype.registerModule("localize",h);var p=function(t){this.table=t};p.prototype.getConnections=function(t){var e=this,o=[];return c.prototype.comms.lookupTable(t).forEach(function(t){e.table!==t&&o.push(t)}),o},p.prototype.send=function(t,e,o,i){var n=this,s=this.getConnections(t);s.forEach(function(t){t.tableComms(n.table.element,e,o,i)}),!s.length&&t&&console.warn("Table Connection Error - No tables matching selector found",t)},p.prototype.receive=function(t,e,o,i){if(this.table.modExists(e))return this.table.modules[e].commsReceived(t,o,i);console.warn("Inter-table Comms Error - no such module:",e)},c.prototype.registerModule("comms",p);var m=function(t){this.table=t,this.allowedTypes=["","data","download","clipboard"]};m.prototype.initializeColumn=function(t){var e=this,o=!1,i={};this.allowedTypes.forEach(function(n){var s,r="accessor"+(n.charAt(0).toUpperCase()+n.slice(1));t.definition[r]&&(s=e.lookupAccessor(t.definition[r]))&&(o=!0,i[r]={accessor:s,params:t.definition[r+"Params"]||{}})}),o&&(t.modules.accessor=i)},m.prototype.lookupAccessor=function(t){var e=!1;switch(void 0===t?"undefined":q(t)){case"string":this.accessors[t]?e=this.accessors[t]:console.warn("Accessor Error - No such accessor found, ignoring: ",t);break;case"function":e=t;}return e},m.prototype.transformRow=function(t,e){var o="accessor"+(e.charAt(0).toUpperCase()+e.slice(1)),i=c.prototype.helpers.deepClone(t||{});return this.table.columnManager.traverse(function(t){var n,s,r,a;t.modules.accessor&&(s=t.modules.accessor[o]||t.modules.accessor.accessor||!1)&&"undefined"!=(n=t.getFieldValue(i))&&(a=t.getComponent(),r="function"==typeof s.params?s.params(n,i,e,a):s.params,t.setFieldValue(i,s.accessor(n,i,e,r,a)))}),i},m.prototype.accessors={},c.prototype.registerModule("accessor",m);var f=function(t){this.table=t,this.config=!1,this.url="",this.urlGenerator=!1,this.params=!1,this.loaderElement=this.createLoaderElement(),this.msgElement=this.createMsgElement(),this.loadingElement=!1,this.errorElement=!1,this.loaderPromise=!1,this.progressiveLoad=!1,this.loading=!1,this.requestOrder=0};f.prototype.initialize=function(){var t;this.loaderElement.appendChild(this.msgElement),this.table.options.ajaxLoaderLoading&&("string"==typeof this.table.options.ajaxLoaderLoading?((t=document.createElement("template")).innerHTML=this.table.options.ajaxLoaderLoading.trim(),this.loadingElement=t.content.firstChild):this.loadingElement=this.table.options.ajaxLoaderLoading),this.loaderPromise=this.table.options.ajaxRequestFunc||this.defaultLoaderPromise,this.urlGenerator=this.table.options.ajaxURLGenerator||this.defaultURLGenerator,this.table.options.ajaxLoaderError&&(this.errorElement=this.table.options.ajaxLoaderError),this.table.options.ajaxParams&&this.setParams(this.table.options.ajaxParams),this.table.options.ajaxConfig&&this.setConfig(this.table.options.ajaxConfig),this.table.options.ajaxURL&&this.setUrl(this.table.options.ajaxURL),this.table.options.ajaxProgressiveLoad&&(this.table.options.pagination?(this.progressiveLoad=!1,console.error("Progressive Load Error - Pagination and progressive load cannot be used at the same time")):this.table.modExists("page")?(this.progressiveLoad=this.table.options.ajaxProgressiveLoad,this.table.modules.page.initializeProgressive(this.progressiveLoad)):console.error("Pagination plugin is required for progressive ajax loading"))},f.prototype.createLoaderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader"),t},f.prototype.createMsgElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-loader-msg"),t.setAttribute("role","alert"),t},f.prototype.setParams=function(t,e){if(e)for(var o in this.params=this.params||{},t)this.params[o]=t[o];else this.params=t},f.prototype.getParams=function(){return this.params||{}},f.prototype.setConfig=function(t){if(this._loadDefaultConfig(),"string"==typeof t)this.config.method=t;else for(var e in t)this.config[e]=t[e]},f.prototype._loadDefaultConfig=function(t){if(!this.config||t)for(var e in this.config={},this.defaultConfig)this.config[e]=this.defaultConfig[e]},f.prototype.setUrl=function(t){this.url=t},f.prototype.getUrl=function(){return this.url},f.prototype.loadData=function(t){return this.progressiveLoad?this._loadDataProgressive():this._loadDataStandard(t)},f.prototype.nextPage=function(t){this.loading||t<(this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.getElement().clientHeight)&&this.table.modules.page.nextPage().then(function(){}).catch(function(){})},f.prototype.blockActiveRequest=function(){this.requestOrder++},f.prototype._loadDataProgressive=function(){return this.table.rowManager.setData([]),this.table.modules.page.setPage(1)},f.prototype._loadDataStandard=function(t){var e=this;return new Promise(function(o,i){e.sendRequest(t).then(function(n){e.table.rowManager.setData(n,t).then(function(){o()}).catch(function(t){i(t)})}).catch(function(t){i(t)})})},f.prototype.generateParamsList=function(t,e){var o=this,i=[];if(e=e||"",Array.isArray(t))t.forEach(function(t,n){i=i.concat(o.generateParamsList(t,e?e+"["+n+"]":n))});else if("object"===(void 0===t?"undefined":q(t)))for(var n in t)i=i.concat(o.generateParamsList(t[n],e?e+"["+n+"]":n));else i.push({key:e,value:t});return i},f.prototype.serializeParams=function(t){var e=this.generateParamsList(t),o=[];return e.forEach(function(t){o.push(encodeURIComponent(t.key)+"="+encodeURIComponent(t.value))}),o.join("&")},f.prototype.sendRequest=function(t){var e,o=this,i=this,n=i.url;return i.requestOrder++,e=i.requestOrder,i._loadDefaultConfig(),new Promise(function(s,r){!1!==i.table.options.ajaxRequesting.call(o.table,i.url,i.params)?(i.loading=!0,t||i.showLoader(),o.loaderPromise(n,i.config,i.params).then(function(t){e===i.requestOrder?(i.table.options.ajaxResponse&&(t=i.table.options.ajaxResponse.call(i.table,i.url,i.params,t)),s(t)):console.warn("Ajax Response Blocked - An active ajax request was blocked by an attempt to change table data while the request was being made"),i.hideLoader(),i.loading=!1}).catch(function(t){console.error("Ajax Load Error: ",t),i.table.options.ajaxError.call(i.table,t),i.showError(),setTimeout(function(){i.hideLoader()},3e3),i.loading=!1,r()})):r()})},f.prototype.showLoader=function(){if("function"==typeof this.table.options.ajaxLoader?this.table.options.ajaxLoader():this.table.options.ajaxLoader){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-error"),this.msgElement.classList.add("tabulator-loading"),this.loadingElement?this.msgElement.appendChild(this.loadingElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|loading"),this.table.element.appendChild(this.loaderElement)}},f.prototype.showError=function(){for(this.hideLoader();this.msgElement.firstChild;)this.msgElement.removeChild(this.msgElement.firstChild);this.msgElement.classList.remove("tabulator-loading"),this.msgElement.classList.add("tabulator-error"),this.errorElement?this.msgElement.appendChild(this.errorElement):this.msgElement.innerHTML=this.table.modules.localize.getText("ajax|error"),this.table.element.appendChild(this.loaderElement)},f.prototype.hideLoader=function(){this.loaderElement.parentNode&&this.loaderElement.parentNode.removeChild(this.loaderElement)},f.prototype.defaultConfig={method:"GET"},f.prototype.defaultURLGenerator=function(t,e,o){return t&&o&&Object.keys(o).length&&(e.method&&"get"!=e.method.toLowerCase()||(e.method="get",t+="?"+this.serializeParams(o))),t},f.prototype.defaultLoaderPromise=function(t,e,o){var i,n=this;return new Promise(function(s,r){if(t=n.urlGenerator(t,e,o),"get"!=e.method)if(i="object"===q(n.table.options.ajaxContentType)?n.table.options.ajaxContentType:n.contentTypeFormatters[n.table.options.ajaxContentType]){for(var a in i.headers)e.headers||(e.headers={}),void 0===e.headers[a]&&(e.headers[a]=i.headers[a]);e.body=i.body.call(n,t,e,o)}else console.warn("Ajax Error - Invalid ajaxContentType value:",n.table.options.ajaxContentType);t?(void 0===e.credentials&&(e.credentials="include"),void 0===e.headers&&(e.headers={}),void 0===e.headers.Accept&&(e.headers.Accept="application/json"),void 0===e.headers["X-Requested-With"]&&(e.headers["X-Requested-With"]="XMLHttpRequest"),fetch(t,e).then(function(t){t.ok?t.json().then(function(t){s(t)}).catch(function(t){r(t),console.warn("Ajax Load Error - Invalid JSON returned",t)}):(console.error("Ajax Load Error - Connection Error: "+t.status,t.statusText),r(t))}).catch(function(t){console.error("Ajax Load Error - Connection Error: ",t),r(t)})):(console.warn("Ajax Load Error - No URL Set"),s([]))})},f.prototype.contentTypeFormatters={json:{headers:{"Content-Type":"application/json"},body:function(t,e,o){return JSON.stringify(o)}},form:{headers:{},body:function(t,e,o){var i=this.generateParamsList(o),n=new FormData;return i.forEach(function(t){n.append(t.key,t.value)}),n}}},c.prototype.registerModule("ajax",f);var g=function(t){this.table=t,this.topCalcs=[],this.botCalcs=[],this.genColumn=!1,this.topElement=this.createElement(),this.botElement=this.createElement(),this.topRow=!1,this.botRow=!1,this.topInitialized=!1,this.botInitialized=!1,this.initialize()};g.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-calcs-holder"),t},g.prototype.initialize=function(){this.genColumn=new i({field:"value"},this)},g.prototype.registerColumnField=function(){},g.prototype.initializeColumn=function(t){var e=t.definition,o={topCalcParams:e.topCalcParams||{},botCalcParams:e.bottomCalcParams||{}};if(e.topCalc){switch(q(e.topCalc)){case"string":this.calculations[e.topCalc]?o.topCalc=this.calculations[e.topCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.topCalc);break;case"function":o.topCalc=e.topCalc;}o.topCalc&&(t.modules.columnCalcs=o,this.topCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeTopRow())}if(e.bottomCalc){switch(q(e.bottomCalc)){case"string":this.calculations[e.bottomCalc]?o.botCalc=this.calculations[e.bottomCalc]:console.warn("Column Calc Error - No such calculation found, ignoring: ",e.bottomCalc);break;case"function":o.botCalc=e.bottomCalc;}o.botCalc&&(t.modules.columnCalcs=o,this.botCalcs.push(t),"group"!=this.table.options.columnCalcs&&this.initializeBottomRow())}},g.prototype.removeCalcs=function(){var t=!1;this.topInitialized&&(this.topInitialized=!1,this.topElement.parentNode.removeChild(this.topElement),t=!0),this.botInitialized&&(this.botInitialized=!1,this.table.footerManager.remove(this.botElement),t=!0),t&&this.table.rowManager.adjustTableSize()},g.prototype.initializeTopRow=function(){this.topInitialized||(this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling),this.topInitialized=!0)},g.prototype.initializeBottomRow=function(){this.botInitialized||(this.table.footerManager.prepend(this.botElement),this.botInitialized=!0)},g.prototype.scrollHorizontal=function(t){this.table.columnManager.getElement().scrollWidth,this.table.element.clientWidth;this.botInitialized&&(this.botRow.getElement().style.marginLeft=-t+"px")},g.prototype.recalc=function(t){var e;if(this.topInitialized||this.botInitialized){if(this.rowsToData(t),this.topInitialized){for(e=this.generateRow("top",this.rowsToData(t)),this.topRow=e;this.topElement.firstChild;)this.topElement.removeChild(this.topElement.firstChild);this.topElement.appendChild(e.getElement()),e.initialize(!0)}if(this.botInitialized){for(e=this.generateRow("bottom",this.rowsToData(t)),this.botRow=e;this.botElement.firstChild;)this.botElement.removeChild(this.botElement.firstChild);this.botElement.appendChild(e.getElement()),e.initialize(!0)}this.table.rowManager.adjustTableSize(),this.table.modExists("frozenColumns")&&this.table.modules.frozenColumns.layout()}},g.prototype.recalcRowGroup=function(t){this.recalcGroup(this.table.modules.groupRows.getRowGroup(t))},g.prototype.recalcGroup=function(t){var e,o;t&&t.calcs&&(t.calcs.bottom&&(e=this.rowsToData(t.rows),o=this.generateRowData("bottom",e),t.calcs.bottom.updateData(o),t.calcs.bottom.reinitialize()),t.calcs.top&&(e=this.rowsToData(t.rows),o=this.generateRowData("top",e),t.calcs.top.updateData(o),t.calcs.top.reinitialize()))},g.prototype.generateTopRow=function(t){return this.generateRow("top",this.rowsToData(t))},g.prototype.generateBottomRow=function(t){return this.generateRow("bottom",this.rowsToData(t))},g.prototype.rowsToData=function(t){var e=[];return t.forEach(function(t){e.push(t.getData())}),e},g.prototype.generateRow=function(t,e){var o,i=this,n=this.generateRowData(t,e);return i.table.modExists("mutator")&&i.table.modules.mutator.disable(),o=new r(n,this),i.table.modExists("mutator")&&i.table.modules.mutator.enable(),o.getElement().classList.add("tabulator-calcs","tabulator-calcs-"+t),o.type="calc",o.generateCells=function(){var e=[];i.table.columnManager.columnsByIndex.forEach(function(n){if(n.visible){i.genColumn.setField(n.getField()),i.genColumn.hozAlign=n.hozAlign,n.definition[t+"CalcFormatter"]&&i.table.modExists("format")?i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter(n.definition[t+"CalcFormatter"]),params:n.definition[t+"CalcFormatterParams"]}:i.genColumn.modules.format={formatter:i.table.modules.format.getFormatter("plaintext"),params:{}},i.genColumn.definition.cssClass=n.definition.cssClass;var s=new l(i.genColumn,o);s.column=n,s.setWidth(n.width),n.cells.push(s),e.push(s)}}),this.cells=e},o},g.prototype.generateRowData=function(t,e){var o,i,n={},s="top"==t?this.topCalcs:this.botCalcs,r="top"==t?"topCalc":"botCalc";return s.forEach(function(t){var s=[];t.modules.columnCalcs&&t.modules.columnCalcs[r]&&(e.forEach(function(e){s.push(t.getFieldValue(e))}),i=r+"Params",o="function"==typeof t.modules.columnCalcs[i]?t.modules.columnCalcs[i](value,e):t.modules.columnCalcs[i],t.setFieldValue(n,t.modules.columnCalcs[r](s,e,o)))}),n},g.prototype.hasTopCalcs=function(){return!!this.topCalcs.length},g.prototype.hasBottomCalcs=function(){return!!this.botCalcs.length},g.prototype.redraw=function(){this.topRow&&this.topRow.normalizeHeight(!0),this.botRow&&this.botRow.normalizeHeight(!0)},g.prototype.getResults=function(){var t=this,e={};return this.table.options.groupBy&&this.table.modExists("groupRows")?this.table.modules.groupRows.getGroups(!0).forEach(function(o){e[o.getKey()]=t.getGroupResults(o)}):e={top:this.topRow?this.topRow.getData():{},bottom:this.botRow?this.botRow.getData():{}},e},g.prototype.getGroupResults=function(t){var e=this,o=t._getSelf(),i=t.getSubGroups(),n={};return i.forEach(function(t){n[t.getKey()]=e.getGroupResults(t)}),{top:o.calcs.top?o.calcs.top.getData():{},bottom:o.calcs.bottom?o.calcs.bottom.getData():{},groups:n}},g.prototype.calculations={avg:function(t,e,o){var i=0,n=void 0!==o.precision?o.precision:2;return t.length&&(i=t.reduce(function(t,e){return t+(e=Number(e))}),i/=t.length,i=!1!==n?i.toFixed(n):i),parseFloat(i).toString()},max:function(t,e,o){var i=null,n=void 0!==o.precision&&o.precision;return t.forEach(function(t){((t=Number(t))>i||null===i)&&(i=t)}),null!==i?!1!==n?i.toFixed(n):i:""},min:function(t,e,o){var i=null,n=void 0!==o.precision&&o.precision;return t.forEach(function(t){((t=Number(t))<i||null===i)&&(i=t)}),null!==i?!1!==n?i.toFixed(n):i:""},sum:function(t,e,o){var i=0,n=void 0!==o.precision&&o.precision;return t.length&&t.forEach(function(t){t=Number(t),i+=isNaN(t)?0:Number(t)}),!1!==n?i.toFixed(n):i},concat:function(t,e,o){var i=0;return t.length&&(i=t.reduce(function(t,e){return String(t)+String(e)})),i},count:function(t,e,o){var i=0;return t.length&&t.forEach(function(t){t&&i++}),i}},c.prototype.registerModule("columnCalcs",g);var b=function(t){this.table=t,this.mode=!0,this.copySelector=!1,this.copySelectorParams={},this.copyFormatter=!1,this.copyFormatterParams={},this.pasteParser=function(){},this.pasteAction=function(){},this.htmlElement=!1,this.config={},this.blocked=!0};b.prototype.initialize=function(){var t=this;this.mode=this.table.options.clipboard,!0!==this.mode&&"copy"!==this.mode||this.table.element.addEventListener("copy",function(e){var o;t.processConfig(),t.blocked||(e.preventDefault(),o=t.generateContent(),window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",o):e.clipboardData&&e.clipboardData.setData?(e.clipboardData.setData("text/plain",o),t.htmlElement&&e.clipboardData.setData("text/html",t.htmlElement.outerHTML)):e.originalEvent&&e.originalEvent.clipboardData.setData&&(e.originalEvent.clipboardData.setData("text/plain",o),t.htmlElement&&e.originalEvent.clipboardData.setData("text/html",t.htmlElement.outerHTML)),t.table.options.clipboardCopied.call(this.table,o),t.reset())}),!0!==this.mode&&"paste"!==this.mode||this.table.element.addEventListener("paste",function(e){t.paste(e)}),this.setPasteParser(this.table.options.clipboardPasteParser),this.setPasteAction(this.table.options.clipboardPasteAction)},b.prototype.processConfig=function(){var t={columnHeaders:"groups",rowGroups:!0};if(void 0!==this.table.options.clipboardCopyHeader&&(t.columnHeaders=this.table.options.clipboardCopyHeader,console.warn("DEPRECATION WANRING - clipboardCopyHeader option has been depricated, please use the columnHeaders property on the clipboardCopyConfig option")),this.table.options.clipboardCopyConfig)for(var e in this.table.options.clipboardCopyConfig)t[e]=this.table.options.clipboardCopyConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnHeaders?"groups"!==t.columnHeaders&&!0!==t||this.table.columnManager.columns.length==this.table.columnManager.columnsByIndex.length?this.config.columnHeaders="columns":this.config.columnHeaders="groups":this.config.columnHeaders=!1},b.prototype.reset=function(){this.blocked=!1,this.originalSelectionText=""},b.prototype.setPasteAction=function(t){switch(void 0===t?"undefined":q(t)){case"string":this.pasteAction=this.pasteActions[t],this.pasteAction||console.warn("Clipboard Error - No such paste action found:",t);break;case"function":this.pasteAction=t;}},b.prototype.setPasteParser=function(t){switch(void 0===t?"undefined":q(t)){case"string":this.pasteParser=this.pasteParsers[t],this.pasteParser||console.warn("Clipboard Error - No such paste parser found:",t);break;case"function":this.pasteParser=t;}},b.prototype.paste=function(t){var e,o,i;this.checkPaseOrigin(t)&&(e=this.getPasteData(t),(o=this.pasteParser.call(this,e))?(t.preventDefault(),this.table.modExists("mutator")&&(o=this.mutateData(o)),i=this.pasteAction.call(this,o),this.table.options.clipboardPasted.call(this.table,e,o,i)):this.table.options.clipboardPasteError.call(this.table,e))},b.prototype.mutateData=function(t){var e=this,o=[];return Array.isArray(t)?t.forEach(function(t){o.push(e.table.modules.mutator.transformRow(t,"clipboard"))}):o=t,o},b.prototype.checkPaseOrigin=function(t){var e=!0;return("DIV"!=t.target.tagName||this.table.modules.edit.currentCell)&&(e=!1),e},b.prototype.getPasteData=function(t){var e;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData?e=t.clipboardData.getData("text/plain"):t.originalEvent&&t.originalEvent.clipboardData.getData&&(e=t.originalEvent.clipboardData.getData("text/plain")),e},b.prototype.copy=function(t,e,o,i,n){var s,r;this.blocked=!1,!0!==this.mode&&"copy"!==this.mode||(void 0!==window.getSelection&&void 0!==document.createRange?((s=document.createRange()).selectNodeContents(this.table.element),(r=window.getSelection()).toString()&&n&&(t="userSelection",o="raw",e=r.toString()),r.removeAllRanges(),r.addRange(s)):void 0!==document.selection&&void 0!==document.body.createTextRange&&(textRange=document.body.createTextRange(),textRange.moveToElementText(this.table.element),textRange.select()),this.setSelector(t),this.copySelectorParams=void 0!==e&&null!=e?e:this.config.columnHeaders,this.setFormatter(o),this.copyFormatterParams=void 0!==i&&null!=i?i:{},document.execCommand("copy"),r&&r.removeAllRanges())},b.prototype.setSelector=function(t){switch(void 0===(t=t||this.table.options.clipboardCopySelector)?"undefined":q(t)){case"string":this.copySelectors[t]?this.copySelector=this.copySelectors[t]:console.warn("Clipboard Error - No such selector found:",t);break;case"function":this.copySelector=t;}},b.prototype.setFormatter=function(t){switch(void 0===(t=t||this.table.options.clipboardCopyFormatter)?"undefined":q(t)){case"string":this.copyFormatters[t]?this.copyFormatter=this.copyFormatters[t]:console.warn("Clipboard Error - No such formatter found:",t);break;case"function":this.copyFormatter=t;}},b.prototype.generateContent=function(){var t;return this.htmlElement=!1,t=this.copySelector.call(this,this.config,this.copySelectorParams),this.copyFormatter.call(this,t,this.config,this.copyFormatterParams)},b.prototype.generateSimpleHeaders=function(t){var e=[];return t.forEach(function(t){e.push(t.definition.title)}),e},b.prototype.generateColumnGroupHeaders=function(t){var e=this,o=[];return this.table.columnManager.columns.forEach(function(t){var i=e.processColumnGroup(t);i&&o.push(i)}),o},b.prototype.processColumnGroup=function(t){var e=this,o=t.columns,i={type:"group",title:t.definition.title,column:t};if(o.length){if(i.subGroups=[],i.width=0,o.forEach(function(t){var o=e.processColumnGroup(t);o&&(i.width+=o.width,i.subGroups.push(o))}),!i.width)return!1}else{if(!t.field||!t.visible)return!1;i.width=1}return i},b.prototype.groupHeadersToRows=function(t){var e=[];function o(t,i){var n;void 0===e[i]&&(e[i]=[]),e[i].push(t.title),t.subGroups?t.subGroups.forEach(function(t){o(t,i+1)}):(n=0,e.forEach(function(t){var e=t.length;e>n&&(n=e)}),e.forEach(function(t){var e=t.length;if(e<n)for(var o=e;o<n;o++)t.push("")}))}return t.forEach(function(t){o(t,0)}),e},b.prototype.rowsToData=function(t,e,o){var i=this.table.columnManager.columnsByIndex,n=[];return t.forEach(function(t){var e=[],o=t.getData("clipboard");i.forEach(function(t){var i=t.getFieldValue(o);switch(void 0===i?"undefined":q(i)){case"object":i=JSON.stringify(i);break;case"undefined":case"null":i="";break;default:i=i;}e.push(i)}),n.push(e)}),n},b.prototype.buildComplexRows=function(t){var e=this,o=[];return this.table.modules.groupRows.getGroups().forEach(function(t){o.push(e.processGroupData(t))}),o},b.prototype.processGroupData=function(t){var e=this,o=t.getSubGroups(),i={type:"group",key:t.key};return o.length?(i.subGroups=[],o.forEach(function(t){i.subGroups.push(e.processGroupData(t))})):i.rows=t.getRows(!0),i},b.prototype.buildOutput=function(t,e,o){var i=this,n=[],s=this.table.columnManager.columnsByIndex;return e.columnHeaders&&("groups"==e.columnHeaders?(s=this.generateColumnGroupHeaders(this.table.columnManager.columns),n=n.concat(this.groupHeadersToRows(s))):n.push(this.generateSimpleHeaders(s))),this.table.options.clipboardCopyStyled&&this.generateHTML(t,s,e,o),e.rowGroups?t.forEach(function(t){n=n.concat(i.parseRowGroupData(t,e,o))}):n=n.concat(this.rowsToData(t,e,o)),n},b.prototype.parseRowGroupData=function(t,e,o){var i=this,n=[];return n.push([t.key]),t.subGroups?t.subGroups.forEach(function(t){n=n.concat(i.parseRowGroupData(t,e,o))}):n=n.concat(this.rowsToData(t.rows,e,o)),n},b.prototype.generateHTML=function(t,e,o,i){var n,s,r,a,l,u,c,d,h=this,p=[];function m(t){t.forEach(function(t,o){var i=document.createElement("tr"),u=t.getData("clipboard"),c=a;e.forEach(function(t,o){var n=document.createElement("td"),s=t.getFieldValue(u);switch(void 0===s?"undefined":q(s)){case"object":s=JSON.stringify(s);break;case"undefined":case"null":s="";break;default:s=s;}n.innerHTML=s,t.definition.align&&(n.style.textAlign=t.definition.align),e.length,l&&h.mapElementStyles(l,n,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size"]),i.appendChild(n)}),o%2||!s||(c=s),o%2&&r&&(c=r),c&&h.mapElementStyles(c,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),n.appendChild(i)})}this.htmlElement=document.createElement("table"),h.mapElementStyles(this.table.element,this.htmlElement,["border-top","border-left","border-right","border-bottom"]),o.columnHeaders&&("groups"==o.columnHeaders?(e.forEach(function(t){!function t(e,o){void 0===p[o]&&(p[o]=[]),p[o].push({title:e.title,width:e.width,height:1,children:!!e.subGroups,element:e.column.getElement()}),e.subGroups&&e.subGroups.forEach(function(e){t(e,o+1)})}(t,0)}),p.forEach(function(t,e){t.forEach(function(t){t.children||(t.height=p.length-e)})}),function(t){var e=document.createElement("thead");t.forEach(function(t){var o=document.createElement("tr");t.forEach(function(t){var e=document.createElement("th");t.width>1&&(e.colSpan=t.width),t.height>1&&(e.rowSpan=t.height),e.innerHTML=t.title,h.mapElementStyles(t.element,e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),o.appendChild(e)}),h.mapElementStyles(h.table.columnManager.getHeadersElement(),o,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),e.appendChild(o)}),h.htmlElement.appendChild(e)}(p)):(d=document.createElement("tr"),e.forEach(function(t){var e=document.createElement("th");e.innerHTML=t.definition.title,h.mapElementStyles(t.getElement(),e,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),d.appendChild(e)}),h.mapElementStyles(h.table.columnManager.getHeadersElement(),d,["border-top","border-left","border-right","border-bottom","background-color","color","font-weight","font-family","font-size"]),h.htmlElement.appendChild(document.createElement("thead").appendChild(d)))),e=this.table.columnManager.columnsByIndex,n=document.createElement("tbody"),window.getComputedStyle&&(s=this.table.element.querySelector(".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)"),r=this.table.element.querySelector(".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)"),a=this.table.element.querySelector(".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)"),u=this.table.element.getElementsByClassName("tabulator-group")[0],a&&(c=a.getElementsByClassName("tabulator-cell"),l=c[0],c[c.length-1])),o.rowGroups?t.forEach(function(t){!function t(o){var i=document.createElement("tr"),s=document.createElement("td");s.colSpan=e.length,s.innerHTML=o.key,i.appendChild(s),n.appendChild(i),h.mapElementStyles(u,i,["border-top","border-left","border-right","border-bottom","color","font-weight","font-family","font-size","background-color"]),o.subGroups?o.subGroups.forEach(function(e){t(e)}):m(o.rows)}(t)}):m(t),this.htmlElement.appendChild(n)},b.prototype.mapElementStyles=function(t,e,o){var i={"background-color":"backgroundColor",color:"fontColor","font-weight":"fontWeight","font-family":"fontFamily","font-size":"fontSize","border-top":"borderTop","border-left":"borderLeft","border-right":"borderRight","border-bottom":"borderBottom"};if(window.getComputedStyle){var n=window.getComputedStyle(t);o.forEach(function(t){e.style[i[t]]=n.getPropertyValue(t)})}},b.prototype.copySelectors={userSelection:function(t,e){return e},selected:function(t,e){var o=[];return this.table.modExists("selectRow",!0)&&(o=this.table.modules.selectRow.getSelectedRows()),t.rowGroups&&console.warn("Clipboard Warning - select coptSelector does not support row groups"),this.buildOutput(o,t,e)},table:function(t,e){return t.rowGroups&&console.warn("Clipboard Warning - table coptSelector does not support row groups"),this.buildOutput(this.table.rowManager.getComponents(),t,e)},active:function(t,e){var o;return o=t.rowGroups?this.buildComplexRows(t):this.table.rowManager.getComponents(!0),this.buildOutput(o,t,e)}},b.prototype.copyFormatters={raw:function(t,e){return t},table:function(t,e){var o=[];return t.forEach(function(t){t.forEach(function(t){void 0===t&&(t=""),(t=null==t?"":t.toString()).match(/\r|\n/)&&(t="\""+(t=t.split("\"").join("\"\""))+"\"")}),o.push(t.join("\t"))}),o.join("\n")}},b.prototype.pasteParsers={table:function(t){var e=[],o=!0,i=this.table.columnManager.columns,n=[],s=[];return(t=t.split("\n")).forEach(function(t){e.push(t.split("\t"))}),!(!e.length||1===e.length&&e[0].length<2)&&(!0,e[0].forEach(function(t){var e=i.find(function(e){return t&&e.definition.title&&t.trim()&&e.definition.title.trim()===t.trim()});e?n.push(e):o=!1}),o||(o=!0,n=[],e[0].forEach(function(t){var e=i.find(function(e){return t&&e.field&&t.trim()&&e.field.trim()===t.trim()});e?n.push(e):o=!1}),o||(n=this.table.columnManager.columnsByIndex)),o&&e.shift(),e.forEach(function(t){var e={};t.forEach(function(t,o){n[o]&&(e[n[o].field]=t)}),s.push(e)}),s)}},b.prototype.pasteActions={replace:function(t){return this.table.setData(t)},update:function(t){return this.table.updateOrAddData(t)},insert:function(t){return this.table.addData(t)}},c.prototype.registerModule("clipboard",b);var v=function(t){this.table=t,this.indent=10,this.field="",this.collapseEl=null,this.expandEl=null,this.branchEl=null,this.startOpen=function(){},this.displayIndex=0};v.prototype.initialize=function(){var t=null,e=this.table.options;switch(this.field=e.dataTreeChildField,this.indent=e.dataTreeChildIndent,e.dataTreeBranchElement&&(!0===e.dataTreeBranchElement?(this.branchEl=document.createElement("div"),this.branchEl.classList.add("tabulator-data-tree-branch")):"string"==typeof e.dataTreeBranchElement?((t=document.createElement("div")).innerHTML=e.dataTreeBranchElement,this.branchEl=t.firstChild):this.branchEl=e.dataTreeBranchElement),e.dataTreeCollapseElement?"string"==typeof e.dataTreeCollapseElement?((t=document.createElement("div")).innerHTML=e.dataTreeCollapseElement,this.collapseEl=t.firstChild):this.collapseEl=e.dataTreeCollapseElement:(this.collapseEl=document.createElement("div"),this.collapseEl.classList.add("tabulator-data-tree-control"),this.collapseEl.innerHTML="<div class='tabulator-data-tree-control-collapse'></div>"),e.dataTreeExpandElement?"string"==typeof e.dataTreeExpandElement?((t=document.createElement("div")).innerHTML=e.dataTreeExpandElement,this.expandEl=t.firstChild):this.expandEl=e.dataTreeExpandElement:(this.expandEl=document.createElement("div"),this.expandEl.classList.add("tabulator-data-tree-control"),this.expandEl.innerHTML="<div class='tabulator-data-tree-control-expand'></div>"),q(e.dataTreeStartExpanded)){case"boolean":this.startOpen=function(t,o){return e.dataTreeStartExpanded};break;case"function":this.startOpen=e.dataTreeStartExpanded;break;default:this.startOpen=function(t,o){return e.dataTreeStartExpanded[o]};}},v.prototype.initializeRow=function(t){var e=void 0!==t.getData()[this.field];t.modules.dataTree={index:0,open:!!e&&this.startOpen(t.getComponent(),0),controlEl:!1,branchEl:!1,parent:!1,children:e}},v.prototype.layoutRow=function(t){var e=t.getCells()[0].getElement(),o=t.modules.dataTree;e.style.paddingLeft=parseInt(window.getComputedStyle(e,null).getPropertyValue("padding-left"))+o.index*this.indent+"px",o.branchEl&&o.branchEl.parentNode.removeChild(o.branchEl),this.generateControlElement(t,e),o.index&&this.branchEl&&(o.branchEl=this.branchEl.cloneNode(!0),e.insertBefore(o.branchEl,e.firstChild),e.style.paddingLeft=parseInt(e.style.paddingLeft)+(o.branchEl.offsetWidth+o.branchEl.style.marginRight)*(o.index-1)+"px")},v.prototype.generateControlElement=function(t,e){var o=this,i=t.modules.dataTree,n=(e=e||t.getCells()[0].getElement(),i.controlEl);!1!==i.children&&(i.open?(i.controlEl=this.collapseEl.cloneNode(!0),i.controlEl.addEventListener("click",function(e){e.stopPropagation(),o.collapseRow(t)})):(i.controlEl=this.expandEl.cloneNode(!0),i.controlEl.addEventListener("click",function(e){e.stopPropagation(),o.expandRow(t)})),i.controlEl.addEventListener("mousedown",function(t){t.stopPropagation()}),n&&n.parentNode===e?n.parentNode.replaceChild(i.controlEl,n):e.insertBefore(i.controlEl,e.firstChild))},v.prototype.setDisplayIndex=function(t){this.displayIndex=t},v.prototype.getDisplayIndex=function(){return this.displayIndex},v.prototype.getRows=function(t){var e=this,o=[];return t.forEach(function(t,i){var n;o.push(t),t instanceof r&&((n=t.modules.dataTree.children).index||!1===n.children||e.getChildren(t).forEach(function(t){o.push(t)}))}),o},v.prototype.getChildren=function(t){var e=this,o=t.modules.dataTree,i=[];return!1!==o.children&&o.open&&(Array.isArray(o.children)||(o.children=this.generateChildren(t)),o.children.forEach(function(t){i.push(t),e.getChildren(t).forEach(function(t){i.push(t)})})),i},v.prototype.generateChildren=function(t){var e=this,o=[];return t.getData()[this.field].forEach(function(i){var n=new r(i||{},e.table.rowManager);n.modules.dataTree.index=t.modules.dataTree.index+1,n.modules.dataTree.parent=t,n.modules.dataTree.open=e.startOpen(t,n.modules.dataTree.index),o.push(n)}),o},v.prototype.expandRow=function(t,e){var o=t.modules.dataTree;!1!==o.children&&(o.open=!0,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowExpanded(t.getComponent(),t.modules.dataTree.index))},v.prototype.collapseRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open=!1,t.reinitialize(),this.table.rowManager.refreshActiveData("tree",!1,!0),this.table.options.dataTreeRowCollapsed(t.getComponent(),t.modules.dataTree.index))},v.prototype.toggleRow=function(t){var e=t.modules.dataTree;!1!==e.children&&(e.open?this.collapseRow(t):this.expandRow(t))},v.prototype.getTreeParent=function(t){return!!t.modules.dataTree.parent&&t.modules.dataTree.parent.getComponent()},v.prototype.getTreeChildren=function(t){var e=t.modules.dataTree,o=[];return e.children&&(Array.isArray(e.children)||(e.children=this.generateChildren(t)),e.children.forEach(function(t){t instanceof r&&o.push(t.getComponent())})),o},v.prototype.checkForRestyle=function(t){t.row.cells.indexOf(t)||!1!==t.row.modules.dataTree.children&&t.row.reinitialize()},c.prototype.registerModule("dataTree",v);var y=function(t){this.table=t,this.fields={},this.columnsByIndex=[],this.columnsByField={},this.config={}};y.prototype.download=function(t,e,o,i){var n=this,s=!1;this.processConfig(),"function"==typeof t?s=t:n.downloaders[t]?s=n.downloaders[t]:console.warn("Download Error - No such download type found: ",t),this.processColumns(),s&&s.call(this,n.processDefinitions(),n.processData(),o||{},function(o,s){i?i(o):n.triggerDownload(o,s,t,e)},this.config)},y.prototype.processConfig=function(){var t={columnGroups:!0,rowGroups:!0};if(this.table.options.downloadConfig)for(var e in this.table.options.downloadConfig)t[e]=this.table.options.downloadConfig[e];t.rowGroups&&this.table.options.groupBy&&this.table.modExists("groupRows")&&(this.config.rowGroups=!0),t.columnGroups&&this.table.columnManager.columns.length!=this.table.columnManager.columnsByIndex.length&&(this.config.columnGroups=!0)},y.prototype.processColumns=function(){var t=this;t.columnsByIndex=[],t.columnsByField={},t.table.columnManager.columnsByIndex.forEach(function(e){e.field&&e.visible&&!1!==e.definition.download&&(t.columnsByIndex.push(e),t.columnsByField[e.field]=e)})},y.prototype.processDefinitions=function(){var t=this,e=[];return this.config.columnGroups?t.table.columnManager.columns.forEach(function(o){var i=t.processColumnGroup(o);i&&e.push(i)}):t.columnsByIndex.forEach(function(o){!1!==o.download&&e.push(t.processDefinition(o))}),e},y.prototype.processColumnGroup=function(t){var e=this,o=t.columns,i={type:"group",title:t.definition.title};if(o.length){if(i.subGroups=[],i.width=0,o.forEach(function(t){var o=e.processColumnGroup(t);o&&(i.width+=o.width,i.subGroups.push(o))}),!i.width)return!1}else{if(!t.field||!t.visible||!1===t.definition.download)return!1;i.width=1,i.definition=this.processDefinition(t)}return i},y.prototype.processDefinition=function(t){var e={};for(var o in t.definition)e[o]=t.definition[o];return void 0!==t.definition.downloadTitle&&(e.title=t.definition.downloadTitle),e},y.prototype.processData=function(){var t=this,e=[];return this.config.rowGroups?this.table.modules.groupRows.getGroups().forEach(function(o){e.push(t.processGroupData(o))}):e=this.table.rowManager.getData(!0,"download"),"function"==typeof this.table.options.downloadDataFormatter&&(e=this.table.options.downloadDataFormatter(e)),e},y.prototype.processGroupData=function(t){var e=this,o=t.getSubGroups(),i={type:"group",key:t.key};return o.length?(i.subGroups=[],o.forEach(function(t){i.subGroups.push(e.processGroupData(t))})):i.rows=t.getData(!0,"download"),i},y.prototype.triggerDownload=function(t,e,o,i){var n=document.createElement("a"),s=new Blob([t],{type:e});i=i||"Tabulator."+("function"==typeof o?"txt":o);(s=this.table.options.downloadReady.call(this.table,t,s))&&(navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,i):(n.setAttribute("href",window.URL.createObjectURL(s)),n.setAttribute("download",i),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)),this.table.options.downloadComplete&&this.table.options.downloadComplete())},y.prototype.getFieldValue=function(t,e){var o=this.columnsByField[t];return!!o&&o.getFieldValue(e)},y.prototype.commsReceived=function(t,e,o){switch(e){case"intercept":this.download(o.type,"",o.options,o.intercept);}},y.prototype.downloaders={csv:function(t,e,o,i,n){var s,r=this,a=[],l=[],u=o&&o.delimiter?o.delimiter:",";function c(t){t.forEach(function(t){var e=[];l.forEach(function(o){var i=r.getFieldValue(o,t);switch(void 0===i?"undefined":q(i)){case"object":i=JSON.stringify(i);break;case"undefined":case"null":i="";break;default:i=i;}e.push("\""+String(i).split("\"").join("\"\"")+"\"")}),s.push(e.join(u))})}n.columnGroups?(console.warn("Download Warning - CSV downloader cannot process column groups"),t.forEach(function(t){!function t(e,o){e.subGroups?e.subGroups.forEach(function(e){t(e,o+1)}):(a.push("\""+String(e.title).split("\"").join("\"\"")+"\""),l.push(e.definition.field))}(t,0)})):t.forEach(function(t){a.push("\""+String(t.title).split("\"").join("\"\"")+"\""),l.push(t.field)}),s=[a.join(u)],n.rowGroups?(console.warn("Download Warning - CSV downloader cannot process row groups"),e.forEach(function(t){!function t(e){e.subGroups?e.subGroups.forEach(function(e){t(e)}):c(e.rows)}(t)})):c(e),i(s.join("\n"),"text/csv")},json:function(t,e,o,i,n){i(JSON.stringify(e,null,"\t"),"application/json")},pdf:function(t,e,o,i,n){var s=this,r=[],a=[],l=[],u=[],c={},d={},h=o.jsPDF||{},p=o&&o.title?o.title:"";function m(t){switch(void 0===t?"undefined":q(t)){case"object":t=JSON.stringify(t);break;case"undefined":case"null":t="";break;default:t=t;}return t}function f(t){t.forEach(function(t){var e=[];r.forEach(function(o){var i=s.getFieldValue(o,t);e.push(m(i))}),l.push(e)})}h.orientation||(h.orientation=o.orientation||"landscape"),h.unit||(h.unit="pt"),n.columnGroups?(console.warn("Download Warning - PDF downloader cannot process column groups"),t.forEach(function(t){!function t(e,o){e.subGroups?e.subGroups.forEach(function(e){t(e,o+1)}):(a.push(e.title||""),r.push(e.definition.field))}(t,0)})):t.forEach(function(t){t.field&&(a.push(t.title||""),r.push(t.field))}),n.rowGroups?e.forEach(function(t){!function t(e){var o=[];o.push(m(e.key)),u.push(l.length),l.push(o),e.subGroups?e.subGroups.forEach(function(e){t(e)}):f(e.rows)}(t)}):f(e);var g=new jsPDF(h);if(o&&o.autoTable&&(c="function"==typeof o.autoTable?o.autoTable(g)||{}:o.autoTable),n.rowGroups){var b=function(t,e){if(u.indexOf(e.row.index)>-1)for(var o in d)t.styles[o]=d[o]};if(d=o.rowGroupStyles||{fontStyle:"bold",fontSize:12,cellPadding:6,fillColor:220},c.createdCell){var v=c.createdCell;c.createdCell=function(t,e){b(t,e),v(t,e)}}else c.createdCell=b}p&&(c.addPageContent=function(t){g.text(p,40,30)}),g.autoTable(a,l,c),i(g.output("arraybuffer"),"application/pdf")},xlsx:function(t,e,o,i,n){var s=this,r=o.sheetName||"Sheet1",a={SheetNames:[],Sheets:{}},l=[],u=[];function c(){var o=[],i=[],r=[];function a(t,e){var n;void 0===o[e]&&(o[e]=[]),void 0===u[e]&&(u[e]=[]),t.width>1&&u[e].push({type:"hoz",start:o[e].length,end:o[e].length+t.width-1}),o[e].push(t.title),t.subGroups?t.subGroups.forEach(function(t){a(t,e+1)}):(i.push(t.definition.field),i.length,n=0,o.forEach(function(t){var e=t.length;e>n&&(n=e)}),o.forEach(function(t){var e=t.length;if(e<n)for(var o=e;o<n;o++)t.push("")}),u[e].push({type:"vert",start:i.length-1}))}function c(t){t.forEach(function(t){var e=[];i.forEach(function(o){var i=s.getFieldValue(o,t);e.push("object"===(void 0===i?"undefined":q(i))?JSON.stringify(i):i)}),r.push(e)})}return n.columnGroups?(t.forEach(function(t){a(t,0)}),o.forEach(function(t){r.push(t)})):(t.forEach(function(t){o.push(t.title),i.push(t.field)}),r.push(o)),n.rowGroups?e.forEach(function(t){!function t(e){var o=[];o.push(e.key),l.push(r.length),r.push(o),e.subGroups?e.subGroups.forEach(function(e){t(e)}):c(e.rows)}(t)}):c(e),function(){var t={},e={s:{c:0,r:0},e:{c:i.length,r:r.length}};XLSX.utils.sheet_add_aoa(t,r),t["!ref"]=XLSX.utils.encode_range(e);var n,s=(n=[],l.forEach(function(t){n.push({s:{r:t,c:0},e:{r:t,c:i.length-1}})}),u.forEach(function(t,e){t.forEach(function(t){"hoz"===t.type?n.push({s:{r:e,c:t.start},e:{r:e,c:t.end}}):e!=o.length-1&&n.push({s:{r:e,c:t.start},e:{r:o.length-1,c:t.start}})})}),n);return s.length&&(t["!merges"]=s),t}()}if(o.sheetOnly)i(c());else{if(o.sheets)for(var d in o.sheets)!0===o.sheets[d]?(a.SheetNames.push(d),a.Sheets[d]=c()):(a.SheetNames.push(d),this.table.modules.comms.send(o.sheets[d],"download","intercept",{type:"xlsx",options:{sheetOnly:!0},intercept:function(t){a.Sheets[d]=t}}));else a.SheetNames.push(r),a.Sheets[r]=c();i(function(t){for(var e=new ArrayBuffer(t.length),o=new Uint8Array(e),i=0;i!=t.length;++i)o[i]=255&t.charCodeAt(i);return e}(XLSX.write(a,{bookType:"xlsx",bookSST:!0,type:"binary"})),"application/octet-stream")}}},c.prototype.registerModule("download",y);var w=function(t){this.table=t,this.currentCell=!1,this.mouseClick=!1,this.recursionBlock=!1,this.invalidEdit=!1};w.prototype.initializeColumn=function(t){var e={editor:!1,blocked:!1,check:t.definition.editable,params:t.definition.editorParams||{}};switch(q(t.definition.editor)){case"string":"tick"===t.definition.editor&&(t.definition.editor="tickCross",console.warn("DEPRECATION WANRING - the tick editor has been depricated, please use the tickCross editor")),this.editors[t.definition.editor]?e.editor=this.editors[t.definition.editor]:console.warn("Editor Error - No such editor found: ",t.definition.editor);break;case"function":e.editor=t.definition.editor;break;case"boolean":!0===t.definition.editor&&("function"!=typeof t.definition.formatter?("tick"===t.definition.formatter&&(t.definition.formatter="tickCross",console.warn("DEPRECATION WANRING - the tick editor has been depricated, please use the tickCross editor")),this.editors[t.definition.formatter]?e.editor=this.editors[t.definition.formatter]:e.editor=this.editors.input):console.warn("Editor Error - Cannot auto lookup editor for a custom formatter: ",t.definition.formatter));}e.editor&&(t.modules.edit=e)},w.prototype.getCurrentCell=function(){return!!this.currentCell&&this.currentCell.getComponent()},w.prototype.clearEditor=function(){var t,e=this.currentCell;if(this.invalidEdit=!1,e){for(this.currentCell=!1,(t=e.getElement()).classList.remove("tabulator-validation-fail"),t.classList.remove("tabulator-editing");t.firstChild;)t.removeChild(t.firstChild);e.row.getElement().classList.remove("tabulator-row-editing")}},w.prototype.cancelEdit=function(){if(this.currentCell){var t=this.currentCell,e=this.currentCell.getComponent();this.clearEditor(),t.setValueActual(t.getValue()),t.column.cellEvents.cellEditCancelled&&t.column.cellEvents.cellEditCancelled.call(this.table,e),this.table.options.cellEditCancelled.call(this.table,e)}},w.prototype.bindEditor=function(t){var e=this,o=t.getElement();o.setAttribute("tabindex",0),o.addEventListener("click",function(t){o.classList.contains("tabulator-editing")||o.focus()}),o.addEventListener("mousedown",function(t){e.mouseClick=!0}),o.addEventListener("focus",function(o){e.recursionBlock||e.edit(t,o,!1)})},w.prototype.focusCellNoEvent=function(t){this.recursionBlock=!0,t.getElement().focus(),this.recursionBlock=!1},w.prototype.editCell=function(t,e){this.focusCellNoEvent(t),this.edit(t,!1,e)},w.prototype.edit=function(t,e,o){var i,n,s,r=this,a=!0,l=function(){},u=t.getElement();if(!this.currentCell){if(t.column.modules.edit.blocked)return this.mouseClick=!1,u.blur(),!1;switch(e&&e.stopPropagation(),q(t.column.modules.edit.check)){case"function":a=t.column.modules.edit.check(t.getComponent());break;case"boolean":a=t.column.modules.edit.check;}if(a||o){if(r.cancelEdit(),r.currentCell=t,n=t.getComponent(),this.mouseClick&&(this.mouseClick=!1,t.column.cellEvents.cellClick&&t.column.cellEvents.cellClick.call(this.table,e,n)),t.column.cellEvents.cellEditing&&t.column.cellEvents.cellEditing.call(this.table,n),r.table.options.cellEditing.call(this.table,n),s="function"==typeof t.column.modules.edit.params?t.column.modules.edit.params(n):t.column.modules.edit.params,!1===(i=t.column.modules.edit.editor.call(r,n,function(t){l=t},function(e){if(r.currentCell===t){var o=!0;t.column.modules.validate&&r.table.modExists("validate")&&(o=r.table.modules.validate.validate(t.column.modules.validate,t.getComponent(),e)),!0===o?(r.clearEditor(),t.setValue(e,!0),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(t)):(r.invalidEdit=!0,u.classList.add("tabulator-validation-fail"),r.focusCellNoEvent(t),l(),r.table.options.validationFailed.call(r.table,t.getComponent(),e,o))}},function(){r.currentCell===t&&(r.cancelEdit(),r.table.options.dataTree&&r.table.modExists("dataTree")&&r.table.modules.dataTree.checkForRestyle(t))},s)))return u.blur(),!1;if(!(i instanceof Node))return console.warn("Edit Error - Editor should return an instance of Node, the editor returned:",i),u.blur(),!1;for(u.classList.add("tabulator-editing"),t.row.getElement().classList.add("tabulator-row-editing");u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i),l();for(var c=u.children,d=0;d<c.length;d++)c[d].addEventListener("click",function(t){t.stopPropagation()});return!0}return this.mouseClick=!1,u.blur(),!1}this.invalidEdit||this.cancelEdit()},w.prototype.editors={input:function(t,e,o,i,n){var s=t.getValue(),r=document.createElement("input");function a(t){null==s&&""!==r.value||r.value!=s?o(r.value):i()}return r.setAttribute("type","text"),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",r.value=void 0!==s?s:"",e(function(){r.focus(),r.style.height="100%"}),r.addEventListener("change",a),r.addEventListener("blur",a),r.addEventListener("keydown",function(t){switch(t.keyCode){case 13:o(r.value);break;case 27:i();}}),r},textarea:function(t,e,o,i,n){var s=t.getValue(),r=String(null!==s&&"undefined"!==s?s:""),a=((r.match(/(?:\r\n|\r|\n)/g)||[]).length,document.createElement("textarea")),l=0;function u(e){null==s&&""!==a.value||a.value!=s?(o(a.value),setTimeout(function(){t.getRow().normalizeHeight()},300)):i()}return a.style.display="block",a.style.padding="2px",a.style.height="100%",a.style.width="100%",a.style.boxSizing="border-box",a.style.whiteSpace="pre-wrap",a.style.resize="none",a.value=r,e(function(){a.focus(),a.style.height="100%"}),a.addEventListener("change",u),a.addEventListener("blur",u),a.addEventListener("keyup",function(){a.style.height="";var e=a.scrollHeight;a.style.height=e+"px",e!=l&&(l=e,t.getRow().normalizeHeight())}),a.addEventListener("keydown",function(t){27==t.keyCode&&i()}),a},number:function(t,e,o,i,n){var s=t.getValue(),r=document.createElement("input");function a(){var t=r.value;isNaN(t)||""===t||(t=Number(t)),t!=s?o(t):i()}return r.setAttribute("type","number"),void 0!==n.max&&r.setAttribute("max",n.max),void 0!==n.min&&r.setAttribute("min",n.min),void 0!==n.step&&r.setAttribute("step",n.step),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",r.value=s,e(function(){r.focus(),r.style.height="100%",r.addEventListener("blur",function(t){a()})}),r.addEventListener("keydown",function(t){switch(t.keyCode){case 13:case 9:a();break;case 27:i();}}),r},range:function(t,e,o,i,n){var s=t.getValue(),r=document.createElement("input");function a(){var t=r.value;isNaN(t)||""===t||(t=Number(t)),t!=s?o(t):i()}return r.setAttribute("type","range"),void 0!==n.max&&r.setAttribute("max",n.max),void 0!==n.min&&r.setAttribute("min",n.min),void 0!==n.step&&r.setAttribute("step",n.step),r.style.padding="4px",r.style.width="100%",r.style.boxSizing="border-box",r.value=s,e(function(){r.focus(),r.style.height="100%"}),r.addEventListener("blur",function(t){a()}),r.addEventListener("keydown",function(t){switch(t.keyCode){case 13:case 9:a();break;case 27:i();}}),r},select:function(t,e,o,i,n){var s=this,r=t.getElement(),a=t.getValue(),l=document.createElement("input"),u=document.createElement("div"),d=[],h=[],p={},m=!0;function f(e,o){var i=[],s=[];function r(t){return(t={label:n.listItemFormatter?n.listItemFormatter(t.value,t.label):t.label,value:t.value,element:!1}).value===o&&g(t),i.push(t),s.push(t),t}if("function"==typeof e&&(e=e(t)),Array.isArray(e))e.forEach(function(t){var e;"object"===(void 0===t?"undefined":q(t))?t.options?(e={label:t.label,group:!0,element:!1},s.push(e),t.options.forEach(function(t){r(t)})):r(t):((e={label:n.listItemFormatter?n.listItemFormatter(t,t):t,value:t,element:!1}).value===o&&g(e),i.push(e),s.push(e))});else for(var a in e){var l={label:n.listItemFormatter?n.listItemFormatter(a,e[a]):e[a],value:a,element:!1};l.value===o&&g(l),i.push(l),s.push(l)}d=i,h=s}function g(t){p&&p.element&&p.element.classList.remove("active"),p=t,l.value="&nbsp;"===t.label?"":t.label,t.element&&t.element.classList.add("active")}function b(){E(),a!==p.value?(a=p.value,o(p.value)):i()}function v(){E(),i()}function y(){var e,o;!0===n.values?f((e={},o=t.getColumn()._getSelf(),s.table.getData().forEach(function(t){var i=o.getFieldValue(t);null!=i&&""!==i&&(e[i]=!0)}),Object.keys(e)),a):f(n.values||[],a)}function w(){if(!u.parentNode){y(),function(){for(;u.firstChild;)u.removeChild(u.firstChild);h.forEach(function(t){var e=t.element;e||(t.group?((e=document.createElement("div")).classList.add("tabulator-edit-select-list-group"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label):((e=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),e.tabIndex=0,e.innerHTML=""===t.label?"&nbsp;":t.label,e.addEventListener("click",function(){g(t),b()}),t===p&&e.classList.add("active")),e.addEventListener("mousedown",function(){m=!1,setTimeout(function(){m=!0},10)}),t.element=e),u.appendChild(e)})}();var t=c.prototype.helpers.elOffset(r);u.style.minWidth=r.offsetWidth+"px",u.style.top=t.top+r.offsetHeight+"px",u.style.left=t.left+"px",document.body.appendChild(u)}}function E(){u.parentNode&&u.parentNode.removeChild(u)}return(Array.isArray(n)||!Array.isArray(n)&&"object"===(void 0===n?"undefined":q(n))&&!n.values)&&(console.warn("DEPRECATION WANRING - values for the select editor must now be passed into the values property of the editorParams object, not as the editorParams object"),n={values:n}),l.setAttribute("type","text"),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",l.readOnly=!0,l.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:t.stopImmediatePropagation(),t.stopPropagation(),(e=d.indexOf(p))>0&&g(d[e-1]);break;case 40:t.stopImmediatePropagation(),t.stopPropagation(),(e=d.indexOf(p))<d.length-1&&g(-1==e?d[0]:d[e+1]);break;case 13:b();break;case 27:v();}}),l.addEventListener("blur",function(t){m&&v()}),l.addEventListener("focus",function(t){w()}),(u=document.createElement("div")).classList.add("tabulator-edit-select-list"),y(),e(function(){l.style.height="100%",l.focus()}),l},autocomplete:function(t,e,o,i,n){var s=this,r=t.getElement(),a=t.getValue(),l=document.createElement("input"),u=document.createElement("div"),d=[],h=[],p=[],m={},f=!0;function g(t,e){var o=[];n.searchFunc?o=n.searchFunc(t,p):""===t?n.showListOnEmpty&&d.forEach(function(t){o.push(t)}):d.forEach(function(e){null===e.value&&void 0===e.value||(String(e.value).toLowerCase().indexOf(String(t).toLowerCase())>-1||String(e.title).toLowerCase().indexOf(String(t).toLowerCase())>-1)&&o.push(e)}),h=o,function(t){var e=!1;for(;u.firstChild;)u.removeChild(u.firstChild);h.forEach(function(o){var i=o.element;i||((i=document.createElement("div")).classList.add("tabulator-edit-select-list-item"),i.tabIndex=0,i.innerHTML=o.title,i.addEventListener("click",function(){b(o),v()}),i.addEventListener("mousedown",function(){f=!1,setTimeout(function(){f=!0},10)}),o.element=i,t&&o.value==a&&(l.value=o.title,o.element.classList.add("active"),e=!0),o===m&&(o.element.classList.add("active"),e=!0)),u.appendChild(i)}),e||b(!1)}(e)}function b(t,e){m&&m.element&&m.element.classList.remove("active"),m=t,t&&t.element&&t.element.classList.add("active")}function v(){w(),m?a!==m.value?(a=m.value,l.value=m.value,o(l.value)):i():n.freetext?(a=l.value,o(l.value)):n.allowEmpty&&""===l.value?(a=l.value,o(l.value)):i()}function y(){if(!u.parentNode){for(;u.firstChild;)u.removeChild(u.firstChild);!0===n.values?(o={},i=t.getColumn()._getSelf(),s.table.getData().forEach(function(t){var e=i.getFieldValue(t);null!=e&&""!==e&&(o[e]=!0)}),p=Object.keys(o)):p=n.values||[],function(t,e){var o=[];if(Array.isArray(t))t.forEach(function(t){var i={title:n.listItemFormatter?n.listItemFormatter(t,t):t,value:t,element:!1};i.value===e&&b(i),o.push(i)});else for(var i in t){var s={title:n.listItemFormatter?n.listItemFormatter(i,t[i]):t[i],value:i,element:!1};s.value===e&&b(s),o.push(s)}d=o}(p,a);var e=c.prototype.helpers.elOffset(r);u.style.minWidth=r.offsetWidth+"px",u.style.top=e.top+r.offsetHeight+"px",u.style.left=e.left+"px",document.body.appendChild(u)}var o,i}function w(){u.parentNode&&u.parentNode.removeChild(u)}return l.setAttribute("type","text"),l.style.padding="4px",l.style.width="100%",l.style.boxSizing="border-box",l.addEventListener("keydown",function(t){var e;switch(t.keyCode){case 38:t.stopImmediatePropagation(),t.stopPropagation(),b((e=h.indexOf(m))>0&&h[e-1]);break;case 40:t.stopImmediatePropagation(),t.stopPropagation(),(e=h.indexOf(m))<h.length-1&&b(-1==e?h[0]:h[e+1]);break;case 13:v();break;case 27:w(),i();}}),l.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 37:case 39:case 40:case 13:case 27:break;default:g(l.value);}}),l.addEventListener("blur",function(t){f&&v()}),l.addEventListener("focus",function(t){y(),l.value=a,g(a,!0)}),(u=document.createElement("div")).classList.add("tabulator-edit-select-list"),e(function(){l.style.height="100%",l.focus()}),l},star:function(t,e,o,i,n){var s=this,r=t.getElement(),a=t.getValue(),l=r.getElementsByTagName("svg").length||5,u=r.getElementsByTagName("svg")[0]?r.getElementsByTagName("svg")[0].getAttribute("width"):14,c=[],d=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");function p(t){c.forEach(function(e,o){o<t?("ie"==s.table.browser?e.setAttribute("class","tabulator-star-active"):e.classList.replace("tabulator-star-inactive","tabulator-star-active"),e.innerHTML="<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>"):("ie"==s.table.browser?e.setAttribute("class","tabulator-star-inactive"):e.classList.replace("tabulator-star-active","tabulator-star-inactive"),e.innerHTML="<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>")})}function m(t){var e=h.cloneNode(!0);c.push(e),e.addEventListener("mouseover",function(e){e.stopPropagation(),p(t)}),e.addEventListener("click",function(e){e.stopPropagation(),o(t)}),d.appendChild(e)}function f(t){a=t,p(t)}r.style.whiteSpace="nowrap",r.style.overflow="hidden",r.style.textOverflow="ellipsis",d.style.verticalAlign="middle",d.style.display="inline-block",d.style.padding="4px",h.setAttribute("width",u),h.setAttribute("height",u),h.setAttribute("viewBox","0 0 512 512"),h.setAttribute("xml:space","preserve"),h.style.padding="0 1px";for(var g=1;g<=l;g++)m(g);return p(a=Math.min(parseInt(a),l)),d.addEventListener("mouseover",function(t){p(0)}),d.addEventListener("click",function(t){o(0)}),r.addEventListener("blur",function(t){i()}),r.addEventListener("keydown",function(t){switch(t.keyCode){case 39:f(a+1);break;case 37:f(a-1);break;case 13:o(a);break;case 27:i();}}),d},progress:function(t,e,o,i,n){var s,r,a=t.getElement(),l=void 0===n.max?a.getElementsByTagName("div")[0].getAttribute("max")||100:n.max,u=void 0===n.min?a.getElementsByTagName("div")[0].getAttribute("min")||0:n.min,c=(l-u)/100,d=t.getValue()||0,h=document.createElement("div"),p=document.createElement("div");function m(){var t=c*Math.round(p.offsetWidth/(a.clientWidth/100))+u;o(t),a.setAttribute("aria-valuenow",t),a.setAttribute("aria-label",d)}return h.style.position="absolute",h.style.right="0",h.style.top="0",h.style.bottom="0",h.style.width="5px",h.classList.add("tabulator-progress-handle"),p.style.display="inline-block",p.style.position="absolute",p.style.top="8px",p.style.bottom="8px",p.style.left="4px",p.style.marginRight="4px",p.style.backgroundColor="#488CE9",p.style.maxWidth="100%",p.style.minWidth="0%",a.style.padding="0 4px",d=Math.min(parseFloat(d),l),d=Math.max(parseFloat(d),u),d=100-Math.round((d-u)/c),p.style.right=d+"%",a.setAttribute("aria-valuemin",u),a.setAttribute("aria-valuemax",l),p.appendChild(h),h.addEventListener("mousedown",function(t){s=t.screenX,r=p.offsetWidth}),h.addEventListener("mouseover",function(){h.style.cursor="ew-resize"}),a.addEventListener("mousemove",function(t){s&&(p.style.width=r+t.screenX-s+"px")}),a.addEventListener("mouseup",function(t){s&&(t.stopPropagation(),t.stopImmediatePropagation(),s=!1,r=!1,m())}),a.addEventListener("keydown",function(t){switch(t.keyCode){case 39:p.style.width=p.clientWidth+a.clientWidth/100+"px";break;case 37:p.style.width=p.clientWidth-a.clientWidth/100+"px";break;case 13:m();break;case 27:i();}}),a.addEventListener("blur",function(){i()}),p},tickCross:function(t,e,o,i,n){var s=t.getValue(),r=document.createElement("input"),a=n.tristate,l=void 0===n.indeterminateValue?null:n.indeterminateValue,u=!1;function c(t){return a?t?u?l:r.checked:r.checked&&!u?(r.checked=!1,r.indeterminate=!0,u=!0,l):(u=!1,r.checked):r.checked}return r.setAttribute("type","checkbox"),r.style.marginTop="5px",r.style.boxSizing="border-box",r.value=s,!a||void 0!==s&&s!==l&&""!==s||(u=!0,r.indeterminate=!0),"firefox"!=this.table.browser&&e(function(){r.focus()}),r.checked=!0===s||"true"===s||"True"===s||1===s,r.addEventListener("change",function(t){o(c())}),r.addEventListener("blur",function(t){o(c(!0))}),r.addEventListener("keydown",function(t){13==t.keyCode&&o(c()),27==t.keyCode&&i()}),r}},c.prototype.registerModule("edit",w);var E=function(t){this.table=t,this.filterList=[],this.headerFilters={},this.headerFilterElements=[],this.headerFilterColumns=[],this.changed=!1};E.prototype.initializeColumn=function(t,e){var o,i=this,n=t.getField();t.modules.filter={success:function(e){var s,r="input"==t.modules.filter.tagType&&"text"==t.modules.filter.attrType||"textarea"==t.modules.filter.tagType?"partial":"match",a="";if(void 0===o||o!==e){if(o=e,t.modules.filter.emptyFunc(e))delete i.headerFilters[n];else{switch(t.modules.filter.value=e,q(t.definition.headerFilterFunc)){case"string":i.filters[t.definition.headerFilterFunc]?(a=t.definition.headerFilterFunc,s=function(o){return i.filters[t.definition.headerFilterFunc](e,t.getFieldValue(o))}):console.warn("Header Filter Error - Matching filter function not found: ",t.definition.headerFilterFunc);break;case"function":a=s=function(o){var i=t.definition.headerFilterFuncParams||{},n=t.getFieldValue(o);return i="function"==typeof i?i(e,n,o):i,t.definition.headerFilterFunc(e,n,o,i)};}if(!s)switch(r){case"partial":s=function(o){return String(t.getFieldValue(o)).toLowerCase().indexOf(String(e).toLowerCase())>-1},a="like";break;default:s=function(o){return t.getFieldValue(o)==e},a="=";}i.headerFilters[n]={value:e,func:s,type:a}}i.changed=!0,i.table.rowManager.filterRefresh()}},attrType:!1,tagType:!1,emptyFunc:!1},this.generateHeaderFilterElement(t)},E.prototype.generateHeaderFilterElement=function(t,e){var o,i,n,s,r,a,l,u=this,c=t.modules.filter.success,d=t.getField();if(t.modules.filter.headerElement&&t.modules.filter.headerElement.parentNode){var h=t.modules.filter.headerElement.parentNode,p=u.headerFilterElements.indexOf(h);p>=0&&u.headerFilterElements.splice(p,1);var m=u.headerFilterColumns.indexOf(m);m>=0&&u.headerFilterColumns.splice(m,1),t.contentElement.removeChild(h)}if(d){switch(t.modules.filter.emptyFunc=t.definition.headerFilterEmptyCheck||function(t){return!t&&"0"!==t},(o=document.createElement("div")).classList.add("tabulator-header-filter"),q(t.definition.headerFilter)){case"string":u.table.modules.edit.editors[t.definition.headerFilter]?(i=u.table.modules.edit.editors[t.definition.headerFilter],"tick"!==t.definition.headerFilter&&"tickCross"!==t.definition.headerFilter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):console.warn("Filter Error - Cannot build header filter, No such editor found: ",t.definition.editor);break;case"function":i=t.definition.headerFilter;break;case"boolean":t.modules.edit&&t.modules.edit.editor?i=t.modules.edit.editor:t.definition.formatter&&u.table.modules.edit.editors[t.definition.formatter]?(i=u.table.modules.edit.editors[t.definition.formatter],"tick"!==t.definition.formatter&&"tickCross"!==t.definition.formatter||t.definition.headerFilterEmptyCheck||(t.modules.filter.emptyFunc=function(t){return!0!==t&&!1!==t})):i=u.table.modules.edit.editors.input;}if(i){if(s={getValue:function(){return void 0!==e?e:""},getField:function(){return t.definition.field},getElement:function(){return o},getColumn:function(){return t.getComponent()},getRow:function(){return{normalizeHeight:function(){}}}},l="function"==typeof(l=t.definition.headerFilterParams||{})?l.call(u.table):l,!(n=i.call(this.table.modules.edit,s,function(){},c,function(){},l)))return void console.warn("Filter Error - Cannot add filter to "+d+" column, editor returned a value of false");if(!(n instanceof Node))return void console.warn("Filter Error - Cannot add filter to "+d+" column, editor should return an instance of Node, the editor returned:",n);d?u.table.modules.localize.bind("headerFilters|columns|"+t.definition.field,function(t){n.setAttribute("placeholder",void 0!==t&&t?t:u.table.modules.localize.getText("headerFilters|default"))}):u.table.modules.localize.bind("headerFilters|default",function(t){n.setAttribute("placeholder",void 0!==u.column.definition.headerFilterPlaceholder&&u.column.definition.headerFilterPlaceholder?u.column.definition.headerFilterPlaceholder:t)}),n.addEventListener("click",function(t){t.stopPropagation(),n.focus()}),r=!1,a=function(t){r&&clearTimeout(r),r=setTimeout(function(){c(n.value)},300)},t.modules.filter.headerElement=n,t.modules.filter.attrType=n.hasAttribute("type")?n.getAttribute("type").toLowerCase():"",t.modules.filter.tagType=n.tagName.toLowerCase(),!1!==t.definition.headerFilterLiveFilter&&("autocomplete"===t.definition.headerFilter||"autocomplete"===t.definition.editor&&!0===t.definition.headerFilter||(n.addEventListener("keyup",a),n.addEventListener("search",a),"number"==t.modules.filter.attrType&&n.addEventListener("change",function(t){c(n.value)}),"text"==t.modules.filter.attrType&&"ie"!==this.table.browser&&n.setAttribute("type","search")),"input"!=t.modules.filter.tagType&&"select"!=t.modules.filter.tagType&&"textarea"!=t.modules.filter.tagType||n.addEventListener("mousedown",function(t){t.stopPropagation()})),o.appendChild(n),t.contentElement.appendChild(o),u.headerFilterElements.push(n),u.headerFilterColumns.push(t)}}else console.warn("Filter Error - Cannot add header filter, column has no field set:",t.definition.title)},E.prototype.hideHeaderFilterElements=function(){this.headerFilterElements.forEach(function(t){t.style.display="none"})},E.prototype.showHeaderFilterElements=function(){this.headerFilterElements.forEach(function(t){t.style.display=""})},E.prototype.setHeaderFilterFocus=function(t){t.modules.filter&&t.modules.filter.headerElement?t.modules.filter.headerElement.focus():console.warn("Column Filter Focus Error - No header filter set on column:",t.getField())},E.prototype.setHeaderFilterValue=function(t,e){t&&(t.modules.filter&&t.modules.filter.headerElement?(this.generateHeaderFilterElement(t,e),t.modules.filter.success(e)):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},E.prototype.reloadHeaderFilter=function(t){t&&(t.modules.filter&&t.modules.filter.headerElement?this.generateHeaderFilterElement(t,t.modules.filter.value):console.warn("Column Filter Error - No header filter set on column:",t.getField()))},E.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},E.prototype.setFilter=function(t,e,o){this.filterList=[],Array.isArray(t)||(t=[{field:t,type:e,value:o}]),this.addFilter(t)},E.prototype.addFilter=function(t,e,o){var i=this;Array.isArray(t)||(t=[{field:t,type:e,value:o}]),t.forEach(function(t){(t=i.findFilter(t))&&(i.filterList.push(t),i.changed=!0)}),this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},E.prototype.findFilter=function(t){var e,o=this;if(Array.isArray(t))return this.findSubFilters(t);var i=!1;return"function"==typeof t.field?i=function(e){return t.field(e,t.type||{})}:o.filters[t.type]?i=(e=o.table.columnManager.getColumnByField(t.field))?function(i){return o.filters[t.type](t.value,e.getFieldValue(i))}:function(e){return o.filters[t.type](t.value,e[t.field])}:console.warn("Filter Error - No such filter type found, ignoring: ",t.type),t.func=i,!!t.func&&t},E.prototype.findSubFilters=function(t){var e=this,o=[];return t.forEach(function(t){(t=e.findFilter(t))&&o.push(t)}),!!o.length&&o},E.prototype.getFilters=function(t,e){var o=[];return t&&(o=this.getHeaderFilters()),this.filterList.forEach(function(t){o.push({field:t.field,type:t.type,value:t.value})}),e&&o.forEach(function(t){"function"==typeof t.type&&(t.type="function")}),o},E.prototype.getHeaderFilters=function(){var t=[];for(var e in this.headerFilters)t.push({field:e,type:this.headerFilters[e].type,value:this.headerFilters[e].value});return t},E.prototype.removeFilter=function(t,e,o){var i=this;Array.isArray(t)||(t=[{field:t,type:e,value:o}]),t.forEach(function(t){var e=-1;(e="object"==q(t.field)?i.filterList.findIndex(function(e){return t===e}):i.filterList.findIndex(function(e){return t.field===e.field&&t.type===e.type&&t.value===e.value}))>-1?(i.filterList.splice(e,1),i.changed=!0):console.warn("Filter Error - No matching filter type found, ignoring: ",t.type)}),this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},E.prototype.clearFilter=function(t){this.filterList=[],t&&this.clearHeaderFilter(),this.changed=!0,this.table.options.persistentFilter&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("filter")},E.prototype.clearHeaderFilter=function(){var t=this;this.headerFilters={},this.headerFilterColumns.forEach(function(e){e.modules.filter.value=null,t.reloadHeaderFilter(e)}),this.changed=!0},E.prototype.search=function(t,e,o,i){var n=this,s=[],r=[];return Array.isArray(e)||(e=[{field:e,type:o,value:i}]),e.forEach(function(t){(t=n.findFilter(t))&&r.push(t)}),this.table.rowManager.rows.forEach(function(e){var o=!0;r.forEach(function(t){n.filterRecurse(t,e.getData())||(o=!1)}),o&&s.push("data"===t?e.getData("data"):e.getComponent())}),s},E.prototype.filter=function(t,e){var o=this,i=[],n=[];return o.table.options.dataFiltering&&o.table.options.dataFiltering.call(o.table,o.getFilters()),o.table.options.ajaxFiltering||!o.filterList.length&&!Object.keys(o.headerFilters).length?i=t.slice(0):t.forEach(function(t){o.filterRow(t)&&i.push(t)}),o.table.options.dataFiltered&&(i.forEach(function(t){n.push(t.getComponent())}),o.table.options.dataFiltered.call(o.table,o.getFilters(),n)),i},E.prototype.filterRow=function(t,e){var o=this,i=!0,n=t.getData();for(var s in o.filterList.forEach(function(t){o.filterRecurse(t,n)||(i=!1)}),o.headerFilters)o.headerFilters[s].func(n)||(i=!1);return i},E.prototype.filterRecurse=function(t,e){var o=this,i=!1;return Array.isArray(t)?t.forEach(function(t){o.filterRecurse(t,e)&&(i=!0)}):i=t.func(e),i},E.prototype.filters={"=":function(t,e){return e==t},"<":function(t,e){return e<t},"<=":function(t,e){return e<=t},">":function(t,e){return e>t},">=":function(t,e){return e>=t},"!=":function(t,e){return e!=t},regex:function(t,e){return"string"==typeof t&&(t=new RegExp(t)),t.test(e)},like:function(t,e){return null==t?e===t:null!=e&&String(e).toLowerCase().indexOf(t.toLowerCase())>-1},in:function(t,e){return Array.isArray(t)?t.indexOf(e)>-1:(console.warn("Filter Error - filter value is not an array:",t),!1)}},c.prototype.registerModule("filter",E);var C=function(t){this.table=t};C.prototype.initializeColumn=function(t){var e={params:t.definition.formatterParams||{}};switch(q(t.definition.formatter)){case"string":"tick"===t.definition.formatter&&(t.definition.formatter="tickCross",void 0===e.params.crossElement&&(e.params.crossElement=!1),console.warn("DEPRECATION WANRING - the tick formatter has been depricated, please use the tickCross formatter with the crossElement param set to false")),this.formatters[t.definition.formatter]?e.formatter=this.formatters[t.definition.formatter]:(console.warn("Formatter Error - No such formatter found: ",t.definition.formatter),e.formatter=this.formatters.plaintext);break;case"function":e.formatter=t.definition.formatter;break;default:e.formatter=this.formatters.plaintext;}t.modules.format=e},C.prototype.cellRendered=function(t){t.column.modules.format.renderedCallback&&t.column.modules.format.renderedCallback()},C.prototype.formatValue=function(t){var e=t.getComponent(),o="function"==typeof t.column.modules.format.params?t.column.modules.format.params(e):t.column.modules.format.params;return t.column.modules.format.formatter.call(this,e,o,function(e){t.column.modules.format.renderedCallback=e})},C.prototype.sanitizeHTML=function(t){if(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})}return t},C.prototype.emptyToSpace=function(t){return null==t?"&nbsp":t},C.prototype.getFormatter=function(t){switch(void 0===t?"undefined":q(t)){case"string":this.formatters[t]?t=this.formatters[t]:(console.warn("Formatter Error - No such formatter found: ",t),t=this.formatters.plaintext);break;case"function":t=t;break;default:t=this.formatters.plaintext;}return t},C.prototype.formatters={plaintext:function(t,e,o){return this.emptyToSpace(this.sanitizeHTML(t.getValue()))},html:function(t,e,o){return t.getValue()},textarea:function(t,e,o){return t.getElement().style.whiteSpace="pre-wrap",this.emptyToSpace(this.sanitizeHTML(t.getValue()))},money:function(t,e,o){var i,n,s,r,a=parseFloat(t.getValue()),l=e.decimal||".",u=e.thousand||",",c=e.symbol||"",d=!!e.symbolAfter,h=void 0!==e.precision?e.precision:2;if(isNaN(a))return this.emptyToSpace(this.sanitizeHTML(t.getValue()));for(i=!1!==h?a.toFixed(h):a,n=(i=String(i).split("."))[0],s=i.length>1?l+i[1]:"",r=/(\d+)(\d{3})/;r.test(n);)n=n.replace(r,"$1"+u+"$2");return d?n+s+c:c+n+s},link:function(t,e,o){var i=this.sanitizeHTML(t.getValue()),n=e.urlPrefix||"",s=this.emptyToSpace(i),r=document.createElement("a");if(e.labelField&&(s=t.getData()[e.labelField]),e.label)switch(q(e.label)){case"string":s=e.label;break;case"function":s=e.label(t);}if(e.urlField&&(i=t.getData()[e.urlField]),e.url)switch(q(e.url)){case"string":i=e.url;break;case"function":i=e.url(t);}return r.setAttribute("href",n+i),e.target&&r.setAttribute("target",e.target),r.innerHTML=this.emptyToSpace(s),r},image:function(t,e,o){var i=document.createElement("img");switch(i.setAttribute("src",t.getValue()),q(e.height)){case"number":i.style.height=e.height+"px";break;case"string":i.style.height=e.height;}switch(q(e.width)){case"number":i.style.width=e.width+"px";break;case"string":i.style.width=e.width;}return i.addEventListener("load",function(){t.getRow().normalizeHeight()}),i},tickCross:function(t,e,o){var i=t.getValue(),n=t.getElement(),s=e.allowEmpty,r=e.allowTruthy,a=void 0!==e.tickElement?e.tickElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>",l=void 0!==e.crossElement?e.crossElement:"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>";return r&&i||!0===i||"true"===i||"True"===i||1===i||"1"===i?(n.setAttribute("aria-checked",!0),a||""):!s||"null"!==i&&""!==i&&null!=i?(n.setAttribute("aria-checked",!1),l||""):(n.setAttribute("aria-checked","mixed"),"")},datetime:function(t,e,o){var i=e.inputFormat||"YYYY-MM-DD hh:mm:ss",n=e.outputFormat||"DD/MM/YYYY hh:mm:ss",s=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",r=t.getValue(),a=moment(r,i);return a.isValid()?a.format(n):!0===s?r:"function"==typeof s?s(r):s},datetimediff:function(t,e,o){var i=e.inputFormat||"YYYY-MM-DD hh:mm:ss",n=void 0!==e.invalidPlaceholder?e.invalidPlaceholder:"",s=void 0!==e.suffix&&e.suffix,r=void 0!==e.unit?e.unit:void 0,a=void 0!==e.humanize&&e.humanize,l=void 0!==e.date?e.date:moment(),u=t.getValue(),c=moment(u,i);return c.isValid()?a?moment.duration(c.diff(l)).humanize(s):c.diff(l,r)+(s?" "+s:""):!0===n?u:"function"==typeof n?n(u):n},lookup:function(t,e,o){var i=t.getValue();return void 0===e[i]?(console.warn("Missing display value for "+i),i):e[i]},star:function(t,e,o){var i=t.getValue(),n=t.getElement(),s=e&&e.stars?e.stars:5,r=document.createElement("span"),a=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.verticalAlign="middle",a.setAttribute("width","14"),a.setAttribute("height","14"),a.setAttribute("viewBox","0 0 512 512"),a.setAttribute("xml:space","preserve"),a.style.padding="0 1px",i=parseInt(i)<s?parseInt(i):s;for(var l=1;l<=s;l++){var u=a.cloneNode(!0);u.innerHTML=l<=i?"<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>":"<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>",r.appendChild(u)}return n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.textOverflow="ellipsis",n.setAttribute("aria-label",i),r},progress:function(t,e,o){var i,n,s,r,a,l=this.sanitizeHTML(t.getValue())||0,u=t.getElement(),c=e&&e.max?e.max:100,d=e&&e.min?e.min:0,h=e&&e.legendAlign?e.legendAlign:"center";switch(n=parseFloat(l)<=c?parseFloat(l):c,n=parseFloat(n)>=d?parseFloat(n):d,i=(c-d)/100,n=Math.round((n-d)/i),q(e.color)){case"string":s=e.color;break;case"function":s=e.color(l);break;case"object":if(Array.isArray(e.color)){var p=100/e.color.length,m=Math.floor(n/p);m=Math.min(m,e.color.length-1),m=Math.max(m,0),s=e.color[m];break}default:s="#2DC214";}switch(q(e.legend)){case"string":r=e.legend;break;case"function":r=e.legend(l);break;case"boolean":r=l;break;default:r=!1;}switch(q(e.legendColor)){case"string":a=e.legendColor;break;case"function":a=e.legendColor(l);break;case"object":if(Array.isArray(e.legendColor)){p=100/e.legendColor.length,m=Math.floor(n/p);m=Math.min(m,e.legendColor.length-1),m=Math.max(m,0),a=e.legendColor[m]}break;default:a="#000";}return u.style.minWidth="30px",u.style.position="relative",u.setAttribute("aria-label",n),"<div style='position:absolute; top:8px; bottom:8px; left:4px; right:4px;'  data-max='"+c+"' data-min='"+d+"'><div style='position:relative; height:100%; width:calc("+n+"%); background-color:"+s+"; display:inline-block;'></div></div>"+(r?"<div style='position:absolute; top:4px; left:0; text-align:"+h+"; width:100%; color:"+a+";'>"+r+"</div>":"")},color:function(t,e,o){return t.getElement().style.backgroundColor=this.sanitizeHTML(t.getValue()),""},buttonTick:function(t,e,o){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>"},buttonCross:function(t,e,o){return"<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>"},rownum:function(t,e,o){return this.table.rowManager.activeRows.indexOf(t.getRow()._getSelf())+1},handle:function(t,e,o){return t.getElement().classList.add("tabulator-row-handle"),"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>"},responsiveCollapse:function(t,e,o){var i=!1,n=document.createElement("div");function s(e){var o=t.getRow().getElement().getElementsByClassName("tabulator-responsive-collapse")[0];(i=e)?(n.classList.add("open"),o&&(o.style.display="")):(n.classList.remove("open"),o&&(o.style.display="none"))}return n.classList.add("tabulator-responsive-collapse-toggle"),n.innerHTML="<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>",t.getElement().classList.add("tabulator-row-handle"),this.table.options.responsiveLayoutCollapseStartOpen&&(i=!0),n.addEventListener("click",function(){s(!i)}),s(i),n}},c.prototype.registerModule("format",C);var x=function(t){this.table=t,this.leftColumns=[],this.rightColumns=[],this.leftMargin=0,this.rightMargin=0,this.initializationMode="left",this.active=!1};x.prototype.reset=function(){this.initializationMode="left",this.leftColumns=[],this.rightColumns=[],this.active=!1},x.prototype.initializeColumn=function(t){var e={margin:0,edge:!1};t.definition.frozen?t.parent.isGroup?console.warn("Frozen Column Error - Grouped columns cannot be frozen"):t.isGroup?console.warn("Frozen Column Error - Column Groups cannot be frozen"):(e.position=this.initializationMode,"left"==this.initializationMode?this.leftColumns.push(t):this.rightColumns.unshift(t),this.active=!0,t.modules.frozen=e):this.initializationMode="right"},x.prototype.layout=function(){var t=this,e=(this.table.rowManager.element,0);t.active&&(t.leftMargin=t._calcSpace(t.leftColumns,t.leftColumns.length),t.table.columnManager.headersElement.style.marginLeft=t.leftMargin+"px",t.rightMargin=t._calcSpace(t.rightColumns,t.rightColumns.length),t.table.columnManager.element.style.paddingRight=t.rightMargin+"px",t.table.rowManager.activeRows.forEach(function(e){t.layoutRow(e)}),t.table.modExists("columnCalcs")&&(t.table.modules.columnCalcs.topInitialized&&t.table.modules.columnCalcs.topRow&&t.layoutRow(t.table.modules.columnCalcs.topRow),t.table.modules.columnCalcs.botInitialized&&t.table.modules.columnCalcs.botRow&&t.layoutRow(t.table.modules.columnCalcs.botRow)),t.leftColumns.forEach(function(e,o){e.modules.frozen.margin=t._calcSpace(t.leftColumns,o)+t.table.columnManager.scrollLeft,o==t.leftColumns.length-1?e.modules.frozen.edge=!0:e.modules.frozen.edge=!1,t.layoutColumn(e)}),e=t.table.rowManager.element.clientWidth+t.table.columnManager.scrollLeft,t.rightColumns.forEach(function(o,i){o.modules.frozen.margin=e-t._calcSpace(t.rightColumns,i+1),i==t.rightColumns.length-1?o.modules.frozen.edge=!0:o.modules.frozen.edge=!1,t.layoutColumn(o)}),this.table.rowManager.tableElement.style.marginRight=this.rightMargin+"px")},x.prototype.layoutColumn=function(t){var e=this;e.layoutElement(t.getElement(),t),t.cells.forEach(function(o){e.layoutElement(o.getElement(),t)})},x.prototype.layoutRow=function(t){t.getElement().style.paddingLeft=this.leftMargin+"px"},x.prototype.layoutElement=function(t,e){e.modules.frozen&&(t.style.position="absolute",t.style.left=e.modules.frozen.margin+"px",t.classList.add("tabulator-frozen"),e.modules.frozen.edge&&t.classList.add("tabulator-frozen-"+e.modules.frozen.position))},x.prototype._calcSpace=function(t,e){for(var o=0,i=0;i<e;i++)t[i].visible&&(o+=t[i].getWidth());return o},c.prototype.registerModule("frozenColumns",x);var R=function(t){this.table=t,this.topElement=document.createElement("div"),this.rows=[],this.displayIndex=0};R.prototype.initialize=function(){this.rows=[],this.topElement.classList.add("tabulator-frozen-rows-holder"),this.table.columnManager.getElement().insertBefore(this.topElement,this.table.columnManager.headersElement.nextSibling)},R.prototype.setDisplayIndex=function(t){this.displayIndex=t},R.prototype.getDisplayIndex=function(){return this.displayIndex},R.prototype.isFrozen=function(){return!!this.rows.length},R.prototype.getRows=function(t){var e=t.slice(0);return this.rows.forEach(function(t){var o=e.indexOf(t);o>-1&&e.splice(o,1)}),e},R.prototype.freezeRow=function(t){t.modules.frozen?console.warn("Freeze Error - Row is already frozen"):(t.modules.frozen=!0,this.topElement.appendChild(t.getElement()),t.initialize(),t.normalizeHeight(),this.table.rowManager.adjustTableSize(),this.rows.push(t),this.table.rowManager.refreshActiveData("display"),this.styleRows())},R.prototype.unfreezeRow=function(t){var e=this.rows.indexOf(t);if(t.modules.frozen){t.modules.frozen=!1;var o=t.getElement();o.parentNode.removeChild(o),this.table.rowManager.adjustTableSize(),this.rows.splice(e,1),this.table.rowManager.refreshActiveData("display"),this.rows.length&&this.styleRows()}else console.warn("Freeze Error - Row is already unfrozen")},R.prototype.styleRows=function(t){var e=this;this.rows.forEach(function(t,o){e.table.rowManager.styleRow(t,o)})},c.prototype.registerModule("frozenRows",R);var D=function(t){this._group=t,this.type="GroupComponent"};D.prototype.getKey=function(){return this._group.key},D.prototype.getElement=function(){return this._group.element},D.prototype.getRows=function(){return this._group.getRows(!0)},D.prototype.getSubGroups=function(){return this._group.getSubGroups(!0)},D.prototype.getParentGroup=function(){return!!this._group.parent&&this._group.parent.getComponent()},D.prototype.getVisibility=function(){return this._group.visible},D.prototype.show=function(){this._group.show()},D.prototype.hide=function(){this._group.hide()},D.prototype.toggle=function(){this._group.toggleVisibility()},D.prototype._getSelf=function(){return this._group},D.prototype.getTable=function(){return this._group.groupManager.table};var M=function(t,e,o,i,n,s,r){this.groupManager=t,this.parent=e,this.key=i,this.level=o,this.field=n,this.hasSubGroups=o<t.groupIDLookups.length-1,this.addRow=this.hasSubGroups?this._addRowToGroup:this._addRow,this.type="group",this.old=r,this.rows=[],this.groups=[],this.groupList=[],this.generator=s,this.elementContents=!1,this.height=0,this.outerHeight=0,this.initialized=!1,this.calcs={},this.initialized=!1,this.modules={},this.visible=r?r.visible:void 0!==t.startOpen[o]?t.startOpen[o]:t.startOpen[0],this.createElements(),this.addBindings(),this.createValueGroups()};M.prototype.createElements=function(){this.element=document.createElement("div"),this.element.classList.add("tabulator-row"),this.element.classList.add("tabulator-group"),this.element.classList.add("tabulator-group-level-"+this.level),this.element.setAttribute("role","rowgroup"),this.arrowElement=document.createElement("div"),this.arrowElement.classList.add("tabulator-arrow")},M.prototype.createValueGroups=function(){var t=this,e=this.level+1;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]&&this.groupManager.allowedValues[e].forEach(function(o){t._createGroup(o,e)})},M.prototype.addBindings=function(){var t,e,o,i=this;i.groupManager.table.options.groupClick&&i.element.addEventListener("click",function(t){i.groupManager.table.options.groupClick(t,i.getComponent())}),i.groupManager.table.options.groupDblClick&&i.element.addEventListener("dblclick",function(t){i.groupManager.table.options.groupDblClick(t,i.getComponent())}),i.groupManager.table.options.groupContext&&i.element.addEventListener("contextmenu",function(t){i.groupManager.table.options.groupContext(t,i.getComponent())}),i.groupManager.table.options.groupTap&&(o=!1,i.element.addEventListener("touchstart",function(t){o=!0}),i.element.addEventListener("touchend",function(t){o&&i.groupManager.table.options.groupTap(t,i.getComponent()),o=!1})),i.groupManager.table.options.groupDblTap&&(t=null,i.element.addEventListener("touchend",function(e){t?(clearTimeout(t),t=null,i.groupManager.table.options.groupDblTap(e,i.getComponent())):t=setTimeout(function(){clearTimeout(t),t=null},300)})),i.groupManager.table.options.groupTapHold&&(e=null,i.element.addEventListener("touchstart",function(t){clearTimeout(e),e=setTimeout(function(){clearTimeout(e),e=null,o=!1,i.groupManager.table.options.groupTapHold(t,i.getComponent())},1e3)}),i.element.addEventListener("touchend",function(t){clearTimeout(e),e=null})),i.groupManager.table.options.groupToggleElement&&("arrow"==i.groupManager.table.options.groupToggleElement?i.arrowElement:i.element).addEventListener("click",function(t){t.stopPropagation(),t.stopImmediatePropagation(),i.toggleVisibility()})},M.prototype._createGroup=function(t,e){var o=e+"_"+t,i=new M(this.groupManager,this,e,t,this.groupManager.groupIDLookups[e].field,this.groupManager.headerGenerator[e]||this.groupManager.headerGenerator[0],!!this.old&&this.old.groups[o]);this.groups[o]=i,this.groupList.push(i)},M.prototype._addRowToGroup=function(t){var e=this.level+1;if(this.hasSubGroups){var o=this.groupManager.groupIDLookups[e].func(t.getData()),i=e+"_"+o;this.groupManager.allowedValues&&this.groupManager.allowedValues[e]?this.groups[i]&&this.groups[i].addRow(t):(this.groups[i]||this._createGroup(o,e),this.groups[i].addRow(t))}},M.prototype._addRow=function(t){this.rows.push(t),t.modules.group=this},M.prototype.insertRow=function(t,e,o){var i=this.conformRowData({});t.updateData(i);var n=this.rows.indexOf(e);n>-1?o?this.rows.splice(n+1,0,t):this.rows.splice(n,0,t):o?this.rows.push(t):this.rows.unshift(t),t.modules.group=this,this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)},M.prototype.getRowIndex=function(t){},M.prototype.conformRowData=function(t){return this.field?t[this.field]=this.key:console.warn("Data Conforming Error - Cannot conform row data to match new group as groupBy is a function"),this.parent&&(t=this.parent.conformRowData(t)),t},M.prototype.removeRow=function(t){var e=this.rows.indexOf(t);e>-1&&this.rows.splice(e,1),this.rows.length?(this.generateGroupHeaderContents(),this.groupManager.table.modExists("columnCalcs")&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modules.columnCalcs.recalcGroup(this)):(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this),this.groupManager.updateGroupRows(!0))},M.prototype.removeGroup=function(t){var e,o=t.level+"_"+t.key;this.groups[o]&&(delete this.groups[o],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1),this.groupList.length||(this.parent?this.parent.removeGroup(this):this.groupManager.removeGroup(this)))},M.prototype.getHeadersAndRows=function(t){var e=[];return e.push(this),this._visSet(),this.visible?this.groupList.length?this.groupList.forEach(function(o){e=e.concat(o.getHeadersAndRows(t))}):(!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&this.calcs.top.detachElement(),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),e=e.concat(this.rows),!t&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.modExists("columnCalcs")&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&this.calcs.bottom.detachElement(),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))):!this.groupList.length&&"table"!=this.groupManager.table.options.columnCalcs&&this.groupManager.table.options.groupClosedShowCalcs&&this.groupManager.table.modExists("columnCalcs")&&(!t&&this.groupManager.table.modules.columnCalcs.hasTopCalcs()&&(this.calcs.top&&this.calcs.top.detachElement(),this.calcs.top=this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows),e.push(this.calcs.top)),!t&&this.groupManager.table.modules.columnCalcs.hasBottomCalcs()&&(this.calcs.bottom&&this.calcs.bottom.detachElement(),this.calcs.bottom=this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows),e.push(this.calcs.bottom))),e},M.prototype.getData=function(t,e){var o=[];return this._visSet(),(!t||t&&this.visible)&&this.rows.forEach(function(t){o.push(t.getData(e||"data"))}),o},M.prototype.getRowCount=function(){var t=0;return this.groupList.length?this.groupList.forEach(function(e){t+=e.getRowCount()}):t=this.rows.length,t},M.prototype.toggleVisibility=function(){this.visible?this.hide():this.show()},M.prototype.hide=function(){this.visible=!1,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination?this.groupManager.updateGroupRows(!0):(this.element.classList.remove("tabulator-group-visible"),this.groupList.length?this.groupList.forEach(function(t){t.getHeadersAndRows().forEach(function(t){t.detachElement()})}):this.rows.forEach(function(t){var e=t.getElement();e.parentNode.removeChild(e)}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()),this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!1)},M.prototype.show=function(){if(this.visible=!0,"classic"!=this.groupManager.table.rowManager.getRenderMode()||this.groupManager.table.options.pagination)this.groupManager.updateGroupRows(!0);else{this.element.classList.add("tabulator-group-visible");var t=this.getElement();this.groupList.length?this.groupList.forEach(function(e){e.getHeadersAndRows().forEach(function(e){var o=e.getElement();t.parentNode.insertBefore(o,t.nextSibling),e.initialize(),t=o})}):this.rows.forEach(function(e){var o=e.getElement();t.parentNode.insertBefore(o,t.nextSibling),e.initialize(),t=o}),this.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(),this.groupManager.getDisplayIndex()),this.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth()}this.groupManager.table.options.groupVisibilityChanged.call(this.table,this.getComponent(),!0)},M.prototype._visSet=function(){var t=[];"function"==typeof this.visible&&(this.rows.forEach(function(e){t.push(e.getData())}),this.visible=this.visible(this.key,this.getRowCount(),t,this.getComponent()))},M.prototype.getRowGroup=function(t){var e=!1;return this.groupList.length?this.groupList.forEach(function(o){var i=o.getRowGroup(t);i&&(e=i)}):this.rows.find(function(e){return e===t})&&(e=this),e},M.prototype.getSubGroups=function(t){var e=[];return this.groupList.forEach(function(o){e.push(t?o.getComponent():o)}),e},M.prototype.getRows=function(t){var e=[];return this.rows.forEach(function(o){e.push(t?o.getComponent():o)}),e},M.prototype.generateGroupHeaderContents=function(){var t=[];for(this.rows.forEach(function(e){t.push(e.getData())}),this.elementContents=this.generator(this.key,this.getRowCount(),t,this.getComponent());this.element.firstChild;)this.element.removeChild(this.element.firstChild);"string"==typeof this.elementContents?this.element.innerHTML=this.elementContents:this.element.appendChild(this.elementContents),this.element.insertBefore(this.arrowElement,this.element.firstChild)},M.prototype.getElement=function(){this.addBindingsd=!1,this._visSet(),this.visible?this.element.classList.add("tabulator-group-visible"):this.element.classList.remove("tabulator-group-visible");for(var t=0;t<this.element.childNodes.length;++t)this.element.childNodes[t].parentNode.removeChild(this.element.childNodes[t]);return this.generateGroupHeaderContents(),this.element},M.prototype.detachElement=function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)},M.prototype.normalizeHeight=function(){this.setHeight(this.element.clientHeight)},M.prototype.initialize=function(t){this.initialized&&!t||(this.normalizeHeight(),this.initialized=!0)},M.prototype.reinitialize=function(){this.initialized=!1,this.height=0,c.prototype.helpers.elVisible(this.element)&&this.initialize(!0)},M.prototype.setHeight=function(t){this.height!=t&&(this.height=t,this.outerHeight=this.element.offsetHeight)},M.prototype.getHeight=function(){return this.outerHeight},M.prototype.getGroup=function(){return this},M.prototype.reinitializeHeight=function(){},M.prototype.calcHeight=function(){},M.prototype.setCellHeight=function(){},M.prototype.clearCellHeight=function(){},M.prototype.getComponent=function(){return new D(this)};var L=function(t){this.table=t,this.groupIDLookups=!1,this.startOpen=[function(){return!1}],this.headerGenerator=[function(){return""}],this.groupList=[],this.allowedValues=!1,this.groups={},this.displayIndex=0};L.prototype.initialize=function(){var t=this,e=t.table.options.groupBy,o=t.table.options.groupStartOpen,i=t.table.options.groupHeader;(this.allowedValues=t.table.options.groupValues,t.headerGenerator=[function(){return""}],this.startOpen=[function(){return!1}],t.table.modules.localize.bind("groups|item",function(e,o){t.headerGenerator[0]=function(t,i,n){return(void 0===t?"":t)+"<span>("+i+" "+(1===i?e:o.groups.items)+")</span>"}}),this.groupIDLookups=[],Array.isArray(e)||e)?this.table.modExists("columnCalcs")&&"table"!=this.table.options.columnCalcs&&"both"!=this.table.options.columnCalcs&&this.table.modules.columnCalcs.removeCalcs():this.table.modExists("columnCalcs")&&"group"!=this.table.options.columnCalcs&&this.table.columnManager.getRealColumns().forEach(function(e){e.definition.topCalc&&t.table.modules.columnCalcs.initializeTopRow(),e.definition.bottomCalc&&t.table.modules.columnCalcs.initializeBottomRow()});Array.isArray(e)||(e=[e]),e.forEach(function(e,o){var i,n;i="function"==typeof e?e:(n=t.table.columnManager.getColumnByField(e))?function(t){return n.getFieldValue(t)}:function(t){return t[e]},t.groupIDLookups.push({field:"function"!=typeof e&&e,func:i,values:!!t.allowedValues&&t.allowedValues[o]})}),o&&(Array.isArray(o)||(o=[o]),o.forEach(function(t){t="function"==typeof t?t:function(){return!0}}),t.startOpen=o),i&&(t.headerGenerator=Array.isArray(i)?i:[i]),this.initialized=!0},L.prototype.setDisplayIndex=function(t){this.displayIndex=t},L.prototype.getDisplayIndex=function(){return this.displayIndex},L.prototype.getRows=function(t){return this.groupIDLookups.length?(this.table.options.dataGrouping.call(this.table),this.generateGroups(t),this.table.options.dataGrouped&&this.table.options.dataGrouped.call(this.table,this.getGroups(!0)),this.updateGroupRows()):t.slice(0)},L.prototype.getGroups=function(t){var e=[];return this.groupList.forEach(function(o){e.push(t?o.getComponent():o)}),e},L.prototype.pullGroupListData=function(t){var e=this,o=[];return t.forEach(function(t){var i={level:0,rowCount:0,headerContent:""},n=[];t.hasSubGroups?(n=e.pullGroupListData(t.groupList),i.level=t.level,i.rowCount=n.length-t.groupList.length,i.headerContent=t.generator(t.key,i.rowCount,t.rows,t),o.push(i),o=o.concat(n)):(i.level=t.level,i.headerContent=t.generator(t.key,t.rows.length,t.rows,t),i.rowCount=t.getRows().length,o.push(i),t.getRows().forEach(function(t){o.push(t.getData("data"))}))}),o},L.prototype.getGroupedData=function(){return this.pullGroupListData(this.groupList)},L.prototype.getRowGroup=function(t){var e=!1;return this.groupList.forEach(function(o){var i=o.getRowGroup(t);i&&(e=i)}),e},L.prototype.countGroups=function(){return this.groupList.length},L.prototype.generateGroups=function(t){var e=this,o=e.groups;e.groups={},e.groupList=[],this.allowedValues&&this.allowedValues[0]?(this.allowedValues[0].forEach(function(t){e.createGroup(t,0,o)}),t.forEach(function(t){e.assignRowToExistingGroup(t,o)})):t.forEach(function(t){e.assignRowToGroup(t,o)})},L.prototype.createGroup=function(t,e,o){var i,n=e+"_"+t;o=o||[],i=new M(this,!1,e,t,this.groupIDLookups[0].field,this.headerGenerator[0],o[n]),this.groups[n]=i,this.groupList.push(i)},L.prototype.assignRowToGroup=function(t,e){var o=this.groupIDLookups[0].func(t.getData()),i="0_"+o;this.groups[i]||this.createGroup(o,0,e),this.groups[i].addRow(t)},L.prototype.assignRowToExistingGroup=function(t,e){var o="0_"+this.groupIDLookups[0].func(t.getData());this.groups[o]&&this.groups[o].addRow(t)},L.prototype.assignRowToGroup=function(t,e){var o=this.groupIDLookups[0].func(t.getData()),i=!this.groups["0_"+o];return i&&this.createGroup(o,0,e),this.groups["0_"+o].addRow(t),!i},L.prototype.updateGroupRows=function(t){var e=[];if(this.groupList.forEach(function(t){e=e.concat(t.getHeadersAndRows())}),t){var o=this.table.rowManager.setDisplayRows(e,this.getDisplayIndex());!0!==o&&this.setDisplayIndex(o),this.table.rowManager.refreshActiveData("group",!0,!0)}return e},L.prototype.scrollHeaders=function(t){this.groupList.forEach(function(e){e.arrowElement.style.marginLeft=t+"px"})},L.prototype.removeGroup=function(t){var e,o=t.level+"_"+t.key;this.groups[o]&&(delete this.groups[o],(e=this.groupList.indexOf(t))>-1&&this.groupList.splice(e,1))},c.prototype.registerModule("groupRows",L);var T=function(t){this.table=t,this.history=[],this.index=-1};T.prototype.clear=function(){this.history=[],this.index=-1},T.prototype.action=function(t,e,o){this.history=this.history.slice(0,this.index+1),this.history.push({type:t,component:e,data:o}),this.index++},T.prototype.getHistoryUndoSize=function(){return this.index+1},T.prototype.getHistoryRedoSize=function(){return this.history.length-(this.index+1)},T.prototype.undo=function(){if(this.index>-1){var t=this.history[this.index];return this.undoers[t.type].call(this,t),this.index--,this.table.options.historyUndo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Undo Error - No more history to undo"),!1},T.prototype.redo=function(){if(this.history.length-1>this.index){this.index++;var t=this.history[this.index];return this.redoers[t.type].call(this,t),this.table.options.historyRedo.call(this.table,t.type,t.component.getComponent(),t.data),!0}return console.warn("History Redo Error - No more history to redo"),!1},T.prototype.undoers={cellEdit:function(t){t.component.setValueProcessData(t.data.oldValue)},rowAdd:function(t){t.component.deleteActual()},rowDelete:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},T.prototype.redoers={cellEdit:function(t){t.component.setValueProcessData(t.data.newValue)},rowAdd:function(t){var e=this.table.rowManager.addRowActual(t.data.data,t.data.pos,t.data.index);this._rebindRow(t.component,e)},rowDelete:function(t){t.component.deleteActual()},rowMove:function(t){this.table.rowManager.moveRowActual(t.component,this.table.rowManager.rows[t.data.pos],!1),this.table.rowManager.redraw()}},T.prototype._rebindRow=function(t,e){this.history.forEach(function(o){if(o.component instanceof r)o.component===t&&(o.component=e);else if(o.component instanceof l&&o.component.row===t){var i=o.component.column.getField();i&&(o.component=e.getCell(i))}})},c.prototype.registerModule("history",T);var k=function(t){this.table=t,this.fieldIndex=[],this.hasIndex=!1};k.prototype.parseTable=function(){var t=this.table.element,e=this.table.options,o=(e.columns,t.getElementsByTagName("th")),i=t.getElementsByTagName("tbody")[0],n=[];this.hasIndex=!1,this.table.options.htmlImporting.call(this.table),i=i?i.getElementsByTagName("tr"):[],this._extractOptions(t,e),o.length?this._extractHeaders(o,i):this._generateBlankHeaders(o,i);for(var s=0;s<i.length;s++){var r=i[s].getElementsByTagName("td"),a={};this.hasIndex||(a[e.index]=s);for(var l=0;l<r.length;l++){var u=r[l];void 0!==this.fieldIndex[l]&&(a[this.fieldIndex[l]]=u.innerHTML)}n.push(a)}var c=document.createElement("div"),d=t.attributes;for(var l in d)"object"==q(d[l])&&c.setAttribute(d[l].name,d[l].value);t.parentNode.replaceChild(c,t),e.data=n,this.table.options.htmlImported.call(this.table),this.table.element=c},k.prototype._extractOptions=function(t,e){var o=t.attributes;for(var i in o){var n,s=o[i];if(s&&"object"==(void 0===s?"undefined":q(s))&&s.name&&0===s.name.indexOf("tabulator-"))for(var r in n=s.name.replace("tabulator-",""),e)r.toLowerCase()==n&&(e[r]=this._attribValue(s.value))}},k.prototype._attribValue=function(t){return"true"===t||"false"!==t&&t},k.prototype._findCol=function(t){return this.table.options.columns.find(function(e){return e.title===t})||!1},k.prototype._extractHeaders=function(t,e){for(var o=0;o<t.length;o++){var i,n,s=t[o],r=!1,a=this._findCol(s.textContent);for(var l in a?r=!0:a={title:s.textContent.trim()},a.field||(a.field=s.textContent.trim().toLowerCase().replace(" ","_")),(i=s.getAttribute("width"))&&!a.width&&(a.width=i),n=s.attributes,this._extractOptions(s,a),n){var u=n[l];u&&"object"==(void 0===u?"undefined":q(u))&&u.name&&0===u.name.indexOf("tabulator-")&&(a[u.name.replace("tabulator-","")]=this._attribValue(u.value))}this.fieldIndex[o]=a.field,a.field==this.table.options.index&&(this.hasIndex=!0),r||this.table.options.columns.push(a)}},k.prototype._generateBlankHeaders=function(t,e){for(var o=0;o<t.length;o++){var i=t[o],n={title:"",field:"col"+o};this.fieldIndex[o]=n.field;var s=i.getAttribute("width");s&&(n.width=s),this.table.options.columns.push(n)}},c.prototype.registerModule("htmlTableImport",k);var z=function(t){this.table=t,this.watchKeys=null,this.pressedKeys=null,this.keyupBinding=!1,this.keydownBinding=!1};z.prototype.initialize=function(){var t=this.table.options.keybindings,e={};if(this.watchKeys={},this.pressedKeys=[],!1!==t){for(var o in this.bindings)e[o]=this.bindings[o];if(Object.keys(t).length)for(var i in t)e[i]=t[i];this.mapBindings(e),this.bindEvents()}},z.prototype.mapBindings=function(t){var e=this,o=this,i=function(i){e.actions[i]?t[i]&&("object"!==q(t[i])&&(t[i]=[t[i]]),t[i].forEach(function(t){o.mapBinding(i,t)})):console.warn("Key Binding Error - no such action:",i)};for(var n in t)i(n)},z.prototype.mapBinding=function(t,e){var o=this,i={action:this.actions[t],keys:[],ctrl:!1,shift:!1};e.toString().toLowerCase().split(" ").join("").split("+").forEach(function(t){switch(t){case"ctrl":i.ctrl=!0;break;case"shift":i.shift=!0;break;default:t=parseInt(t),i.keys.push(t),o.watchKeys[t]||(o.watchKeys[t]=[]),o.watchKeys[t].push(i);}})},z.prototype.bindEvents=function(){var t=this;this.keyupBinding=function(e){var o=e.keyCode,i=t.watchKeys[o];i&&(t.pressedKeys.push(o),i.forEach(function(o){t.checkBinding(e,o)}))},this.keydownBinding=function(e){var o=e.keyCode;if(t.watchKeys[o]){var i=t.pressedKeys.indexOf(o);i>-1&&t.pressedKeys.splice(i,1)}},this.table.element.addEventListener("keydown",this.keyupBinding),this.table.element.addEventListener("keyup",this.keydownBinding)},z.prototype.clearBindings=function(){this.keyupBinding&&this.table.element.removeEventListener("keydown",this.keyupBinding),this.keydownBinding&&this.table.element.removeEventListener("keyup",this.keydownBinding)},z.prototype.checkBinding=function(t,e){var o=this,i=!0;return t.ctrlKey==e.ctrl&&t.shiftKey==e.shift&&(e.keys.forEach(function(t){-1==o.pressedKeys.indexOf(t)&&(i=!1)}),i&&e.action.call(o,t),!0)},z.prototype.bindings={navPrev:"shift + 9",navNext:9,navUp:38,navDown:40,scrollPageUp:33,scrollPageDown:34,scrollToStart:36,scrollToEnd:35,undo:"ctrl + 90",redo:"ctrl + 89",copyToClipboard:"ctrl + 67"},z.prototype.actions={keyBlock:function(t){t.stopPropagation(),t.preventDefault()},scrollPageUp:function(t){var e=this.table.rowManager,o=e.scrollTop-e.height;e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(o>=0?e.element.scrollTop=o:e.scrollToRow(e.getDisplayRows()[0])),this.table.element.focus()},scrollPageDown:function(t){var e=this.table.rowManager,o=e.scrollTop+e.height,i=e.element.scrollHeight;t.preventDefault(),e.displayRowsCount&&(o<=i?e.element.scrollTop=o:e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1])),this.table.element.focus()},scrollToStart:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[0]),this.table.element.focus()},scrollToEnd:function(t){var e=this.table.rowManager;t.preventDefault(),e.displayRowsCount&&e.scrollToRow(e.getDisplayRows()[e.displayRowsCount-1]),this.table.element.focus()},navPrev:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().prev())},navNext:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().next())},navLeft:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().left())},navRight:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().right())},navUp:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().up())},navDown:function(t){var e=!1;this.table.modExists("edit")&&(e=this.table.modules.edit.currentCell)&&(t.preventDefault(),e.nav().down())},undo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.undo()))},redo:function(t){this.table.options.history&&this.table.modExists("history")&&this.table.modExists("edit")&&(this.table.modules.edit.currentCell||(t.preventDefault(),this.table.modules.history.redo()))},copyToClipboard:function(t){this.table.modules.edit.currentCell||this.table.modExists("clipboard",!0)&&this.table.modules.clipboard.copy(this.table.options.selectable&&"highlight"!=this.table.options.selectable?"selected":"active",null,null,null,!0)}},c.prototype.registerModule("keybindings",z);var S=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=250,this.moving=!1,this.toCol=!1,this.toColAfter=!1,this.startX=0,this.autoScrollMargin=40,this.autoScrollStep=5,this.autoScrollTimeout=!1,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this)};S.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-col"),t.classList.add("tabulator-col-placeholder"),t},S.prototype.initializeColumn=function(t){var e,o=this,i={};t.modules.frozen||(e=t.getElement(),i.mousemove=function(i){t.parent===o.moving.parent&&(i.pageX-c.prototype.helpers.elOffset(e).left+o.table.columnManager.element.scrollLeft>t.getWidth()/2?o.toCol===t&&o.toColAfter||(e.parentNode.insertBefore(o.placeholderElement,e.nextSibling),o.moveColumn(t,!0)):(o.toCol!==t||o.toColAfter)&&(e.parentNode.insertBefore(o.placeholderElement,e),o.moveColumn(t,!1)))}.bind(o),e.addEventListener("mousedown",function(e){1===e.which&&(o.checkTimeout=setTimeout(function(){o.startMove(e,t)},o.checkPeriod))}),e.addEventListener("mouseup",function(t){1===t.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),t.modules.moveColumn=i},S.prototype.startMove=function(t,e){var o=e.getElement();this.moving=e,this.startX=t.pageX-c.prototype.helpers.elOffset(o).left,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.table.columnManager.getElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.bottom="0",this._bindMouseMove(),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},S.prototype._bindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveColumn.mousemove)})},S.prototype._unbindMouseMove=function(){this.table.columnManager.columnsByIndex.forEach(function(t){t.modules.moveColumn.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveColumn.mousemove)})},S.prototype.moveColumn=function(t,e){var o=this.moving.getCells();this.toCol=t,this.toColAfter=e,e?t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(o[e].getElement(),i.nextSibling)}):t.getCells().forEach(function(t,e){var i=t.getElement();i.parentNode.insertBefore(o[e].getElement(),i)})},S.prototype.endMove=function(t){1===t.which&&(this._unbindMouseMove(),this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toCol&&this.table.columnManager.moveColumn(this.moving,this.toCol,this.toColAfter),this.moving=!1,this.toCol=!1,this.toColAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove))},S.prototype.moveHover=function(t){var e,o=this,i=o.table.columnManager.getElement(),n=i.scrollLeft,s=t.pageX-c.prototype.helpers.elOffset(i).left+n;o.hoverElement.style.left=s-o.startX+"px",s-n<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){e=Math.max(0,n-5),o.table.rowManager.getElement().scrollLeft=e,o.autoScrollTimeout=!1},1))),n+i.clientWidth-s<o.autoScrollMargin&&(o.autoScrollTimeout||(o.autoScrollTimeout=setTimeout(function(){e=Math.min(i.clientWidth,n+5),o.table.rowManager.getElement().scrollLeft=e,o.autoScrollTimeout=!1},1)))},c.prototype.registerModule("moveColumn",S);var _=function(t){this.table=t,this.placeholderElement=this.createPlaceholderElement(),this.hoverElement=!1,this.checkTimeout=!1,this.checkPeriod=150,this.moving=!1,this.toRow=!1,this.toRowAfter=!1,this.hasHandle=!1,this.startY=0,this.startX=0,this.moveHover=this.moveHover.bind(this),this.endMove=this.endMove.bind(this),this.tableRowDropEvent=!1,this.connection=!1,this.connections=[],this.connectedTable=!1,this.connectedRow=!1};_.prototype.createPlaceholderElement=function(){var t=document.createElement("div");return t.classList.add("tabulator-row"),t.classList.add("tabulator-row-placeholder"),t},_.prototype.initialize=function(t){this.connection=this.table.options.movableRowsConnectedTables},_.prototype.setHandle=function(t){this.hasHandle=t},_.prototype.initializeRow=function(t){var e,o=this,i={};i.mouseup=function(e){o.tableRowDrop(e,t)}.bind(o),i.mousemove=function(e){var i;e.pageY-c.prototype.helpers.elOffset(t.element).top+o.table.rowManager.element.scrollTop>t.getHeight()/2?o.toRow===t&&o.toRowAfter||((i=t.getElement()).parentNode.insertBefore(o.placeholderElement,i.nextSibling),o.moveRow(t,!0)):(o.toRow!==t||o.toRowAfter)&&((i=t.getElement()).parentNode.insertBefore(o.placeholderElement,i),o.moveRow(t,!1))}.bind(o),this.hasHandle||((e=t.getElement()).addEventListener("mousedown",function(e){1===e.which&&(o.checkTimeout=setTimeout(function(){o.startMove(e,t)},o.checkPeriod))}),e.addEventListener("mouseup",function(t){1===t.which&&o.checkTimeout&&clearTimeout(o.checkTimeout)})),t.modules.moveRow=i},_.prototype.initializeCell=function(t){var e=this,o=t.getElement();o.addEventListener("mousedown",function(o){1===o.which&&(e.checkTimeout=setTimeout(function(){e.startMove(o,t.row)},e.checkPeriod))}),o.addEventListener("mouseup",function(t){1===t.which&&e.checkTimeout&&clearTimeout(e.checkTimeout)})},_.prototype._bindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow.mousemove&&t.getElement().addEventListener("mousemove",t.modules.moveRow.mousemove)})},_.prototype._unbindMouseMove=function(){this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow.mousemove&&t.getElement().removeEventListener("mousemove",t.modules.moveRow.mousemove)})},_.prototype.startMove=function(t,e){var o=e.getElement();this.setStartPosition(t,e),this.moving=e,this.table.element.classList.add("tabulator-block-select"),this.placeholderElement.style.width=e.getWidth()+"px",this.placeholderElement.style.height=e.getHeight()+"px",this.connection?(this.table.element.classList.add("tabulator-movingrow-sending"),this.connectToTables(e)):(o.parentNode.insertBefore(this.placeholderElement,o),o.parentNode.removeChild(o)),this.hoverElement=o.cloneNode(!0),this.hoverElement.classList.add("tabulator-moving"),this.connection?(document.body.appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this.hoverElement.style.width=this.table.element.clientWidth+"px",this.hoverElement.style.whiteSpace="nowrap",this.hoverElement.style.overflow="hidden",this.hoverElement.style.pointerEvents="none"):(this.table.rowManager.getTableElement().appendChild(this.hoverElement),this.hoverElement.style.left="0",this.hoverElement.style.top="0",this._bindMouseMove()),document.body.addEventListener("mousemove",this.moveHover),document.body.addEventListener("mouseup",this.endMove),this.moveHover(t)},_.prototype.setStartPosition=function(t,e){var o,i;o=e.getElement(),this.connection?(i=o.getBoundingClientRect(),this.startX=i.left-t.pageX+window.scrollX,this.startY=i.top-t.pageY+window.scrollY):this.startY=t.pageY-o.getBoundingClientRect().top},_.prototype.endMove=function(t){t&&1!==t.which||(this._unbindMouseMove(),this.connection||(this.placeholderElement.parentNode.insertBefore(this.moving.getElement(),this.placeholderElement.nextSibling),this.placeholderElement.parentNode.removeChild(this.placeholderElement)),this.hoverElement.parentNode.removeChild(this.hoverElement),this.table.element.classList.remove("tabulator-block-select"),this.toRow&&this.table.rowManager.moveRow(this.moving,this.toRow,this.toRowAfter),this.moving=!1,this.toRow=!1,this.toRowAfter=!1,document.body.removeEventListener("mousemove",this.moveHover),document.body.removeEventListener("mouseup",this.endMove),this.connection&&(this.table.element.classList.remove("tabulator-movingrow-sending"),this.disconnectFromTables()))},_.prototype.moveRow=function(t,e){this.toRow=t,this.toRowAfter=e},_.prototype.moveHover=function(t){this.connection?this.moveHoverConnections.call(this,t):this.moveHoverTable.call(this,t)},_.prototype.moveHoverTable=function(t){var e=this.table.rowManager.getElement(),o=e.scrollTop,i=t.pageY-e.getBoundingClientRect().top+o;this.hoverElement.style.top=i-this.startY+"px"},_.prototype.moveHoverConnections=function(t){this.hoverElement.style.left=this.startX+t.pageX+"px",this.hoverElement.style.top=this.startY+t.pageY+"px"},_.prototype.connectToTables=function(t){var e=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStart.call(this.table,e),this.table.modules.comms.send(this.connection,"moveRow","connect",{row:t})},_.prototype.disconnectFromTables=function(){var t=this.table.modules.comms.getConnections(this.connection);this.table.options.movableRowsSendingStop.call(this.table,t),this.table.modules.comms.send(this.connection,"moveRow","disconnect")},_.prototype.connect=function(t,e){return this.connectedTable?(console.warn("Move Row Error - Table cannot accept connection, already connected to table:",this.connectedTable),!1):(this.connectedTable=t,this.connectedRow=e,this.table.element.classList.add("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().addEventListener("mouseup",t.modules.moveRow.mouseup)}),this.tableRowDropEvent=this.tableRowDrop.bind(this),this.table.element.addEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStart.call(this.table,e,t),!0)},_.prototype.disconnect=function(t){t===this.connectedTable?(this.connectedTable=!1,this.connectedRow=!1,this.table.element.classList.remove("tabulator-movingrow-receiving"),this.table.rowManager.getDisplayRows().forEach(function(t){"row"===t.type&&t.modules.moveRow&&t.modules.moveRow.mouseup&&t.getElement().removeEventListener("mouseup",t.modules.moveRow.mouseup)}),this.table.element.removeEventListener("mouseup",this.tableRowDropEvent),this.table.options.movableRowsReceivingStop.call(this.table,t)):console.warn("Move Row Error - trying to disconnect from non connected table")},_.prototype.dropComplete=function(t,e,o){var i=!1;if(o){switch(q(this.table.options.movableRowsSender)){case"string":i=this.senders[this.table.options.movableRowsSender];break;case"function":i=this.table.options.movableRowsSender;}i?i.call(this,this.moving.getComponent(),e?e.getComponent():void 0,t):this.table.options.movableRowsSender&&console.warn("Mover Row Error - no matching sender found:",this.table.options.movableRowsSender),this.table.options.movableRowsSent.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t)}else this.table.options.movableRowsSentFailed.call(this.table,this.moving.getComponent(),e?e.getComponent():void 0,t);this.endMove()},_.prototype.tableRowDrop=function(t,e){var o=!1,i=!1;switch(t.stopImmediatePropagation(),q(this.table.options.movableRowsReceiver)){case"string":o=this.receivers[this.table.options.movableRowsReceiver];break;case"function":o=this.table.options.movableRowsReceiver;}o?i=o.call(this,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):console.warn("Mover Row Error - no matching receiver found:",this.table.options.movableRowsReceiver),i?this.table.options.movableRowsReceived.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable):this.table.options.movableRowsReceivedFailed.call(this.table,this.connectedRow.getComponent(),e?e.getComponent():void 0,this.connectedTable),this.table.modules.comms.send(this.connectedTable,"moveRow","dropcomplete",{row:e,success:i})},_.prototype.receivers={insert:function(t,e,o){return this.table.addRow(t.getData(),void 0,e),!0},add:function(t,e,o){return this.table.addRow(t.getData()),!0},update:function(t,e,o){return!!e&&(e.update(t.getData()),!0)},replace:function(t,e,o){return!!e&&(this.table.addRow(t.getData(),void 0,e),e.delete(),!0)}},_.prototype.senders={delete:function(t,e,o){t.delete()}},_.prototype.commsReceived=function(t,e,o){switch(e){case"connect":return this.connect(t,o.row);case"disconnect":return this.disconnect(t);case"dropcomplete":return this.dropComplete(t,o.row,o.success);}},c.prototype.registerModule("moveRow",_);var H=function(t){this.table=t,this.allowedTypes=["","data","edit","clipboard"],this.enabled=!0};H.prototype.initializeColumn=function(t){var e=this,o=!1,i={};this.allowedTypes.forEach(function(n){var s,r="mutator"+(n.charAt(0).toUpperCase()+n.slice(1));t.definition[r]&&(s=e.lookupMutator(t.definition[r]))&&(o=!0,i[r]={mutator:s,params:t.definition[r+"Params"]||{}})}),o&&(t.modules.mutate=i)},H.prototype.lookupMutator=function(t){var e=!1;switch(void 0===t?"undefined":q(t)){case"string":this.mutators[t]?e=this.mutators[t]:console.warn("Mutator Error - No such mutator found, ignoring: ",t);break;case"function":e=t;}return e},H.prototype.transformRow=function(t,e,o){var i,n="mutator"+(e.charAt(0).toUpperCase()+e.slice(1));return this.enabled&&this.table.columnManager.traverse(function(s){var r,a,l;s.modules.mutate&&(r=s.modules.mutate[n]||s.modules.mutate.mutator||!1)&&(i=s.getFieldValue(t),(!o||o&&void 0!==i)&&(l=s.getComponent(),a="function"==typeof r.params?r.params(i,t,e,l):r.params,s.setFieldValue(t,r.mutator(i,t,e,a,l))))}),t},H.prototype.transformCell=function(t,e){var o=t.column.modules.mutate.mutatorEdit||t.column.modules.mutate.mutator||!1;return o?o.mutator(e,t.row.getData(),"edit",o.params,t.getComponent()):e},H.prototype.enable=function(){this.enabled=!0},H.prototype.disable=function(){this.enabled=!1},H.prototype.mutators={},c.prototype.registerModule("mutator",H);var F=function(t){this.table=t,this.mode="local",this.progressiveLoad=!1,this.size=0,this.page=1,this.count=5,this.max=1,this.displayIndex=0,this.createElements()};F.prototype.createElements=function(){var t;this.element=document.createElement("span"),this.element.classList.add("tabulator-paginator"),this.pagesElement=document.createElement("span"),this.pagesElement.classList.add("tabulator-pages"),(t=document.createElement("button")).classList.add("tabulator-page"),t.setAttribute("type","button"),t.setAttribute("role","button"),t.setAttribute("aria-label",""),t.setAttribute("title",""),this.firstBut=t.cloneNode(!0),this.firstBut.setAttribute("data-page","first"),this.prevBut=t.cloneNode(!0),this.prevBut.setAttribute("data-page","prev"),this.nextBut=t.cloneNode(!0),this.nextBut.setAttribute("data-page","next"),this.lastBut=t.cloneNode(!0),this.lastBut.setAttribute("data-page","last")},F.prototype.initialize=function(t){var e=this;for(var o in e.table.options.paginationDataSent)e.paginationDataSentNames[o]=e.table.options.paginationDataSent[o];for(var i in e.table.options.paginationDataReceived)e.paginationDataReceivedNames[i]=e.table.options.paginationDataReceived[i];e.table.modules.localize.bind("pagination|first",function(t){e.firstBut.innerHTML=t}),e.table.modules.localize.bind("pagination|first_title",function(t){e.firstBut.setAttribute("aria-label",t),e.firstBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|prev",function(t){e.prevBut.innerHTML=t}),e.table.modules.localize.bind("pagination|prev_title",function(t){e.prevBut.setAttribute("aria-label",t),e.prevBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|next",function(t){e.nextBut.innerHTML=t}),e.table.modules.localize.bind("pagination|next_title",function(t){e.nextBut.setAttribute("aria-label",t),e.nextBut.setAttribute("title",t)}),e.table.modules.localize.bind("pagination|last",function(t){e.lastBut.innerHTML=t}),e.table.modules.localize.bind("pagination|last_title",function(t){e.lastBut.setAttribute("aria-label",t),e.lastBut.setAttribute("title",t)}),e.firstBut.addEventListener("click",function(){e.setPage(1)}),e.prevBut.addEventListener("click",function(){e.previousPage()}),e.nextBut.addEventListener("click",function(){e.nextPage().then(function(){}).catch(function(){})}),e.lastBut.addEventListener("click",function(){e.setPage(e.max)}),e.table.options.paginationElement&&(e.element=e.table.options.paginationElement),e.element.appendChild(e.firstBut),e.element.appendChild(e.prevBut),e.element.appendChild(e.pagesElement),e.element.appendChild(e.nextBut),e.element.appendChild(e.lastBut),e.table.options.paginationElement||t||e.table.footerManager.append(e.element,e),e.mode=e.table.options.pagination,e.size=e.table.options.paginationSize||Math.floor(e.table.rowManager.getElement().clientHeight/24),e.count=e.table.options.paginationButtonCount},F.prototype.initializeProgressive=function(t){this.initialize(!0),this.mode="progressive_"+t,this.progressiveLoad=!0},F.prototype.setDisplayIndex=function(t){this.displayIndex=t},F.prototype.getDisplayIndex=function(){return this.displayIndex},F.prototype.setMaxRows=function(t){this.max=t?Math.ceil(t/this.size):1,this.page>this.max&&(this.page=this.max)},F.prototype.reset=function(t){return("local"==this.mode||t)&&(this.page=1),!0},F.prototype.setMaxPage=function(t){this.max=t||1,this.page>this.max&&(this.page=this.max,this.trigger())},F.prototype.setPage=function(t){var e=this;return new Promise(function(o,i){t>0&&t<=e.max?(e.page=t,e.trigger().then(function(){o()}).catch(function(){i()})):(console.warn("Pagination Error - Requested page is out of range of 1 - "+e.max+":",t),i())})},F.prototype.setPageSize=function(t){t>0&&(this.size=t)},F.prototype._setPageButtons=function(){for(var t=Math.floor((this.count-1)/2),e=Math.ceil((this.count-1)/2),o=this.max-this.page+t+1<this.count?this.max-this.count+1:Math.max(this.page-t,1),i=this.page<=e?Math.min(this.count,this.max):Math.min(this.page+e,this.max);this.pagesElement.firstChild;)this.pagesElement.removeChild(this.pagesElement.firstChild);1==this.page?(this.firstBut.disabled=!0,this.prevBut.disabled=!0):(this.firstBut.disabled=!1,this.prevBut.disabled=!1),this.page==this.max?(this.lastBut.disabled=!0,this.nextBut.disabled=!0):(this.lastBut.disabled=!1,this.nextBut.disabled=!1);for(var n=o;n<=i;n++)n>0&&n<=this.max&&this.pagesElement.appendChild(this._generatePageButton(n));this.footerRedraw()},F.prototype._generatePageButton=function(t){var e=this,o=document.createElement("button");return o.classList.add("tabulator-page"),t==e.page&&o.classList.add("active"),o.setAttribute("type","button"),o.setAttribute("role","button"),o.setAttribute("aria-label","Show Page "+t),o.setAttribute("title","Show Page "+t),o.setAttribute("data-page",t),o.textContent=t,o.addEventListener("click",function(o){e.setPage(t)}),o},F.prototype.previousPage=function(){var t=this;return new Promise(function(e,o){t.page>1?(t.page--,t.trigger().then(function(){e()}).catch(function(){o()})):(console.warn("Pagination Error - Previous page would be less than page 1:",0),o())})},F.prototype.nextPage=function(){var t=this;return new Promise(function(e,o){t.page<t.max?(t.page++,t.trigger().then(function(){e()}).catch(function(){o()})):(t.progressiveLoad||console.warn("Pagination Error - Next page would be greater than maximum page of "+t.max+":",t.max+1),o())})},F.prototype.getPage=function(){return this.page},F.prototype.getPageMax=function(){return this.max},F.prototype.getPageSize=function(t){return this.size},F.prototype.getMode=function(){return this.mode},F.prototype.getRows=function(t){var e,o,i;if("local"==this.mode){e=[],i=(o=this.size*(this.page-1))+parseInt(this.size),this._setPageButtons();for(var n=o;n<i;n++)t[n]&&e.push(t[n]);return e}return this._setPageButtons(),t.slice(0)},F.prototype.trigger=function(){var t,e=this;return new Promise(function(o,i){switch(e.mode){case"local":t=e.table.rowManager.scrollLeft,e.table.rowManager.refreshActiveData("page"),e.table.rowManager.scrollHorizontal(t),e.table.options.pageLoaded.call(e.table,e.getPage()),o();break;case"remote":case"progressive_load":case"progressive_scroll":e.table.modules.ajax.blockActiveRequest(),e._getRemotePage().then(function(){o()}).catch(function(){i()});break;default:console.warn("Pagination Error - no such pagination mode:",e.mode),i();}})},F.prototype._getRemotePage=function(){var t,e,o=this,i=this;return new Promise(function(n,s){if(i.table.modExists("ajax",!0)||s(),t=c.prototype.helpers.deepClone(i.table.modules.ajax.getParams()||{}),(e=i.table.modules.ajax.getParams())[o.paginationDataSentNames.page]=i.page,o.size&&(e[o.paginationDataSentNames.size]=o.size),o.table.options.ajaxSorting&&o.table.modExists("sort")){var r=i.table.modules.sort.getSort();r.forEach(function(t){delete t.column}),e[o.paginationDataSentNames.sorters]=r}if(o.table.options.ajaxFiltering&&o.table.modExists("filter")){var a=i.table.modules.filter.getFilters(!0,!0);e[o.paginationDataSentNames.filters]=a}i.table.modules.ajax.setParams(e),i.table.modules.ajax.sendRequest(o.progressiveLoad).then(function(t){i._parseRemoteData(t),n()}).catch(function(t){s()}),i.table.modules.ajax.setParams(t)})},F.prototype._parseRemoteData=function(t){var e,o,i=this;if(void 0===t[this.paginationDataReceivedNames.last_page]&&console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.last_page+"' property"),t[this.paginationDataReceivedNames.data]){if(this.max=parseInt(t[this.paginationDataReceivedNames.last_page])||1,this.progressiveLoad)switch(this.mode){case"progressive_load":this.table.rowManager.addRows(t[this.paginationDataReceivedNames.data]),this.page<this.max&&setTimeout(function(){i.nextPage().then(function(){}).catch(function(){})},i.table.options.ajaxProgressiveLoadDelay);break;case"progressive_scroll":t=this.table.rowManager.getData().concat(t[this.paginationDataReceivedNames.data]),this.table.rowManager.setData(t,!0),o=this.table.options.ajaxProgressiveLoadScrollMargin||2*this.table.rowManager.element.clientHeight,i.table.rowManager.element.scrollHeight<=i.table.rowManager.element.clientHeight+o&&i.nextPage().then(function(){}).catch(function(){});}else e=this.table.rowManager.scrollLeft,this.table.rowManager.setData(t[this.paginationDataReceivedNames.data]),this.table.rowManager.scrollHorizontal(e),this.table.columnManager.scrollHorizontal(e),this.table.options.pageLoaded.call(this.table,this.getPage());}else console.warn("Remote Pagination Error - Server response missing '"+this.paginationDataReceivedNames.data+"' property")},F.prototype.footerRedraw=function(){var t=this.table.footerManager.element;Math.ceil(t.clientWidth)-t.scrollWidth<0?this.pagesElement.style.display="none":(this.pagesElement.style.display="",Math.ceil(t.clientWidth)-t.scrollWidth<0&&(this.pagesElement.style.display="none"))},F.prototype.paginationDataSentNames={page:"page",size:"size",sorters:"sorters",filters:"filters"},F.prototype.paginationDataReceivedNames={current_page:"current_page",last_page:"last_page",data:"data"},c.prototype.registerModule("page",F);var P=function(t){this.table=t,this.mode="",this.id="",this.persistProps=["field","width","visible"]};P.prototype.initialize=function(t,e){this.mode=!0!==t?t:void 0!==window.localStorage?"local":"cookie",this.id="tabulator-"+(e||this.table.element.getAttribute("id")||"")},P.prototype.load=function(t,e){var o=this.retreiveData(t);return e&&(o=o?this.mergeDefinition(e,o):e),o},P.prototype.retreiveData=function(t){var e="",o=this.id+("columns"===t?"":"-"+t);switch(this.mode){case"local":e=localStorage.getItem(o);break;case"cookie":var i=document.cookie,n=i.indexOf(o+"="),s=void 0;n>-1&&((s=(i=i.substr(n)).indexOf(";"))>-1&&(i=i.substr(0,s)),e=i.replace(o+"=",""));break;default:console.warn("Persistance Load Error - invalid mode selected",this.mode);}return!!e&&JSON.parse(e)},P.prototype.mergeDefinition=function(t,e){var o=this,i=[];return(e=e||[]).forEach(function(e,n){var s=o._findColumn(t,e);s&&(s.width=e.width,s.visible=e.visible,s.columns&&(s.columns=o.mergeDefinition(s.columns,e.columns)),i.push(s))}),t.forEach(function(t,n){o._findColumn(e,t)||(i.length>n?i.splice(n,0,t):i.push(t))}),i},P.prototype._findColumn=function(t,e){var o=e.columns?"group":e.field?"field":"object";return t.find(function(t){switch(o){case"group":return t.title===e.title&&t.columns.length===e.columns.length;case"field":return t.field===e.field;case"object":return t===e;}})},P.prototype.save=function(t){var e={};switch(t){case"columns":e=this.parseColumns(this.table.columnManager.getColumns());break;case"filter":e=this.table.modules.filter.getFilters();break;case"sort":e=this.validateSorters(this.table.modules.sort.getSort());}var o=this.id+("columns"===t?"":"-"+t);this.saveData(o,e)},P.prototype.validateSorters=function(t){return t.forEach(function(t){t.column=t.field,delete t.field}),t},P.prototype.saveData=function(t,e){switch(e=JSON.stringify(e),this.mode){case"local":localStorage.setItem(t,e);break;case"cookie":var o=new Date;o.setDate(o.getDate()+1e4),document.cookie=t+"="+e+"; expires="+o.toUTCString();break;default:console.warn("Persistance Save Error - invalid mode selected",this.mode);}},P.prototype.parseColumns=function(t){var e=this,o=[];return t.forEach(function(t){var i={};t.isGroup?(i.title=t.getDefinition().title,i.columns=e.parseColumns(t.getColumns())):(i.title=t.getDefinition().title,i.field=t.getField(),i.width=t.getWidth(),i.visible=t.visible),o.push(i)}),o},c.prototype.registerModule("persistence",P);var A=function(t){this.table=t,this.startColumn=!1,this.startX=!1,this.startWidth=!1,this.handle=null,this.prevHandle=null};A.prototype.initializeColumn=function(t,e,o){var i=this,n=!1,s=this.table.options.resizableColumns;if("header"===t&&(n="textarea"==e.definition.formatter||e.definition.variableHeight,e.modules.resize={variableHeight:n}),!0===s||s==t){var r=document.createElement("div");r.className="tabulator-col-resize-handle";var a=document.createElement("div");a.className="tabulator-col-resize-handle prev",r.addEventListener("click",function(t){t.stopPropagation()}),r.addEventListener("mousedown",function(t){var o=e.getLastColumn();o&&i._checkResizability(o)&&(i.startColumn=e,i._mouseDown(t,o))}),r.addEventListener("dblclick",function(t){i._checkResizability(e)&&e.reinitializeWidth(!0)}),a.addEventListener("click",function(t){t.stopPropagation()}),a.addEventListener("mousedown",function(t){var o,n,s;(o=e.getFirstColumn())&&(s=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(s)&&(i.startColumn=e,i._mouseDown(t,s))}),a.addEventListener("dblclick",function(t){var o,n,s;(o=e.getFirstColumn())&&(s=(n=i.table.columnManager.findColumnIndex(o))>0&&i.table.columnManager.getColumnByIndex(n-1))&&i._checkResizability(s)&&s.reinitializeWidth(!0)}),o.appendChild(r),o.appendChild(a)}},A.prototype._checkResizability=function(t){return void 0!==t.definition.resizable?t.definition.resizable:this.table.options.resizableColumns},A.prototype._mouseDown=function(t,e){var o=this;function i(t){e.setWidth(o.startWidth+(t.screenX-o.startX)),!o.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights()}o.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),o.startColumn.modules.edit&&(o.startColumn.modules.edit.blocked=!0),o.startX=t.screenX,o.startWidth=e.getWidth(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",function t(n){o.startColumn.modules.edit&&(o.startColumn.modules.edit.blocked=!1),o.table.browserSlow&&e.modules.resize&&e.modules.resize.variableHeight&&e.checkCellHeights(),document.body.removeEventListener("mouseup",t),document.body.removeEventListener("mousemove",i),o.table.element.classList.remove("tabulator-block-select"),o.table.options.persistentLayout&&o.table.modExists("persistence",!0)&&o.table.modules.persistence.save("columns"),o.table.options.columnResized.call(o.table,e.getComponent())})},c.prototype.registerModule("resizeColumns",A);var B=function(t){this.table=t,this.startColumn=!1,this.startY=!1,this.startHeight=!1,this.handle=null,this.prevHandle=null};B.prototype.initializeRow=function(t){var e=this,o=t.getElement(),i=document.createElement("div");i.className="tabulator-row-resize-handle";var n=document.createElement("div");n.className="tabulator-row-resize-handle prev",i.addEventListener("click",function(t){t.stopPropagation()}),i.addEventListener("mousedown",function(o){e.startRow=t,e._mouseDown(o,t)}),n.addEventListener("click",function(t){t.stopPropagation()}),n.addEventListener("mousedown",function(o){var i=e.table.rowManager.prevDisplayRow(t);i&&(e.startRow=i,e._mouseDown(o,i))}),o.appendChild(i),o.appendChild(n)},B.prototype._mouseDown=function(t,e){var o=this;function i(t){e.setHeight(o.startHeight+(t.screenY-o.startY))}o.table.element.classList.add("tabulator-block-select"),t.stopPropagation(),o.startY=t.screenY,o.startHeight=e.getHeight(),document.body.addEventListener("mousemove",i),document.body.addEventListener("mouseup",function(t){document.body.removeEventListener("mouseup",i),document.body.removeEventListener("mousemove",i),o.table.element.classList.remove("tabulator-block-select"),o.table.options.rowResized.call(this.table,e.getComponent())})},c.prototype.registerModule("resizeRows",B);var N=function(t){this.table=t,this.binding=!1,this.observer=!1};N.prototype.initialize=function(t){var e=this.table;"undefined"!=typeof ResizeObserver&&"virtual"===e.rowManager.getRenderMode()?(this.observer=new ResizeObserver(function(t){e.redraw()}),this.observer.observe(e.element)):(this.binding=function(){e.redraw()},window.addEventListener("resize",this.binding))},N.prototype.clearBindings=function(t){this.binding&&window.removeEventListener("resize",this.binding),this.observer&&this.observer.unobserve(this.table.element)},c.prototype.registerModule("resizeTable",N);var I=function(t){this.table=t,this.columns=[],this.hiddenColumns=[],this.mode="",this.index=0,this.collapseFormatter=[],this.collapseStartOpen=!0};I.prototype.initialize=function(){var t=this,e=[];this.mode=this.table.options.responsiveLayout,this.collapseFormatter=this.table.options.responsiveLayoutCollapseFormatter||this.formatCollapsedData,this.collapseStartOpen=this.table.options.responsiveLayoutCollapseStartOpen,this.hiddenColumns=[],this.table.columnManager.columnsByIndex.forEach(function(o,i){o.modules.responsive&&o.modules.responsive.order&&o.modules.responsive.visible&&(o.modules.responsive.index=i,e.push(o),o.visible||"collapse"!==t.mode||t.hiddenColumns.push(o))}),e=(e=e.reverse()).sort(function(t,e){return e.modules.responsive.order-t.modules.responsive.order||e.modules.responsive.index-t.modules.responsive.index}),this.columns=e,"collapse"===this.mode&&this.generateCollapsedContent()},I.prototype.initializeColumn=function(t){var e=t.getDefinition();t.modules.responsive={order:void 0===e.responsive?1:e.responsive,visible:!1!==e.visible}},I.prototype.layoutRow=function(t){var e=t.getElement(),o=document.createElement("div");o.classList.add("tabulator-responsive-collapse"),e.classList.contains("tabulator-calcs")||(t.modules.responsiveLayout={element:o},this.collapseStartOpen||(o.style.display="none"),e.appendChild(o),this.generateCollapsedRowContent(t))},I.prototype.updateColumnVisibility=function(t,e){t.modules.responsive&&(t.modules.responsive.visible=e,this.initialize())},I.prototype.hideColumn=function(t){t.hide(!1,!0),"collapse"===this.mode&&(this.hiddenColumns.unshift(t),this.generateCollapsedContent())},I.prototype.showColumn=function(t){var e;t.show(!1,!0),t.setWidth(t.getWidth()),"collapse"===this.mode&&((e=this.hiddenColumns.indexOf(t))>-1&&this.hiddenColumns.splice(e,1),this.generateCollapsedContent())},I.prototype.update=function(){for(var t=!0;t;){var e="fitColumns"==this.table.modules.layout.getMode()?this.table.columnManager.getFlexBaseWidth():this.table.columnManager.getWidth(),o=this.table.columnManager.element.clientWidth-e;if(o<0){var i=this.columns[this.index];i?(this.hideColumn(i),this.index++):t=!1}else{var n=this.columns[this.index-1];n&&o>0&&o>=n.getWidth()?(this.showColumn(n),this.index--):t=!1}this.table.rowManager.activeRowsCount||this.table.rowManager.renderEmptyScroll()}},I.prototype.generateCollapsedContent=function(){var t=this;this.table.rowManager.getDisplayRows().forEach(function(e){t.generateCollapsedRowContent(e)})},I.prototype.generateCollapsedRowContent=function(t){var e,o;if(t.modules.responsiveLayout){for(e=t.modules.responsiveLayout.element;e.firstChild;)e.removeChild(e.firstChild);(o=this.collapseFormatter(this.generateCollapsedRowData(t)))&&e.appendChild(o)}},I.prototype.generateCollapsedRowData=function(t){var e,o=this,i=t.getData(),n={};return this.hiddenColumns.forEach(function(s){var r=s.getFieldValue(i);s.definition.title&&s.field&&(s.modules.format&&o.table.options.responsiveLayoutCollapseUseFormatters?(e={value:!1,data:{},getValue:function(){return r},getData:function(){return i},getElement:function(){return document.createElement("div")},getRow:function(){return t.getComponent()},getColumn:function(){return s.getComponent()}},n[s.definition.title]=s.modules.format.formatter.call(o.table.modules.format,e,s.modules.format.params)):n[s.definition.title]=r)}),n},I.prototype.formatCollapsedData=function(t){var e=document.createElement("table"),o="";for(var i in t)o+="<tr><td><strong>"+i+"</strong></td><td>"+t[i]+"</td></tr>";return e.innerHTML=o,Object.keys(t).length?e:""},c.prototype.registerModule("responsiveLayout",I);var G=function(t){this.table=t,this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[]};G.prototype.clearSelectionData=function(t){this.selecting=!1,this.lastClickedRow=!1,this.selectPrev=[],this.selectedRows=[],t||this._rowSelectionChanged()},G.prototype.initializeRow=function(t){var e=this,o=t.getElement(),i=function t(){setTimeout(function(){e.selecting=!1},50),document.body.removeEventListener("mouseup",t)};t.modules.select={selected:!1},e.table.options.selectableCheck.call(this.table,t.getComponent())?(o.classList.add("tabulator-selectable"),o.classList.remove("tabulator-unselectable"),e.table.options.selectable&&"highlight"!=e.table.options.selectable&&(e.table.options.selectableRangeMode&&"click"===e.table.options.selectableRangeMode?o.addEventListener("click",function(o){if(o.shiftKey){e.lastClickedRow=e.lastClickedRow||t;var i=e.table.rowManager.getDisplayRowIndex(e.lastClickedRow),n=e.table.rowManager.getDisplayRowIndex(t),s=i<=n?i:n,r=i>=n?i:n,a=e.table.rowManager.getDisplayRows().slice(0).splice(s,r-s+1);o.ctrlKey?(a.forEach(function(t){t!==e.lastClickedRow&&e.toggleRow(t)}),e.lastClickedRow=t):(e.deselectRows(),e.selectRows(a))}else o.ctrlKey?(e.toggleRow(t),e.lastClickedRow=t):(e.deselectRows(),e.selectRows(t),e.lastClickedRow=t)}):(o.addEventListener("click",function(o){e.selecting||e.toggleRow(t)}),o.addEventListener("mousedown",function(o){if(o.shiftKey)return e.selecting=!0,e.selectPrev=[],document.body.addEventListener("mouseup",i),document.body.addEventListener("keyup",i),e.toggleRow(t),!1}),o.addEventListener("mouseenter",function(o){e.selecting&&(e.toggleRow(t),e.selectPrev[1]==t&&e.toggleRow(e.selectPrev[0]))}),o.addEventListener("mouseout",function(o){e.selecting&&e.selectPrev.unshift(t)})))):(o.classList.add("tabulator-unselectable"),o.classList.remove("tabulator-selectable"))},G.prototype.toggleRow=function(t){this.table.options.selectableCheck.call(this.table,t.getComponent())&&(t.modules.select.selected?this._deselectRow(t):this._selectRow(t))},G.prototype.selectRows=function(t){var e=this;switch(void 0===t?"undefined":q(t)){case"undefined":e.table.rowManager.rows.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged();break;case"boolean":!0===t&&(e.table.rowManager.activeRows.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged());break;default:Array.isArray(t)?(t.forEach(function(t){e._selectRow(t,!0,!0)}),e._rowSelectionChanged()):e._selectRow(t,!1,!0);}},G.prototype._selectRow=function(t,e,o){if(!isNaN(this.table.options.selectable)&&!0!==this.table.options.selectable&&!o&&this.selectedRows.length>=this.table.options.selectable){if(!this.table.options.selectableRollingSelection)return!1;this._deselectRow(this.selectedRows[0])}var i=this.table.rowManager.findRow(t);i?-1==this.selectedRows.indexOf(i)&&(i.modules.select.selected=!0,i.getElement().classList.add("tabulator-selected"),this.selectedRows.push(i),e||(this.table.options.rowSelected.call(this.table,i.getComponent()),this._rowSelectionChanged())):e||console.warn("Selection Error - No such row found, ignoring selection:"+t)},G.prototype.isRowSelected=function(t){return-1!==this.selectedRows.indexOf(t)},G.prototype.deselectRows=function(t){var e,o=this;if(void 0===t){e=o.selectedRows.length;for(var i=0;i<e;i++)o._deselectRow(o.selectedRows[0],!0);o._rowSelectionChanged()}else Array.isArray(t)?(t.forEach(function(t){o._deselectRow(t,!0)}),o._rowSelectionChanged()):o._deselectRow(t)},G.prototype._deselectRow=function(t,e){var o,i=this.table.rowManager.findRow(t);i?(o=this.selectedRows.findIndex(function(t){return t==i}))>-1&&(i.modules.select.selected=!1,i.getElement().classList.remove("tabulator-selected"),this.selectedRows.splice(o,1),e||(this.table.options.rowDeselected.call(this.table,i.getComponent()),this._rowSelectionChanged())):e||console.warn("Deselection Error - No such row found, ignoring selection:"+t)},G.prototype.getSelectedData=function(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getData())}),t},G.prototype.getSelectedRows=function(){var t=[];return this.selectedRows.forEach(function(e){t.push(e.getComponent())}),t},G.prototype._rowSelectionChanged=function(){this.table.options.rowSelectionChanged.call(this.table,this.getSelectedData(),this.getSelectedRows())},c.prototype.registerModule("selectRow",G);var j=function(t){this.table=t,this.sortList=[],this.changed=!1};j.prototype.initializeColumn=function(t,e){var o,i,n=this,s=!1;switch(q(t.definition.sorter)){case"string":n.sorters[t.definition.sorter]?s=n.sorters[t.definition.sorter]:console.warn("Sort Error - No such sorter found: ",t.definition.sorter);break;case"function":s=t.definition.sorter;}t.modules.sort={sorter:s,dir:"none",params:t.definition.sorterParams||{},startingDir:t.definition.headerSortStartingDir||"asc"},!1!==t.definition.headerSort&&((o=t.getElement()).classList.add("tabulator-sortable"),(i=document.createElement("div")).classList.add("tabulator-arrow"),e.appendChild(i),o.addEventListener("click",function(e){var o="",i=[],s=!1;t.modules.sort&&(o="asc"==t.modules.sort.dir?"desc":"desc"==t.modules.sort.dir?"asc":t.modules.sort.startingDir,n.table.options.columnHeaderSortMulti&&(e.shiftKey||e.ctrlKey)?((s=(i=n.getSort()).findIndex(function(e){return e.field===t.getField()}))>-1?(i[s].dir="asc"==i[s].dir?"desc":"asc",s!=i.length-1&&i.push(i.splice(s,1)[0])):i.push({column:t,dir:o}),n.setSort(i)):n.setSort(t,o),n.table.rowManager.sorterRefresh())}))},j.prototype.hasChanged=function(){var t=this.changed;return this.changed=!1,t},j.prototype.getSort=function(){var t=[];return this.sortList.forEach(function(e){e.column&&t.push({column:e.column.getComponent(),field:e.column.getField(),dir:e.dir})}),t},j.prototype.setSort=function(t,e){var o=this,i=[];Array.isArray(t)||(t=[{column:t,dir:e}]),t.forEach(function(t){var e;(e=o.table.columnManager.findColumn(t.column))?(t.column=e,i.push(t),o.changed=!0):console.warn("Sort Warning - Sort field does not exist and is being ignored: ",t.column)}),o.sortList=i,this.table.options.persistentSort&&this.table.modExists("persistence",!0)&&this.table.modules.persistence.save("sort")},j.prototype.clear=function(){this.setSort([])},j.prototype.findSorter=function(t){var e,o=this.table.rowManager.activeRows[0],i="string";if(o&&(o=o.getData(),t.getField()))switch(void 0===(e=t.getFieldValue(o))?"undefined":q(e)){case"undefined":i="string";break;case"boolean":i="boolean";break;default:isNaN(e)||""===e?e.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)&&(i="alphanum"):i="number";}return this.sorters[i]},j.prototype.sort=function(){var t,e=this;t=this.table.options.sortOrderReverse?e.sortList.slice().reverse():e.sortList,e.table.options.dataSorting&&e.table.options.dataSorting.call(e.table,e.getSort()),e.clearColumnHeaders(),e.table.options.ajaxSorting?t.forEach(function(t,o){e.setColumnHeader(t.column,t.dir)}):t.forEach(function(o,i){o.column&&o.column.modules.sort&&(o.column.modules.sort.sorter||(o.column.modules.sort.sorter=e.findSorter(o.column)),e._sortItem(o.column,o.dir,t,i)),e.setColumnHeader(o.column,o.dir)}),e.table.options.dataSorted&&e.table.options.dataSorted.call(e.table,e.getSort(),e.table.rowManager.getComponents(!0))},j.prototype.clearColumnHeaders=function(){this.table.columnManager.getRealColumns().forEach(function(t){t.modules.sort&&(t.modules.sort.dir="none",t.getElement().setAttribute("aria-sort","none"))})},j.prototype.setColumnHeader=function(t,e){t.modules.sort.dir=e,t.getElement().setAttribute("aria-sort",e)},j.prototype._sortItem=function(t,e,o,i){var n=this,s=n.table.rowManager.activeRows,r="function"==typeof t.modules.sort.params?t.modules.sort.params(t.getComponent(),e):t.modules.sort.params;s.sort(function(s,a){var l=n._sortRow(s,a,t,e,r);if(0===l&&i)for(var u=i-1;u>=0&&0===(l=n._sortRow(s,a,o[u].column,o[u].dir,r));u--);return l})},j.prototype._sortRow=function(t,e,o,i,n){var s,r,a="asc"==i?t:e,l="asc"==i?e:t;return t=void 0!==(t=o.getFieldValue(a.getData()))?t:"",e=void 0!==(e=o.getFieldValue(l.getData()))?e:"",s=a.getComponent(),r=l.getComponent(),o.modules.sort.sorter.call(this,t,e,s,r,o.getComponent(),i,n)},j.prototype.sorters={number:function(t,e,o,i,n,s,r){var a=r.alignEmptyValues,l=0;if(t=parseFloat(String(t).replace(",","")),e=parseFloat(String(e).replace(",","")),isNaN(t))l=isNaN(e)?0:-1;else{if(!isNaN(e))return t-e;l=1}return("top"===a&&"desc"===s||"bottom"===a&&"asc"===s)&&(l*=-1),l},string:function(t,e,o,i,n,s,r){var a,l=r.alignEmptyValues,u=0;if(t){if(e){switch(q(r.locale)){case"boolean":r.locale&&(a=this.table.modules.localize.getLocale());break;case"string":a=r.locale;}return String(t).toLowerCase().localeCompare(String(e).toLowerCase(),a)}u=1}else u=e?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(u*=-1),u},date:function(t,e,o,i,n,s,r){return r.format||(r.format="DD/MM/YYYY"),this.sorters.datetime.call(this,t,e,o,i,n,s,r)},time:function(t,e,o,i,n,s,r){return r.format||(r.format="hh:mm"),this.sorters.datetime.call(this,t,e,o,i,n,s,r)},datetime:function(t,e,o,i,n,s,r){var a=r.format||"DD/MM/YYYY hh:mm:ss",l=r.alignEmptyValues,u=0;if("undefined"!=typeof moment){if(t=moment(t,a),e=moment(e,a),t.isValid()){if(e.isValid())return t-e;u=1}else u=e.isValid()?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(u*=-1),u}console.error("Sort Error - 'datetime' sorter is dependant on moment.js")},boolean:function(t,e,o,i,n,s,r){return(!0===t||"true"===t||"True"===t||1===t?1:0)-(!0===e||"true"===e||"True"===e||1===e?1:0)},array:function(t,e,o,i,n,s,r){var a=r.type||"length",l=r.alignEmptyValues,u=0;function c(t){switch(a){case"length":return t.length;case"sum":return t.reduce(function(t,e){return t+e});case"max":return Math.max.apply(null,t);case"min":return Math.min.apply(null,t);case"avg":return t.reduce(function(t,e){return t+e})/t.length;}}if(Array.isArray(t)){if(Array.isArray(e))return(t?c(t):0)-(e?c(e):0);l=1}else l=Array.isArray(e)?-1:0;return("top"===l&&"desc"===s||"bottom"===l&&"asc"===s)&&(u*=-1),u},exists:function(t,e,o,i,n,s,r){return(void 0===t?0:1)-(void 0===e?0:1)},alphanum:function(t,e,o,i,n,s,r){var a,l,u,c,d,h=0,p=/(\d+)|(\D+)/g,m=/\d/,f=r.alignEmptyValues,g=0;if(t||0===t){if(e||0===e){if(isFinite(t)&&isFinite(e))return t-e;if((a=String(t).toLowerCase())===(l=String(e).toLowerCase()))return 0;if(!m.test(a)||!m.test(l))return a>l?1:-1;for(a=a.match(p),l=l.match(p),d=a.length>l.length?l.length:a.length;h<d;)if((u=a[h])!==(c=l[h++]))return isFinite(u)&&isFinite(c)?("0"===u.charAt(0)&&(u="."+u),"0"===c.charAt(0)&&(c="."+c),u-c):u>c?1:-1;return a.length>l.length}g=1}else g=e||0===e?-1:0;return("top"===f&&"desc"===s||"bottom"===f&&"asc"===s)&&(g*=-1),g}},c.prototype.registerModule("sort",j);var $=function(t){this.table=t};return $.prototype.initializeColumn=function(t){var e,o=this,i=[];t.definition.validator&&(Array.isArray(t.definition.validator)?t.definition.validator.forEach(function(t){(e=o._extractValidator(t))&&i.push(e)}):(e=this._extractValidator(t.definition.validator))&&i.push(e),t.modules.validate=!!i.length&&i)},$.prototype._extractValidator=function(t){var e,o,i;switch(void 0===t?"undefined":q(t)){case"string":return o=(e=t.split(":",2)).shift(),i=e[0],this._buildValidator(o,i);case"function":return this._buildValidator(t);case"object":return this._buildValidator(t.type,t.parameters);}},$.prototype._buildValidator=function(t,e){var o="function"==typeof t?t:this.validators[t];return o?{type:"function"==typeof t?"function":t,func:o,params:e}:(console.warn("Validator Setup Error - No matching validator found:",t),!1)},$.prototype.validate=function(t,e,o){var i=this,n=[];return t&&t.forEach(function(t){t.func.call(i,e,o,t.params)||n.push({type:t.type,parameters:t.params})}),!n.length||n},$.prototype.validators={integer:function(t,e,o){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&Math.floor(e)===e},float:function(t,e,o){return""===e||null==e||"number"==typeof(e=Number(e))&&isFinite(e)&&e%1!=0},numeric:function(t,e,o){return""===e||null==e||!isNaN(e)},string:function(t,e,o){return""===e||null==e||isNaN(e)},max:function(t,e,o){return""===e||null==e||parseFloat(e)<=o},min:function(t,e,o){return""===e||null==e||parseFloat(e)>=o},minLength:function(t,e,o){return""===e||null==e||String(e).length>=o},maxLength:function(t,e,o){return""===e||null==e||String(e).length<=o},in:function(t,e,o){return""===e||null==e||("string"==typeof o&&(o=o.split("|")),""===e||o.indexOf(e)>-1)},regex:function(t,e,o){return""===e||null==e||new RegExp(o).test(e)},unique:function(t,e,o){if(""===e||null==e)return!0;var i=!0,n=t.getData(),s=t.getColumn()._getSelf();return this.table.rowManager.rows.forEach(function(t){var o=t.getData();o!==n&&e==s.getFieldValue(o)&&(i=!1)}),i},required:function(t,e,o){return""!==e&null!==e&&void 0!==e}},c.prototype.registerModule("validate",$),c});var ta=function(n,o){if(insight.isDebugEnabled()){var e=window.performance.now(),t=o(),r=function(){var o=window.performance.now();console.info("".concat(n," has finished in: ").concat(Math.round(o-e).toLocaleString()," milliseconds"))};return t instanceof Promise?t.then(function(n){return r(),n}):(r(),t)}return o()};var Ad={},Aq="object"==typeof Ua&&Ua&&Ua.Object===Object&&Ua;Ad=Aq;var b={},tq="object"==typeof self&&self&&self.Object===Object&&self,pq=Ad||tq||Function("return this")();b=pq;var a={},oq=b.Symbol;a=oq;var hq={},bc=Object.prototype,Xp=bc.hasOwnProperty,Tp=bc.toString,pa=a?a.toStringTag:void 0;function Pp($){var r=Xp.call($,pa),a=$[pa];try{$[pa]=void 0;var n=!0}catch(o){}var t=Tp.call($);return n&&(r?$[pa]=a:delete $[pa]),t}hq=Pp;var Op={},Np=Object.prototype,Kp=Np.toString;function Gp(t){return Kp.call(t)}Op=Gp;var e={},Ep="[object Null]",yp="[object Undefined]",Nc=a?a.toStringTag:void 0;function Vo(r){return null==r?void 0===r?yp:Ep:Nc&&Nc in Object(r)?hq(r):Op(r)}e=Vo;var h={};function Uo($){var t=typeof $;return null!=$&&("object"==t||"function"==t)}h=Uo;var v={},Mo="[object AsyncFunction]",vo="[object Function]",to="[object GeneratorFunction]",ro="[object Proxy]";function io($){if(!h($))return!1;var x=e($);return x==vo||x==to||x==Mo||x==ro}v=io;var rb={},go=b["__core-js_shared__"];rb=go;var bo={},Id=function(){var $=/[^.]+$/.exec(rb&&rb.keys&&rb.keys.IE_PROTO||"");return $?"Symbol(src)_1."+$:""}();function On($){return!!Id&&Id in $}bo=On;var o={},Nn=Function.prototype,Jn=Nn.toString;function In(r){if(null!=r){try{return Jn.call(r)}catch($){}try{return r+""}catch($){}}return""}o=In;var Fn={},xn=/[\\^$.*+?()[\]{}|]/g,vn=/^\[object .+?Constructor\]$/,pn=Function.prototype,hn=Object.prototype,fn=pn.toString,dn=hn.hasOwnProperty,$m=RegExp("^"+fn.call(dn).replace(xn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xm($){return!(!h($)||bo($))&&(v($)?$m:vn).test(o($))}Fn=Xm;var Wm={};function Mm($,e){return null==$?void 0:$[e]}Wm=Mm;var s={};function Lm($,e){var a=Wm($,e);return Fn(a)?a:void 0}s=Lm;var Ra={},Im=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();Ra=Im;var nb={};function Hm(e,r,$){"__proto__"==r&&Ra?Ra(e,r,{configurable:!0,enumerable:!0,value:$,writable:!0}):e[r]=$}nb=Hm;var ua={};function Fm(u,$){return u===$||u!=u&&$!=$}ua=Fm;var Z={},um=Object.prototype,mm=um.hasOwnProperty;function lm($,r,a){var e=$[r];mm.call($,r)&&ua(e,a)&&(void 0!==a||r in $)||nb($,r,a)}Z=lm;var d={},km=Array.isArray;d=km;var c={};function jm($){return null!=$&&"object"==typeof $}c=jm;var u={},hm="[object Symbol]";function fm($){return"symbol"==typeof $||c($)&&e($)==hm}u=fm;var kb={},em=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dm=/^\w*$/;function cm(r,$){if(d(r))return!1;var e=typeof r;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=r&&!u(r))||dm.test(r)||!em.test(r)||null!=$&&r in Object($)}kb=cm;var qa={},bm=s(Object,"create");qa=bm;var _l={};function Zl(){this.__data__=qa?qa(null):{},this.size=0}_l=Zl;var Wl={};function Vl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}Wl=Vl;var Ul={},Rl="__lodash_hash_undefined__",Ql=Object.prototype,Jl=Ql.hasOwnProperty;function Cl($){var r=this.__data__;if(qa){var v=r[$];return v===Rl?void 0:v}return Jl.call(r,$)?r[$]:void 0}Ul=Cl;var Al={},zl=Object.prototype,ul=zl.hasOwnProperty;function sl(a){var $=this.__data__;return qa?void 0!==$[a]:ul.call($,a)}Al=sl;var rl={},ml="__lodash_hash_undefined__";function kl($,a){var e=this.__data__;return this.size+=this.has($)?0:1,e[$]=qa&&void 0===a?ml:a,this}rl=kl;var nd={};function U($){var a=-1,e=null==$?0:$.length;for(this.clear();++a<e;){var r=$[a];this.set(r[0],r[1])}}U.prototype.clear=_l,U.prototype.delete=Wl,U.prototype.get=Ul,U.prototype.has=Al,U.prototype.set=rl,nd=U;var Rk={};function Pk(){this.__data__=[],this.size=0}Rk=Pk;var Ia={};function Ok(e,$){for(var r=e.length;r--;)if(ua(e[r][0],$))return r;return-1}Ia=Ok;var Hk={},Gk=Array.prototype,Fk=Gk.splice;function Bk(e){var $=this.__data__,r=Ia($,e);return!(r<0)&&(r==$.length-1?$.pop():Fk.call($,r,1),--this.size,!0)}Hk=Bk;var zk={};function xk($){var a=this.__data__,e=Ia(a,$);return e<0?void 0:a[e][1]}zk=xk;var wk={};function uk(e){return Ia(this.__data__,e)>-1}wk=uk;var sk={};function nk(a,$){var s=this.__data__,e=Ia(s,a);return e<0?(++this.size,s.push([a,$])):s[e][1]=$,this}sk=nk;var ra={};function Y(e){var $=-1,a=null==e?0:e.length;for(this.clear();++$<a;){var t=e[$];this.set(t[0],t[1])}}Y.prototype.clear=Rk,Y.prototype.delete=Hk,Y.prototype.get=zk,Y.prototype.has=wk,Y.prototype.set=sk,ra=Y;var ia={},kk=s(b,"Map");ia=kk;var fk={};function dk(){this.size=0,this.__data__={hash:new nd,map:new(ia||ra),string:new nd}}fk=dk;var ck={};function ak(r){var e=typeof r;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r}ck=ak;var wa={};function $j(a,$){var e=a.__data__;return ck($)?e["string"==typeof $?"string":"hash"]:e.map}wa=$j;var Xj={};function Nj(e){var a=wa(this,e).delete(e);return this.size-=a?1:0,a}Xj=Nj;var Lj={};function Gj(a){return wa(this,a).get(a)}Lj=Gj;var Ej={};function sj(a){return wa(this,a).has(a)}Ej=sj;var oj={};function ej(a,$){var e=wa(this,a),t=e.size;return e.set(a,$),this.size+=e.size==t?0:1,this}oj=ej;var Da={};function R(a){var e=-1,$=null==a?0:a.length;for(this.clear();++e<$;){var r=a[e];this.set(r[0],r[1])}}R.prototype.clear=fk,R.prototype.delete=Xj,R.prototype.get=Lj,R.prototype.has=Ej,R.prototype.set=oj,Da=R;var $i={},Ri="Expected a function";function $a(r,e){if("function"!=typeof r||null!=e&&"function"!=typeof e)throw new TypeError(Ri);var $=function(){var a=arguments,c=e?e.apply(this,a):a[0],t=$.cache;if(t.has(c))return t.get(c);var l=r.apply(this,a);return $.cache=t.set(c,l)||t,l};return $.cache=new($a.Cache||Da),$}$a.Cache=Da,$i=$a;var Pi={},Ni=500;function Ii(r){var $=$i(r,function(r){return e.size===Ni&&e.clear(),r}),e=$.cache;return $}Pi=Ii;var Ei={},Ci=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bi=/\\(\\)?/g,zi=Pi(function($){var r=[];return 46===$.charCodeAt(0)&&r.push(""),$.replace(Ci,function($,e,p,a){r.push(p?a.replace(Bi,"$1"):e||$)}),r});Ei=zi;var i={};function oi(r,a){for(var $=-1,e=null==r?0:r.length,n=Array(e);++$<e;)n[$]=a(r[$],$,r);return n}i=oi;var kc={},ki=1/0,mc=a?a.prototype:void 0,nc=mc?mc.toString:void 0;function oc($){if("string"==typeof $)return $;if(d($))return i($,oc)+"";if(u($))return nc?nc.call($):"";var a=$+"";return"0"==a&&1/$==-ki?"-0":a}kc=oc;var la={};function ii($){return null==$?"":kc($)}la=ii;var O={};function fi(r,$){return d(r)?r:kb(r,$)?[r]:Ei(la(r))}O=fi;var na={},ei=9007199254740991,di=/^(?:0|[1-9]\d*)$/;function bi($,s){var r=typeof $;return!!(s=null==s?ei:s)&&("number"==r||"symbol"!=r&&di.test($))&&$>-1&&$%1==0&&$<s}na=bi;var N={},$h=1/0;function Yh($){if("string"==typeof $||u($))return $;var r=$+"";return"0"==r&&1/$==-$h?"-0":r}N=Yh;var Ac={};function Uh($,r,e,a){if(!h($))return $;for(var c=-1,l=(r=O(r,$)).length,y=l-1,t=$;null!=t&&++c<l;){var i=N(r[c]),m=e;if(c!=y){var s=t[i];void 0===(m=a?a(s,i,t):void 0)&&(m=h(s)?s:na(r[c+1])?[]:{})}Z(t,i,m),t=t[i]}return $}Ac=Uh;var G={};function Th($,e,r){return null==$?$:Ac($,e,r)}G=Th;var Qh={};function Gh(r,$,e){for(var t=-1,a=r.length,v=$.length,n={};++t<a;){var o=t<v?$[t]:void 0;e(n,r[t],o)}return n}Qh=Gh;var xh={};function vh($,e){return Qh($||[],e||[],Z)}xh=vh;var Na={};function qh(r,$){for(var a=-1,o=null==r?0:r.length,t=0,e=[];++a<o;){var f=r[a];$(f,a,r)&&(e[t++]=f)}return e}Na=qh;var oh={};function mh(r){return function(e,a,t){for(var $=-1,n=Object(e),o=t(e),B=o.length;B--;){var c=o[r?B:++$];if(!1===a(n[c],c,n))break}return e}}oh=mh;var jh={},hh=oh();jh=hh;var Oc={};function eh(r,$){for(var a=-1,e=Array(r);++a<r;)e[a]=$(a);return e}Oc=eh;var Qc={},dh="[object Arguments]";function Yg($){return c($)&&e($)==dh}Qc=Yg;var Ta={},Uc=Object.prototype,Xg=Uc.hasOwnProperty,Vg=Uc.propertyIsEnumerable,Lg=Qc(function(){return arguments}())?Qc:function(r){return c(r)&&Xg.call(r,"callee")&&!Vg.call(r,"callee")};Ta=Lg;var Jg={};function Bg(){return!1}Jg=Bg;var fa=function(){var e={exports:this},o="object"==typeof this&&this&&!this.nodeType&&this,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=s&&s.exports===o?b.Buffer:void 0,p=(i?i.isBuffer:void 0)||Jg;return e.exports=p,e.exports}.call({});var ib={},xg=9007199254740991;function vg($){return"number"==typeof $&&$>-1&&$%1==0&&$<=xg}ib=vg;var pg={},ng={};function lg($){return c($)&&ib($.length)&&!!ng[e($)]}pg=lg;var La={};function fg(r){return function($){return r($)}}La=fg;var V=function(){var e={exports:this},r="object"==typeof this&&this&&!this.nodeType&&this,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r&&Ad.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();return e.exports=s,e.exports}.call({});var ob={},jd=V&&V.isTypedArray,dg=jd?La(jd):pg;ob=dg;var ld={},Xf=Object.prototype,Tf=Xf.hasOwnProperty;function Rf(r,$){var e=d(r),a=!e&&Ta(r),s=!e&&!a&&fa(r),i=!e&&!a&&!s&&ob(r),j=e||a||s||i,L=j?Oc(r.length,String):[],t=L.length;for(var V in r)!$&&!Tf.call(r,V)||j&&("length"==V||s&&("offset"==V||"parent"==V)||i&&("buffer"==V||"byteLength"==V||"byteOffset"==V)||na(V,t))||L.push(V);return L}ld=Rf;var oa={},Nf=Object.prototype;function Jf(o){var t=o&&o.constructor;return o===("function"==typeof t&&t.prototype||Nf)}oa=Jf;var sd={};function Ef(r,$){return function(e){return r($(e))}}sd=Ef;var Df={},Bf=sd(Object.keys,Object);Df=Bf;var ub={},zf=Object.prototype,yf=zf.hasOwnProperty;function xf(r){if(!oa(r))return Df(r);var $=[];for(var e in Object(r))yf.call(r,e)&&"constructor"!=e&&$.push(e);return $}ub=xf;var n={};function uf($){return null!=$&&ib($.length)&&!v($)}n=uf;var w={};function of(r){return n(r)?ld(r):ub(r)}w=of;var Ed={};function nf($,r){return $&&jh($,r,w)}Ed=nf;var mf={};function lf(r,e){return function(l,$){if(null==l)return l;if(!n(l))return r(l,$);for(var a=l.length,t=e?a:-1,i=Object(l);(e?t--:++t<a)&&!1!==$(i[t],t,i););return l}}mf=lf;var Q={},jf=mf(Ed);Q=jf;var Kd={};function hf($,a){var r=[];return Q($,function($,e,l){a($,e,l)&&r.push($)}),r}Kd=hf;var ff={};function df(){this.__data__=new ra,this.size=0}ff=df;var bf={};function _e(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}bf=_e;var Ue={};function Se(a){return this.__data__.get(a)}Ue=Se;var Pe={};function Ne(c){return this.__data__.has(c)}Pe=Ne;var Le={},Je=200;function He($,a){var e=this.__data__;if(e instanceof ra){var r=e.__data__;if(!ia||r.length<Je-1)return r.push([$,a]),this.size=++e.size,this;e=this.__data__=new Da(r)}return e.set($,a),this.size=e.size,this}Le=He;var ga={};function P(e){var $=this.__data__=new ra(e);this.size=$.size}P.prototype.clear=ff,P.prototype.delete=bf,P.prototype.get=Ue,P.prototype.has=Pe,P.prototype.set=Le,ga=P;var Ge={},qe="__lodash_hash_undefined__";function me($){return this.__data__.set($,qe),this}Ge=me;var ie={};function bl(a){return this.__data__.has(a)}ie=bl;var ce={};function Pa($){var a=-1,e=null==$?0:$.length;for(this.__data__=new Da;++a<e;)this.add($[a])}Pa.prototype.add=Pa.prototype.push=Ge,Pa.prototype.has=ie,ce=Pa;var ee={};function ge(r,e){for(var $=-1,a=null==r?0:r.length;++$<a;)if(e(r[$],$,r))return!0;return!1}ee=ge;var be={};function he($,a){return $.has(a)}be=he;var ae={},je=1,ke=2;function le(r,e,$,a,A,y){var G=$&je,t=r.length,v=e.length;if(t!=v&&!(G&&v>t))return!1;var i=y.get(r);if(i&&y.get(e))return i==e;var K=-1,c=!0,n=$&ke?new ce:void 0;for(y.set(r,e),y.set(e,r);++K<t;){var u=r[K],f=e[K];if(a)var o=G?a(f,u,K,e,r,y):a(u,f,K,r,e,y);if(void 0!==o){if(o)continue;c=!1;break}if(n){if(!ee(e,function(r,e){if(!be(n,e)&&(u===r||A(u,r,$,a,y)))return n.push(e)})){c=!1;break}}else if(u!==f&&!A(u,f,$,a,y)){c=!1;break}}return y.delete(r),y.delete(e),c}ae=le;var Ea={},ne=b.Uint8Array;Ea=ne;var oe={};function pe(r){var a=-1,$=Array(r.size);return r.forEach(function(r,n){$[++a]=[n,r]}),$}oe=pe;var Lb={};function re(r){var $=-1,a=Array(r.size);return r.forEach(function(r){a[++$]=r}),a}Lb=re;var se={},te=1,ue=2,ve="[object Boolean]",we="[object Date]",xe="[object Error]",ye="[object Map]",ze="[object Number]",Ae="[object RegExp]",Be="[object Set]",Ce="[object String]",De="[object Symbol]",Ee="[object ArrayBuffer]",Fe="[object DataView]",Zd=a?a.prototype:void 0,Ib=Zd?Zd.valueOf:void 0;function Ie($,r,a,e,o,q,E){switch(a){case Fe:if($.byteLength!=r.byteLength||$.byteOffset!=r.byteOffset)return!1;$=$.buffer,r=r.buffer;case Ee:return!($.byteLength!=r.byteLength||!q(new Ea($),new Ea(r)));case ve:case we:case ze:return ua(+$,+r);case xe:return $.name==r.name&&$.message==r.message;case Ae:case Ce:return $==r+"";case ye:var t=oe;case Be:var v=e&te;if(t||(t=Lb),$.size!=r.size&&!v)return!1;var H=E.get($);if(H)return H==r;e|=ue,E.set($,r);var s=ae(t($),t(r),e,o,q,E);return E.delete($),s;case De:if(Ib)return Ib.call($)==Ib.call(r);}return!1}se=Ie;var Hb={};function Ke(r,$){for(var i=-1,a=$.length,t=r.length;++i<a;)r[t+i]=$[i];return r}Hb=Ke;var Ud={};function Me(r,$,a){var e=$(r);return d(r)?e:Hb(e,a(r))}Ud=Me;var Td={};function Oe(){return[]}Td=Oe;var Gb={},Qe=Object.prototype,Re=Qe.propertyIsEnumerable,Rd=Object.getOwnPropertySymbols,Te=Rd?function(r){return null==r?[]:(r=Object(r),Na(Rd(r),function($){return Re.call(r,$)}))}:Td;Gb=Te;var Fb={};function Ve($){return Ud($,w,Gb)}Fb=Ve;var We={},Xe=1,Ye=Object.prototype,Ze=Ye.hasOwnProperty;function $e(r,t,e,$,o,a){var n=e&Xe,c=Fb(r),v=c.length;if(v!=Fb(t).length&&!n)return!1;for(var s=v;s--;){var l=c[s];if(!(n?l in t:Ze.call(t,l)))return!1}var i=a.get(r);if(i&&a.get(t))return i==t;var C=!0;a.set(r,t),a.set(t,r);for(var E=n;++s<v;){var I=r[l=c[s]],f=t[l];if($)var u=n?$(f,I,l,t,r,a):$(I,f,l,r,t,a);if(!(void 0===u?I===f||o(I,f,e,$,a):u)){C=!1;break}E||(E="constructor"==l)}if(C&&!E){var A=r.constructor,p=t.constructor;A!=p&&"constructor"in r&&"constructor"in t&&!("function"==typeof A&&A instanceof A&&"function"==typeof p&&p instanceof p)&&(C=!1)}return a.delete(r),a.delete(t),C}We=$e;var Eb={},af=s(b,"DataView");Eb=af;var Db={},cf=s(b,"Promise");Db=cf;var J={},ef=s(b,"Set");J=ef;var $={},gf=s(b,"WeakMap");$=gf;var C={},Jd="[object Map]",kf="[object Object]",Hd="[object Promise]",Gd="[object Set]",Fd="[object WeakMap]",Dd="[object DataView]",pf=o(Eb),qf=o(ia),rf=o(Db),sf=o(J),tf=o($),H=e;(Eb&&H(new Eb(new ArrayBuffer(1)))!=Dd||ia&&H(new ia)!=Jd||Db&&H(Db.resolve())!=Hd||J&&H(new J)!=Gd||$&&H(new $)!=Fd)&&(H=function($){var a=e($),r=a==kf?$.constructor:void 0,g=r?o(r):"";if(g)switch(g){case pf:return Dd;case qf:return Jd;case rf:return Hd;case sf:return Gd;case tf:return Fd;}return a}),C=H;var vf={},wf=1,zd="[object Arguments]",yd="[object Array]",sa="[object Object]",Af=Object.prototype,vd=Af.hasOwnProperty;function Cf($,r,a,v,e,g){var y=d($),V=d(r),t=y?yd:C($),c=V?yd:C(r),s=(t=t==zd?sa:t)==sa,u=(c=c==zd?sa:c)==sa,i=t==c;if(i&&fa($)){if(!fa(r))return!1;y=!0,s=!1}if(i&&!s)return g||(g=new ga),y||ob($)?ae($,r,a,v,e,g):se($,r,t,a,v,e,g);if(!(a&wf)){var l=s&&vd.call($,"__wrapped__"),p=u&&vd.call(r,"__wrapped__");if(l||p){var o=l?$.value():$,T=p?r.value():r;return g||(g=new ga),e(o,T,a,v,g)}}return!!i&&(g||(g=new ga),We($,r,a,v,e,g))}vf=Cf;var tb={};function td($,e,z,a,b){return $===e||(null==$||null==e||!c($)&&!c(e)?$!=$&&e!=e:vf($,e,z,a,td,b))}tb=td;var Ff={},Gf=1,Hf=2;function If($,r,a,e){var M=a.length,v=M,S=!e;if(null==$)return!v;for($=Object($);M--;){var t=a[M];if(S&&t[2]?t[1]!==$[t[0]]:!(t[0]in $))return!1}for(;++M<v;){var Y=(t=a[M])[0],i=$[Y],s=t[1];if(S&&t[2]){if(void 0===i&&!(Y in $))return!1}else{var n=new ga;if(e)var u=e(i,s,Y,$,r,n);if(!(void 0===u?tb(s,i,Gf|Hf,e,n):u))return!1}}return!0}Ff=If;var rd={};function Kf($){return $==$&&!h($)}rd=Kf;var Lf={};function Mf(r){for(var $=w(r),a=$.length;a--;){var e=$[a],p=r[e];$[a]=[e,p,rd(p)]}return $}Lf=Mf;var qd={};function Of(r,t){return function($){return null!=$&&$[r]===t&&(void 0!==t||r in Object($))}}qd=Of;var Pf={};function Qf(a){var $=Lf(a);return 1==$.length&&$[0][2]?qd($[0][0],$[0][1]):function(r){return r===a||Ff(r,a,$)}}Pf=Qf;var ma={};function Sf($,r){for(var a=0,e=(r=O(r,$)).length;null!=$&&a<e;)$=$[N(r[a++])];return a&&a==e?$:void 0}ma=Sf;var B={};function Uf(e,$,v){var r=null==e?void 0:ma(e,$);return void 0===r?v:r}B=Uf;var Vf={};function Wf(s,$){return null!=s&&$ in Object(s)}Vf=Wf;var md={};function Yf($,r,a){for(var e=-1,t=(r=O(r,$)).length,j=!1;++e<t;){var s=N(r[e]);if(!(j=null!=$&&a($,s)))break;$=$[s]}return j||++e!=t?j:!!(t=null==$?0:$.length)&&ib(t)&&na(s,t)&&(d($)||Ta($))}md=Yf;var Zf={};function $f($,a){return null!=$&&md($,a,Vf)}Zf=$f;var _f={},ag=1,bg=2;function cg($,r){return kb($)&&rd(r)?qd(N($),r):function(a){var e=B(a,$);return void 0===e&&e===r?Zf(a,$):tb(r,e,ag|bg)}}_f=cg;var A={};function eg(t){return t}A=eg;var mb={};function gg(r){return function($){return null==$?void 0:$[r]}}mb=gg;var hg={};function ig(e){return function(r){return ma(r,e)}}hg=ig;var jg={};function kg(r){return kb(r)?mb(N(r)):hg(r)}jg=kg;var g={};function mg(r){return"function"==typeof r?r:null==r?A:"object"==typeof r?d(r)?_f(r[0],r[1]):Pf(r):jg(r)}g=mg;var E={};function og(r,$){return(d(r)?Na:Kd)(r,g($,3))}E=og;var cd={};function qg(r,t,$,e){for(var n=r.length,x=$+(e?1:-1);e?x--:++x<n;)if(t(r[x],x,r))return x;return-1}cd=qg;var rg={};function sg($){return $!=$}rg=sg;var tg={};function ug(r,e,t){for(var $=t-1,a=r.length;++$<a;)if(r[$]===e)return $;return-1}tg=ug;var bd={};function wg($,e,r){return e==e?tg($,e,r):cd($,rg,r)}bd=wg;var ad={};function yg(r,$){return!!(null==r?0:r.length)&&bd(r,$,0)>-1}ad=yg;var zg={};function Ag(r,$,a){for(var n=-1,t=null==r?0:r.length;++n<t;)if(a($,r[n]))return!0;return!1}zg=Ag;var ea={};function Cg(){}ea=Cg;var Dg={},Eg=1/0,Fg=J&&1/Lb(new J([,-0]))[1]==Eg?function($){return new J($)}:ea;Dg=Fg;var Gg={},Hg=200;function Ig(a,r,$){var e=-1,h=ad,A=a.length,c=!0,s=[],t=s;if($)c=!1,h=zg;else if(A>=Hg){var u=r?null:Dg(a);if(u)return Lb(u);c=!1,h=be,t=new ce}else t=r?[]:s;a:for(;++e<A;){var v=a[e],l=r?r(v):v;if(v=$||0!==v?v:0,c&&l==l){for(var i=t.length;i--;)if(t[i]===l)continue a;r&&t.push(l),s.push(v)}else h(t,l,$)||(t!==s&&t.push(l),s.push(v))}return s}Gg=Ig;var Ca={};function Kg($){return $&&$.length?Gg($):[]}Ca=Kg;var D={},Mg="[object Map]",Ng="[object Set]",Og=Object.prototype,Pg=Og.hasOwnProperty;function Qg(r){if(null==r)return!0;if(n(r)&&(d(r)||"string"==typeof r||"function"==typeof r.splice||fa(r)||ob(r)||Ta(r)))return!r.length;var $=C(r);if($==Mg||$==Ng)return!r.size;if(oa(r))return!ub(r).length;for(var e in r)if(Pg.call(r,e))return!1;return!0}D=Qg;var Rg={};function Sg(r,$,a,e){var q=-1,n=null==r?0:r.length;for(e&&n&&(a=r[++q]);++q<n;)a=$(a,r[q],q,r);return a}Rg=Sg;var Tg={};function Ug($,e,r,a,n){return n($,function($,n,t){r=a?(a=!1,$):e(r,$,n,t)}),r}Tg=Ug;var ca={};function Wg(e,r,$){var l=d(e)?Rg:Tg,a=arguments.length<3;return l(e,g(r,4),$,a,Q)}ca=Wg;var _={},Nd=NaN,Zg=/^\s+|\s+$/g,$g=/^[-+]0x[0-9a-f]+$/i,_g=/^0b[01]+$/i,ah=/^0o[0-7]+$/i,bh=parseInt;function ch($){if("number"==typeof $)return $;if(u($))return Nd;if(h($)){var a="function"==typeof $.valueOf?$.valueOf():$;$=h(a)?a+"":a}if("string"!=typeof $)return 0===$?$:+$;$=$.replace(Zg,"");var r=_g.test($);return r||ah.test($)?bh($.slice(2),r?2:8):$g.test($)?Nd:+$}_=ch;var W={},Pc=1/0,fh=1.7976931348623157e308;function gh($){return $?($=_($))===Pc||$===-Pc?($<0?-1:1)*fh:$==$?$:0:0===$?$:0}W=gh;var ha={};function ih($){var r=W($),t=r%1;return r==r?t?r-t:r:0}ha=ih;var Mc={},kh=Math.max;function lh(a,e,$){var r=null==a?0:a.length;if(!r)return-1;var n=null==$?0:ha($);return n<0&&(n=kh(r+n,0)),cd(a,g(e,3),n)}Mc=lh;var Lc={};function nh(e,r){var $=-1,a=n(e)?Array(e.length):[];return Q(e,function(e,f,M){a[++$]=r(e,f,M)}),a}Lc=nh;var m={};function ph(r,$){return(d(r)?i:Lc)(r,g($,3))}m=ph;var Ka=insightModules.load("utils/data-utils"),rh=insightModules.load("components/table/create-sparse-data"),sh=insightModules.load("components/table/create-dense-data"),th=insightModules.load("components/autotable-select-options"),uh=function(e,t){var $F9m6$$interop$default=k(m);return $F9m6$$interop$default.d(t,function(t){return e.getEntity(t.name).getIndexSets()})};var qb=Ka.getIndexPosns,wh=function(e,t){for(var r={},$=e.length,a=function(){var $=e[n],a=t[n],i=qb($);$.forEach(function(e,t){var $=i[t];if(null==Ka.getFilterValue(a.filters,e,$)){var n={name:e,position:$},o=JSON.stringify(n);r[o]=(r[o]||0)+1}})},n=0;n<$;n++)a();var $F9m6$$interop$default=k(m);return $F9m6$$interop$default.d(keys(pickBy(r,function(e){return e===$})),function(e){return JSON.parse(e)})};var Gc=function(e,t){return t.slice(0,e.length)};var yh=function(e,t,r,$){var a=qb(r);return r.map(function(r,n){var $wa7H$$interop$default=k(Mc);var i=a[n],o=$wa7H$$interop$default.d(t,{name:r,position:i}),A=Ka.getFilterValue($.filters,r,i);if(-1!==o)return e[o];if(null!=A)return A;throw Error("Cannot generate table with incomplete index configuration. Missing indices: "+r+" for entity: "+$.name)})};var zh=function(e){var $lRKl$$interop$default=k(ca);var t=$lRKl$$interop$default.d(e,function(e,t,r){var $H7Ai$$interop$default=k(G);return $H7Ai$$interop$default.d(e,[t.name,t.position],r)},{});return function(e,r,$,a){var $uCW0$$interop$default=k(D);if($uCW0$$interop$default.d(a.filters))return e;for(var n=qb($),i=[],o=0;o<$.length;o++){var $vzeB$$interop$default=k(B);var A=$[o],s=n[o],p=$vzeB$$interop$default.d(t,[A,s]);if(void 0!==p)i.push(e[p]);else{var l=Ka.getFilterValue(a.filters,A,s);if(null==l)throw Error("Cannot generate table with incomplete index configuration. Missing indices: "+A+" for entity: "+a.name);i.push(l)}}return i}};var Ah=function(e,t){var $lRKl$$interop$default=k(ca);var r=$lRKl$$interop$default.d(e,function(e,t){return e*t.length},1),$=$lRKl$$interop$default.d(t,function(e,t){return e+t.size()},0);return r*t.length>($*Math.log($)||0)},Bh=function(e,t,r,$,a,n){var $uwez$$interop$default=k(Ca);var $F9m6$$interop$default=k(m);var $jAUG$$interop$default=k(E);var i,o=a.defaultScenario,A=$uwez$$interop$default.d($F9m6$$interop$default.d($F9m6$$interop$default.d(r,"id"),function(e){var $vzeB$$interop$default=k(B);return $vzeB$$interop$default.d(a.scenarios,e,o)})),s=$F9m6$$interop$default.d(r,"id"),p=$F9m6$$interop$default.d($,"options.id"),l=$jAUG$$interop$default.d($F9m6$$interop$default.d(r,function(e){try{var $vzeB$$interop$default=k(B);return $vzeB$$interop$default.d(a.scenarios,e.id,o).getArray(e.name)}catch(t){return}})),u=$F9m6$$interop$default.d($,function(e){return $uwez$$interop$default.d(flatMap(A,function(t){return t.getSet(e.name)}))}),c=insight.getView().getProject().getModelSchema(),j=$F9m6$$interop$default.d($,function(e,t){return th.generateSelectOptions(c,A,e.name,u[t])});var $uCW0$$interop$default=k(D);var $xOlx$$interop$default=k(v);return $uCW0$$interop$default.d(l)?{data:[],allSetValues:j}:(i=Ah(u,l)?rh(l,$,e,r,t):ta("PERF: dense data",function(){return sh(u,l,$,e,r,zh($))}),$xOlx$$interop$default.d(n)&&(i=$jAUG$$interop$default.d(i,function(e){return n(e,Gc($,e))})),{data:$F9m6$$interop$default.d(i,function(e){var $POYz$$interop$default=k(xh);return $POYz$$interop$default.d(p.concat(s),e)}),allSetValues:j})};function Ch(r,t){return Fh(r)||Eh(r,t)||Dh()}function Dh(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Eh(r,t){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r)){var e=[],i=!0,o=!1,$=void 0;try{for(var n,a=r[Symbol.iterator]();!(i=(n=a.next()).done)&&(e.push(n.value),!t||e.length!==t);i=!0);}catch(u){o=!0,$=u}finally{try{i||null==a.return||a.return()}finally{if(o)throw $}}return e}}function Fh(r){if(Array.isArray(r))return r}function Fc(r,t){var e=null;return r.some(function(r){return r.getId()===t&&(e=r,!0)}),e||(r.some(function(r){return r.getSelectionIndex()===t&&(e=r,!0)}),e)}function Hh(r){var $F9m6$$interop$default=k(m);var t=insight.getView().getProject().getModelSchema(),e=$F9m6$$interop$default.d(r,"name");var $lqP1$$interop$default=k(sc);var $jAUG$$interop$default=k(E);var $atk5$$interop$default=k(A);var $uwez$$interop$default=k(Ca);return e=(e=e.concat($lqP1$$interop$default.d($F9m6$$interop$default.d(e,function(r){return t.getEntity(r).getIndexSets()})))).concat($jAUG$$interop$default.d($F9m6$$interop$default.d(r,"editorOptionsSet"),$atk5$$interop$default.d)),(e=$uwez$$interop$default.d(e)).concat($jAUG$$interop$default.d($F9m6$$interop$default.d(e,function(r){return t.getEntity(r).getLabelsEntity()}),$atk5$$interop$default.d))}function Ih(r,t){var $HEdP$$interop$default=k(F);var $Pjd1$$interop$default=k(Rh);var $jAUG$$interop$default=k(E);var $F9m6$$interop$default=k(m);return t=[].concat(t),{defaultScenario:$HEdP$$interop$default.d(r.scenario)?t[0]:Fc(t,r.scenario),scenarios:$Pjd1$$interop$default.d($jAUG$$interop$default.d($F9m6$$interop$default.d(r.columnOptions,function(r){return[r.id,Fc(t,r.scenario)]}),function(r){var t=Ch(r,2);t[0];return!!t[1]}))}}function Jh(r){var t=!1,e=ko.observable([]),i=ko.pureComputed(function(){var t=ko.unwrap(r),i=ko.unwrap(e);var $uCW0$$interop$default=k(D);if(!$uCW0$$interop$default.d(t)&&!$uCW0$$interop$default.d(i))return Ih(t,i)}),o=ko.observable(),$=ko.pureComputed(function(){var t=ko.unwrap(r);var $uCW0$$interop$default=k(D);if(!$uCW0$$interop$default.d(t.scenarioList)&&!$uCW0$$interop$default.d(t.columnOptions))try{return o(void 0),insight.getView().withScenarios(t.scenarioList).withEntities(Hh(t.columnOptions)).notify(function(r){e(r)}).start()}catch(i){var $rmX6$$interop$default=k(ea);return o(i),{dispose:$rmX6$$interop$default.d}}});return{data:Mh(function(r){var e=[];var $rmX6$$interop$default=k(ea);t||(e=[$.subscribe($rmX6$$interop$default.d),$.subscribe(function(r){r&&r.dispose()},null,"beforeChange")],t=!0),Nh(function(){if(!(t=!!i.getSubscriptionsCount())){var r=$();var $yla4$$interop$default=k(y);r&&r.dispose(),$yla4$$interop$default.d(e,function(r){return r.dispose()})}},r)},i),errors:o}}var Kh={};function Lh($,u){return tb($,u)}Kh=Lh;var Mh=function(r,e){var $=e.subscribe;return e.subscribe=function(){var o=$.apply(e,arguments);return r(o),o},e};function Nh(r,e){var $=e.dispose;return e.dispose=function(){$.apply(e,arguments),r()},e}var Oh=function(r,e){return e.equalityComparer=r,e};var Ph=k(Kh);var Ec=Oh(Ph.d);var Rh={};function Sh(r){for(var $=-1,a=null==r?0:r.length,o={};++$<a;){var P=r[$];o[P[0]]=P[1]}return o}Rh=Sh;var y={};var Wa={};function Vh(r,a){for(var $=-1,o=null==r?0:r.length;++$<o&&!1!==a(r[$],$,r););return r}Wa=Vh;var Wh={};function Xh($){return"function"==typeof $?$:A}Wh=Xh;var zc={};function Zh($,r){return(d($)?Wa:Q)($,Wh(r))}zc=Zh;y=zc;var F={};function _h($){return void 0===$}F=_h;var ai={},wc=a?a.isConcatSpreadable:void 0;function ci(r){return d(r)||Ta(r)||!!(wc&&r&&r[wc])}ai=ci;var vc={};function uc(r,a,$,l,e){var t=-1,j=r.length;for($||($=ai),e||(e=[]);++t<j;){var n=r[t];a>0&&$(n)?a>1?uc(n,a-1,$,l,e):Hb(e,n):l||(e[e.length]=n)}return e}vc=uc;var sc={};function gi($){return(null==$?0:$.length)?vc($,1):[]}sc=gi;function hi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qc(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ji(t,e,a){return e&&qc(t.prototype,e),a&&qc(t,a),t}var Xa={},li=/^\s+/,mi=b.parseInt;function ni(r,$,t){return t||null==$?$=0:$&&($=+$),mi(la(r).replace(li,""),$||0)}Xa=ni;var Ma={},pi="[object Number]";function qi($){return"number"==typeof $||c($)&&e($)==pi}Ma=qi;var ri={};function si(r,$){var t=r.length;for(r.sort($);t--;)r[t]=r[t].value;return r}ri=si;var ti={};function ui($,r){if($!==r){var m=void 0!==$,i=null===$,d=$==$,e=u($),n=void 0!==r,o=null===r,a=r==r,l=u(r);if(!o&&!l&&!e&&$>r||e&&n&&a&&!o&&!l||i&&n&&a||!m&&a||!d)return 1;if(!i&&!e&&!l&&$<r||l&&m&&d&&!i&&!e||o&&m&&d||!n&&d||!a)return-1}return 0}ti=ui;var vi={};function wi(r,e,n){for(var $=-1,a=r.criteria,i=e.criteria,c=a.length,u=n.length;++$<c;){var t=ti(a[$],i[$]);if(t)return $>=u?t:t*("desc"==n[$]?-1:1)}return r.index-e.index}vi=wi;var xi={};function yi(r,$,a){var e=-1;$=i($.length?$:[A],La(g));var p=Lc(r,function(r,a,p){return{criteria:i($,function($){return $(r)}),index:++e,value:r}});return ri(p,function(r,$){return vi(r,$,a)})}xi=yi;var Ya={};function Ai(l,r,a){switch(a.length){case 0:return l.call(r);case 1:return l.call(r,a[0]);case 2:return l.call(r,a[0],a[1]);case 3:return l.call(r,a[0],a[1],a[2]);}return l.apply(r,a)}Ya=Ai;var gc={},fc=Math.max;function Di(r,$,a){return $=fc(void 0===$?r.length-1:$,0),function(){for(var e=arguments,v=-1,t=fc(e.length-$,0),g=Array(t);++v<t;)g[v]=e[$+v];v=-1;for(var R=Array($+1);++v<$;)R[v]=e[v];return R[$]=a(g),Ya(r,this,R)}}gc=Di;var ec={};function Fi(n){return function(){return n}}ec=Fi;var Gi={},Hi=Ra?function(e,r){return Ra(e,"toString",{configurable:!0,enumerable:!1,value:ec(r),writable:!0})}:A;Gi=Hi;var dc={},Ji=800,Ki=16,Li=Date.now;function Mi($){var r=0,O=0;return function(){var u=Li(),a=Ki-(u-O);if(O=u,a>0){if(++r>=Ji)return arguments[0]}else r=0;return $.apply(void 0,arguments)}}dc=Mi;var Za={},Oi=dc(Gi);Za=Oi;var t={};function Qi($,e){return Za(gc($,e,A),$+"")}t=Qi;var L={};function Si($,r,a){if(!h(a))return!1;var e=typeof r;return!!("number"==e?n(a)&&na(r,a.length):"string"==e&&r in a)&&ua(a[r],$)}L=Si;var Ti={},Ui=t(function(e,$){if(null==e)return[];var r=$.length;return r>1&&L(e,$[0],$[1])?$=[]:r>2&&L($[0],$[1],$[2])&&($=[$[0]]),xi(e,vc($,1),[])});Ti=Ui;var Vi="\n<div class=\"pagination-control\">\n    <div class=\"pull-right\">\n        <div class=\"paging_fico\">\n            <button class=\"reveal-btn btn\"><span class=\"paginate-control-text\">page 1 of 1 </span><i class=\"fico-arrow-down5\"></i>\n            </button>\n            <ul class=\"pager jumpto-pager\">\n                <li><a class=\"pagination-button-previous disabled\"><i class=\"fico-chevron-left\"></i></a></li>\n                <li><a class=\"pagination-button-next\"><i class=\"fico-chevron-right\"></i></a></li>\n            </ul>\n            <div class=\"jumpto-pagination hide\">\n                <div>\n                    <div class=\"jumpto-pagination-label\">Jump to page:</div>\n                    <input type=\"number\" class=\"jumpto-pagination-input\" value=\"1\">\n                </div>\n                <div class=\"results-per-page\">\n                    <div class=\"jumpto-pagination-label\">Items per page:</div>\n                    <select class=\"results-per-page-selector\">\n                    </select>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n",Wi=function(){function t(e,a){hi(this,t),this.table=e,this.$paginationControl=$(Vi);var $uwez$$interop$default=k(Ca);var $jAUG$$interop$default=k(E);var $uPyP$$interop$default=k(Ti);var $F9m6$$interop$default=k(m);var n=$uwez$$interop$default.d($jAUG$$interop$default.d($uPyP$$interop$default.d([5,10,25,50,100,a]))),i=$F9m6$$interop$default.d(n,function(t){return"<option value=\"".concat(t,"\" ").concat(a===t?"selected":"",">").concat(t,"</option>")}).join("");this.$paginationControl.find(".results-per-page-selector").append(i)}return ji(t,[{key:"isActiveSelectionOutsideAPaginationControl",value:function(t){var e=t.closest("vdlx-datagrid");var $uCW0$$interop$default=k(D);return!!$uCW0$$interop$default.d(e)||$(this.table.element).closest("vdlx-datagrid").get(0)!==e.get(0)}},{key:"updatePageIndicators",value:function(){0===this.table.getDataCount()?this.$paginationControl.hide():this.$paginationControl.show();var t=this.currentPage;this.$pageInput.val(t),1===t?this.$prevBtn.addClass("disabled"):this.$prevBtn.removeClass("disabled"),t===this.maxPage?this.$nextBtn.addClass("disabled"):this.$nextBtn.removeClass("disabled"),this.$pageNumbersSpan.text("Page ".concat(this.currentPage," of ").concat(this.maxPage))}},{key:"previousPage",value:function(){this.currentPage>1&&(this.table.previousPage(),this.updatePageIndicators())}},{key:"nextPage",value:function(){this.currentPage<this.maxPage&&(this.table.nextPage(),this.updatePageIndicators())}},{key:"goToPage",value:function(t){var e=Math.max(1,Math.min(this.maxPage,t));return this.currentPage=e,e}},{key:"toggle",value:function(){this.$revealBtn.toggleClass("active-pager-btn"),this.$dropdown.toggleClass("hide")}},{key:"close",value:function(){this.$revealBtn.removeClass("active-pager-btn"),this.$dropdown.addClass("hide")}},{key:"appendTo",value:function(t){var e=this;this.$paginationControl.appendTo(t),this.$revealBtn=this.$paginationControl.find(".paging_fico .reveal-btn"),this.$dropdown=this.$paginationControl.find(".paging_fico .jumpto-pagination"),this.$prevBtn=this.$paginationControl.find(".pagination-button-previous"),this.$nextBtn=this.$paginationControl.find(".pagination-button-next"),this.$pageInput=this.$paginationControl.find(".paging_fico .jumpto-pagination-input"),this.$perPageSelector=this.$paginationControl.find(".results-per-page-selector"),this.$pageNumbersSpan=this.$paginationControl.find(".paginate-control-text"),this.$revealBtn.on("mousedown",function(){e.toggle()}),this.$prevBtn.on("mouseup",function(){e.previousPage()}),this.$nextBtn.on("mouseup",function(){e.nextPage()}),this.$pageInput.on("input",function(t){var $uMND$$interop$default=k(Xa);var a=$uMND$$interop$default.d(t.target.value);var $diUV$$interop$default=k(Ma);$diUV$$interop$default.d(a)&&e.goToPage(a)!==a&&e.updatePageIndicators()}),this.$perPageSelector.on("change",function(t){var $uMND$$interop$default=k(Xa);var a=$uMND$$interop$default.d(t.target.value);e.table.setPageSize(a),e.updatePageIndicators()}),$("html").on("mouseup",function(t){var a=$(t.target);e.isActiveSelectionOutsideAPaginationControl(a)&&e.close()})}},{key:"currentPage",get:function(){return this.table.getPage()},set:function(t){return this.table.setPage(t)}},{key:"maxPage",get:function(){return this.table.getPageMax()}}]),t}();var Xi={};function Yi(e){return function(r){return null==e?void 0:ma(e,r)}}Xi=Yi;var Zi=function(a){return function(r){var $F9m6$$interop$default=k(m);var $euQk$$interop$default=k(Xi);return $F9m6$$interop$default.d(a,$euQk$$interop$default.d(r))}};var x={text:"input",checkbox:"checkbox",select:"select"};function _i(e,t){return cj(e)||bj(e,t)||aj()}function aj(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function bj(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],o=!0,l=!1,r=void 0;try{for(var n,i=e[Symbol.iterator]();!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(s){l=!0,r=s}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}function cj(e){if(Array.isArray(e))return e}function dj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xb(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fj(e,t,a){return t&&Xb(e.prototype,t),a&&Xb(e,a),e}var gj={};function hj(r,e){var $={};return e=g(e,3),Ed(r,function(r,a,s){nb($,a,e(r,a,s))}),$}gj=hj;var ij={};function jj(r,$,s){for(var a=-1,e=r.length;++a<e;){var v=r[a],o=$(v);if(null!=o&&(void 0===i?o==o&&!u(o):s(o,i)))var i=o,l=v}return l}ij=jj;var kj={};function lj($,e){return $>e}kj=lj;var mj={};function nj($){return $&&$.length?ij($,A,kj):void 0}mj=nj;var S={};function pj($,a,e,r){var W=!e;e||(e={});for(var s=-1,v=a.length;++s<v;){var i=a[s],n=r?r(e[i],$[i],i,e,$):void 0;void 0===n&&(n=$[i]),W?nb(e,i,n):Z(e,i,n)}return e}S=pj;var qj={};function rj(e){return t(function(r,$){var a=-1,t=$.length,s=t>1?$[t-1]:void 0,i=t>2?$[2]:void 0;for(s=e.length>3&&"function"==typeof s?(t--,s):void 0,i&&L($[0],$[1],i)&&(s=t<3?void 0:s,t=1),r=Object(r);++a<t;){var v=$[a];v&&e(r,v,a,s)}return r})}qj=rj;var _a={},tj=Object.prototype,uj=tj.hasOwnProperty,vj=qj(function($,r){if(oa(r)||n(r))S(r,w(r),$);else for(var e in r)uj.call(r,e)&&Z($,e,r[e])});_a=vj;var wj={};function xj(r,e){for(var $=-1,a=null==r?0:r.length;++$<a;)if(!e(r[$],$,r))return!1;return!0}wj=xj;var yj={};function zj(e,$){var r=!0;return Q(e,function(e,a,y){return r=!!$(e,a,y)}),r}yj=zj;var Aj={};function Bj(r,e,$){var a=d(r)?wj:yj;return $&&L(r,e,$)&&(e=void 0),a(r,g(e,3))}Aj=Bj;var Cj={};function Dj(r){return function(e,$,a){var u=Object(e);if(!n(e)){var t=g($,3);e=w(e),$=function(r){return t(u[r],r,u)}}var i=r(e,$,a);return i>-1?u[t?e[i]:i]:void 0}}Cj=Dj;var Aa={},Fj=Cj(Mc);Aa=Fj;var za={},Hj="Expected a function";function Ij(t){if("function"!=typeof t)throw new TypeError(Hj);return function(){var r=arguments;switch(r.length){case 0:return!t.call(this);case 1:return!t.call(this,r[0]);case 2:return!t.call(this,r[0],r[1]);case 3:return!t.call(this,r[0],r[1],r[2]);}return!t.apply(this,r)}}za=Ij;var Jj={};function Kj($,a){var r;return Q($,function($,e,q){return!(r=a($,e,q))}),!!r}Jj=Kj;var Sb={};function Mj(r,e,$){var a=d(r)?ee:Jj;return $&&L(r,e,$)&&(e=void 0),a(r,g(e,3))}Sb=Mj;var ya={},Oj=0;function Pj(r){var $=++Oj;return la(r)+$}ya=Pj;var Qj={};function Rj(r){return c(r)&&n(r)}Qj=Rj;var Sj={},Tj=Math.max;function Uj(e){if(!e||!e.length)return[];var r=0;return e=Na(e,function(e){if(Qj(e))return r=Tj(e.length,r),!0}),Oc(r,function(r){return i(e,mb(r))})}Sj=Uj;var Vj={},Wj=t(Sj);Vj=Wj;var Qb=insightModules.load("dialogs"),Yj="\n<div class=\"add-remove-control\">\n    <div class=\"pull-left\">\n        <div class=\"add-remove-fico\">\n            <button\n                type=\"button\"\n                class=\"btn btn-link btn-table-action btn-table-add-row \"\n                title=\"Add New Row\"\n                tabindex=\"-1\"\n            />\n            <button\n                type=\"button\"\n                class=\"btn btn-link btn-table-action btn-table-remove-row disabled\"\n                title=\"Delete Selected Row\"\n                disabled\n                tabindex=\"-1\"\n            />\n        </div>\n    </div>\n</div>\n",Zj=function(){function e(t,a){var $eeO1$$interop$default=k(j);dj(this,e),this.$addRemoveControl=$eeO1$$interop$default.d(Yj),this.indicesColumns=[],this.entitiesColumns=[],this.allSetValues=[],this.data=[],this.selectedRow=void 0,this.table=t,this.autoinc=a,this.defaultScenario=void 0}return fj(e,[{key:"appendTo",value:function(e){var t=this;this.$addRemoveControl.appendTo(e),this.$addRemoveControl.on("click",".btn-table-add-row",function(e){t.autoinc?t.autoAddRow():t.openAddRowDialog()}),this.$addRemoveControl.on("click",".btn-table-remove-row",function(e){return t.removeRow()})}},{key:"setEnabled",value:function(e){e?this.$addRemoveControl.show():this.$addRemoveControl.hide()}},{key:"addNewRowToTable",value:function(e){var t=this;return this.table.addRow(e).then(function(e){var $F9m6$$interop$default=k(m);var $UqIc$$interop$default=k(ec);if(t.table.setSort($F9m6$$interop$default.d(t.table.getSorters(),function(e){return{dir:e.dir,column:e.field}})),t.data=t.table.getData(),!1===t.table.getPageMax())return t.table.scrollToRow(e).then($UqIc$$interop$default.d(e));var a=e.getPosition(!0),o=t.table.getPageSize(),l=Math.floor(a/o)+1;return t.table.setPage(l),e}).then(function(e){var $eeO1$$interop$default=k(j);var t=$eeO1$$interop$default.d(e.getElement());t.addClass("highlight").css("opacity",.2),t.animate({opacity:1}),t.animate({opacity:.2}),t.animate({opacity:1},2e3,"swing",function(){t.removeClass("highlight")})})}},{key:"openAddRowDialog",value:function(){var $F9m6$$interop$default=k(m);var $hX9S$$interop$default=k(Vj);var $eeO1$$interop$default=k(j);var e=this,t=$F9m6$$interop$default.d($hX9S$$interop$default.d(this.indicesColumns,this.allSetValues),function(e){var $mMrb$$interop$default=k(ya);var t=_i(e,2),a=t[0],o=t[1],l=$mMrb$$interop$default.d("add-remove-row-"),r=$F9m6$$interop$default.d(o,function(e){return"<option value=\"".concat(e.key,"\">").concat(e.value,"</option>")}).join("");return"\n            <div class=\"form-group\">\n              <label class=\"col-sm-4 control-label\" for=\"".concat(l,"\">\n                ").concat(a.title,"\n              </label>\n              <div class=\"col-sm-5\">\n                <select class=\"form-control\" name=\"").concat(a.field,"\" id=\"").concat(l,"\">\n                  <option value=\"\">Choose value</option>\n                  ").concat(r,"\n                </select>\n              </div>\n            </div>\n            ")}).join(""),a="\n        <form class=\"form-horizontal modal-form \" id=\"autotable-3-addForm\" title=\"\">\n            ".concat(t,"\n        </form>\n        "),o=$eeO1$$interop$default.d("\n        <div>\n            ".concat(a,"\n            <div class=\"alerts\"></div>\n        </div>\n        ")),l=function(t){var $lRKl$$interop$default=k(ca);var a=$lRKl$$interop$default.d(o.find("form").serializeArray(),function(e,t){var $ZP50$$interop$default=k(_a);var $H7Ai$$interop$default=k(G);return $ZP50$$interop$default.d(e,$H7Ai$$interop$default.d({},t.name,t.value))},{}),l=function(t){var $fRxz$$interop$default=k(Sb);var $t6QJ$$interop$default=k(za);var $atk5$$interop$default=k(A);var $qi8U$$interop$default=k(Aa);return $fRxz$$interop$default.d(t,$t6QJ$$interop$default.d($atk5$$interop$default.d))?"Please set all indices to create a new row":$qi8U$$interop$default.d(e.data,function(e){var $gj4Z$$interop$default=k(Aj);return $gj4Z$$interop$default.d(t,function(t,a){return String(e[a])===String(t)})})?"A row with these indices already exists":void 0}(a);return l?(o.find(".alerts").html("<div class=\"alert alert-danger\">".concat(l,"</div>")),!1):a};bootbox.dialog({animate:!1,title:"Add Row",onEscape:!0,closeButton:!0,message:o,buttons:{ok:{label:"OK",className:"btn btn-primary btn-add",callback:function(t){var a=l();return!!a&&e.addNewRowToTable(a)}},cancel:{label:"CANCEL",className:"btn"}}})}},{key:"autoAddRow",value:function(){var $uCW0$$interop$default=k(D);var $RhMU$$interop$default=k(mj);var $F9m6$$interop$default=k(m);var e=this,t=$uCW0$$interop$default.d(this.allSetValues[0])?1:$RhMU$$interop$default.d($F9m6$$interop$default.d(this.allSetValues[0],"key"))+1,a=this.indicesColumns[0],o=a.name,l=a.field,r=this.defaultScenario.modify().addToSet(o,t).commit();return this.$addRemoveControl.find("button.btn-table-add-row").attr("disabled",""),r.then(function(){var $H7Ai$$interop$default=k(G);return e.addNewRowToTable($H7Ai$$interop$default.d({},l,t))}).then(function(){e.allSetValues[0]=e.allSetValues[0].concat({key:t,value:t})}).catch(function(){return Qb.alert("Could not add row. There was an issue updating the server.","Row add failed")}).then(function(){return e.$addRemoveControl.find("button.btn-table-add-row").removeAttr("disabled")})}},{key:"removeRow",value:function(){var $hr0c$$interop$default=k(gj);var $lRKl$$interop$default=k(ca);var e=this,t=this.selectedRow.getData(),a=$hr0c$$interop$default.d($lRKl$$interop$default.d(this.entitiesColumns,function(e,t){var $H7Ai$$interop$default=k(G);return $H7Ai$$interop$default.d(e,t.scenario.getId(),t.scenario)},{}),function(e){return e.modify()});var $yla4$$interop$default=k(y);$yla4$$interop$default.d(this.entitiesColumns,function(e){var o=e.getRowKey(t);a[e.scenario.getId()].removeFromArray(e.name,o)});var $F9m6$$interop$default=k(m);var o=$F9m6$$interop$default.d(a,function(e){return e.commit()});return Promise.all([o].concat(this.selectedRow.delete())).then(function(){e.table.redraw(!0),e.data=e.table.getData(),e.setSelectedRow(void 0)}).catch(function(){throw e.table.addRow(e.selectedRow.getData()),e.table.setSort(e.table.getSorters()),Qb.alert("Could not delete row. There was an issue updating the server.","Row deletion failed"),Error("Row deletion failed")})}},{key:"update",value:function(e,t,a,o,l){this.indicesColumns=e,this.entitiesColumns=t,this.allSetValues=o,this.data=l,this.defaultScenario=a}},{key:"setSelectedRow",value:function(e){this.selectedRow=e,this.selectedRow?this.$addRemoveControl.find(".btn-table-remove-row").removeAttr("disabled").removeClass("disabled"):this.$addRemoveControl.find(".btn-table-remove-row").attr("disabled","").addClass("disabled")}}]),e}();var xa={},_j=$&&new $;xa=_j;var de={},bk=xa?function($,a){return xa.set($,a),$}:A;de=bk;var Va={},$d=Object.create,ek=function(){function e(){}return function(r){if(!h(r))return{};if($d)return $d(r);e.prototype=r;var $=new e;return e.prototype=void 0,$}}();Va=ek;var aa={};function gk(e){return function(){var r=arguments;switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3]);case 5:return new e(r[0],r[1],r[2],r[3],r[4]);case 6:return new e(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new e(r[0],r[1],r[2],r[3],r[4],r[5],r[6]);}var n=Va(e.prototype),a=e.apply(n,r);return h(a)?a:n}}aa=gk;var hk={},ik=1;function jk(r,$,n){var t=$&ik,e=aa(r);return function $(){return(this&&this!==b&&this instanceof $?e:r).apply(t?n:this,arguments)}}hk=jk;var Xd={},lk=Math.max;function mk(r,$,a,e){for(var f=-1,o=r.length,t=a.length,n=-1,v=$.length,s=lk(o-t,0),E=Array(v+s),F=!e;++n<v;)E[n]=$[n];for(;++f<t;)(F||f<o)&&(E[a[f]]=r[f]);for(;s--;)E[n++]=r[f++];return E}Xd=mk;var Qd={},ok=Math.max;function pk(r,$,a,t){for(var e=-1,o=r.length,v=-1,n=a.length,g=-1,h=$.length,k=ok(o-n,0),s=Array(k+h),w=!t;++e<k;)s[e]=r[e];for(var T=e;++g<h;)s[T+g]=$[g];for(;++v<n;)(w||e<o)&&(s[T+a[v]]=r[e++]);return s}Qd=pk;var qk={};function rk(r,$){for(var o=r.length,t=0;o--;)r[o]===$&&++t;return t}qk=rk;var ab={};function tk(){}ab=tk;var bb={},vk=4294967295;function Sa(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=vk,this.__views__=[]}Sa.prototype=Va(ab.prototype),Sa.prototype.constructor=Sa,bb=Sa;var cb={},yk=xa?function($){return xa.get($)}:ea;cb=yk;var Ld={},Ak={};Ld=Ak;var Qa={},Ck=Object.prototype,Dk=Ck.hasOwnProperty;function Ek(r){for(var $=r.name+"",t=Ld[$],a=Dk.call(Ld,$)?t.length:0;a--;){var e=t[a],o=e.func;if(null==o||o==r)return e.name}return $}Qa=Ek;var ba={};function Oa(a,r){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!r,this.__index__=0,this.__values__=void 0}Oa.prototype=Va(ab.prototype),Oa.prototype.constructor=Oa,ba=Oa;var db={};function Ik(r,$){var I=-1,a=r.length;for($||($=Array(a));++I<a;)$[I]=r[I];return $}db=Ik;var Jk={};function Kk(a){if(a instanceof bb)return a.clone();var r=new ba(a.__wrapped__,a.__chain__);return r.__actions__=db(a.__actions__),r.__index__=a.__index__,r.__values__=a.__values__,r}Jk=Kk;var Lk={},Mk=Object.prototype,Nk=Mk.hasOwnProperty;function Ja(r){if(c(r)&&!d(r)&&!(r instanceof bb)){if(r instanceof ba)return r;if(Nk.call(r,"__wrapped__"))return Jk(r)}return new ba(r)}Ja.prototype=ab.prototype,Ja.prototype.constructor=Ja,Lk=Ja;var eb={};function Qk(r){var $=Qa(r),a=Lk[$];if("function"!=typeof a||!($ in bb.prototype))return!1;if(r===a)return!0;var e=cb(a);return!!e&&r===e[0]}eb=Qk;var pd={},Sk=dc(de);pd=Sk;var Tk={},Uk=/\{\n\/\* \[wrapped with (.+)\] \*/,Vk=/,? & /;function Wk($){var r=$.match(Uk);return r?r[1].split(Vk):[]}Tk=Wk;var Xk={},Yk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function Zk(r,e){var a=e.length;if(!a)return r;var $=a-1;return e[$]=(a>1?"& ":"")+e[$],e=e.join(a>2?", ":" "),r.replace(Yk,"{\n/* [wrapped with "+e+"] */\n")}Xk=Zk;var $k={},_k=1,al=2,fe=8,cl=16,dl=32,el=64,fl=128,gl=256,hl=512,il=[["ary",fl],["bind",_k],["bindKey",al],["curry",fe],["curryRight",cl],["flip",hl],["partial",dl],["partialRight",el],["rearg",gl]];function jl(r,$){return Wa(il,function(a){var e="_."+a[0];$&a[1]&&!ad(r,e)&&r.push(e)}),r.sort()}$k=jl;var kd={};function ll(r,$,a){var e=$+"";return Za(r,Xk(e,$k(Tk(e),a)))}kd=ll;var id={},nl=1,ol=2,pl=4,ql=8,hd=32,gd=64;function tl($,r,a,A,s,_,B,R,v,H){var e=r&ql;r|=e?hd:gd,(r&=~(e?gd:hd))&pl||(r&=~(nl|ol));var X=[$,r,s,e?_:void 0,e?B:void 0,e?void 0:_,e?void 0:B,R,v,H],L=a.apply(void 0,X);return eb($)&&pd(L,X),L.placeholder=A,kd(L,$,r)}id=tl;var Fa={};function vl(r){return r.placeholder}Fa=vl;var wl={},xl=Math.min;function yl(r,$){for(var e=r.length,a=xl($.length,e),l=db(r);a--;){var u=$[a];r[a]=na(u,e)?l[u]:void 0}return r}wl=yl;var T={},dd="__lodash_placeholder__";function Bl($,r){for(var a=-1,e=$.length,t=0,P=[];++a<e;){var u=$[a];u!==r&&u!==dd||($[a]=dd,P[t++]=a)}return P}T=Bl;var _c={},Dl=1,El=2,Fl=8,Gl=16,Hl=128,Il=512;function $c(r,$,e,a,I,U,o,v,t,c){var _=$&Hl,A=$&Dl,R=$&El,l=$&(Fl|Gl),s=$&Il,i=R?void 0:aa(r);return function p(){for(var u=arguments.length,d=Array(u),g=u;g--;)d[g]=arguments[g];if(l)var n=Fa(p),F=qk(d,n);if(a&&(d=Xd(d,a,I,l)),U&&(d=Qd(d,U,o,l)),u-=F,l&&u<c){var G=T(d,n);return id(r,$,$c,p.placeholder,e,d,G,v,t,c-u)}var H=A?e:this,L=R?H[r]:r;return u=d.length,v?d=wl(d,v):s&&u>1&&d.reverse(),_&&t<u&&(d.length=t),this&&this!==b&&this instanceof p&&(L=i||aa(L)),L.apply(H,d)}}_c=$c;var Kl={};function Ll(r,e,$){var a=aa(r);return function u(){for(var t=arguments.length,C=Array(t),c=t,R=Fa(u);c--;)C[c]=arguments[c];var o=t<3&&C[0]!==R&&C[t-1]!==R?[]:T(C,R);return(t-=o.length)<$?id(r,e,_c,u.placeholder,void 0,C,o,void 0,void 0,$-t):Ya(this&&this!==b&&this instanceof u?a:r,this,C)}}Kl=Ll;var Ml={},Nl=1;function Ol(r,$,a,i){var e=$&Nl,t=aa(r);return function $(){for(var G=-1,o=arguments.length,m=-1,O=i.length,v=Array(O+o),c=this&&this!==b&&this instanceof $?t:r;++m<O;)v[m]=i[m];for(;o--;)v[m++]=arguments[++G];return Ya(c,e?a:this,v)}}Ml=Ol;var Pl={},Zc="__lodash_placeholder__",fb=1,Sl=2,Tl=4,Xc=8,da=128,Vc=256,Xl=Math.min;function Yl($,e){var r=$[1],A=e[1],a=r|A,_=a<(fb|Sl|da),R=A==da&&r==Xc||A==da&&r==Vc&&$[7].length<=e[8]||A==(da|Vc)&&e[7].length<=e[8]&&r==Xc;if(!_&&!R)return $;A&fb&&($[2]=e[2],a|=r&fb?0:Tl);var v=e[3];if(v){var b=$[3];$[3]=b?Xd(b,v,e[4]):v,$[4]=b?T($[3],Zc):e[4]}return(v=e[5])&&(b=$[5],$[5]=b?Qd(b,v,e[6]):v,$[6]=b?T($[5],Zc):e[6]),(v=e[7])&&($[7]=v),A&da&&($[8]=null==$[8]?e[8]:Xl($[8],e[8])),null==$[9]&&($[9]=e[9]),$[0]=e[0],$[1]=a,$}Pl=Yl;var Tc={},$l="Expected a function",Sc=1,am=2,gb=8,hb=16,jb=32,Ic=64,Dc=Math.max;function gm($,r,a,e,c,I,d,t){var x=r&am;if(!x&&"function"!=typeof $)throw new TypeError($l);var v=e?e.length:0;if(v||(r&=~(jb|Ic),e=c=void 0),d=void 0===d?d:Dc(ha(d),0),t=void 0===t?t:ha(t),v-=c?c.length:0,r&Ic){var _=e,R=c;e=c=void 0}var A=x?void 0:cb($),i=[$,r,a,e,c,_,R,I,d,t];if(A&&Pl(i,A),$=i[0],r=i[1],a=i[2],e=i[3],c=i[4],!(t=i[9]=void 0===i[9]?x?0:$.length:Dc(i[9]-v,0))&&r&(gb|hb)&&(r&=~(gb|hb)),r&&r!=Sc)P=r==gb||r==hb?Kl($,r,t):r!=jb&&r!=(Sc|jb)||c.length?_c.apply(void 0,i):Ml($,r,a,e);else var P=hk($,r,a);return kd((A?de:pd)(P,i),$,r)}Tc=gm;var Cc={},im=32,lb=t(function(e,$){var r=T($,Fa(lb));return Tc(e,im,void 0,$,r)});lb.placeholder={},Cc=lb;var f={DataType:{INTEGER:"INTEGER",REAL:"REAL",CONSTRAINT:"CONSTRAINT",DECISION_VARIABLE:"DECISION_VARIABLE",STRING:"STRING"}},I=function(e){return /^(\-|\+)?([0-9]+(\.([0-9]*))?|Infinity)$/.test(e)?Number(e):NaN},lc=function(e){if(e.format)return e.format;switch(e.elementType){case f.DataType.INTEGER:return window.insight.Formatter.format.integer;case f.DataType.REAL:case f.DataType.CONSTRAINT:case f.DataType.DECISION_VARIABLE:return window.insight.Formatter.format.decimal;}},nm=function(e,r,a){var t=r===f.DataType.REAL||r===f.DataType.DECISION_VARIABLE||r===f.DataType.CONSTRAINT,$=r===f.DataType.INTEGER;if(!t&&!$)return e;var n=I(e);return t&&n?window.insight.Formatter.formatNumber(e,a):$&&parseInt(e,10)===n?window.insight.Formatter.formatNumber(e,a):e},om=function(e,r){return e.toLowerCase()===r.toLowerCase()},pm=function(e,r){return I(e)===I(r)},qm=function(e,r,a){var t,$=I(e),n=I(r),p=lc(a);return t=p.length-(p.indexOf(".")+1),$===I(n.toFixed(t))},rm=function(e,r,a){var t=!0;return a.elementType&&a.elementType!==f.DataType.STRING?(t=pm(e,r))||(t=qm(e,r,a)):t=om(e,r),t},sm=function(e,r,a){if(r=r.toLowerCase(),""===(e=e.toLowerCase()))return r===e;var t=r.indexOf(e)>=0;if(!t&&a.elememtType!==f.DataType.STRING){var $=lc(a);if($){var n=nm(e,a.displayType,$);t=window.insight.Formatter.formatNumber(r,$).indexOf(n)>=0}}return t},tm=function(e,r,a,t,$){return"="===r.substring(0,1)?rm(r.substring(1),String(a),e):sm(r,String(a),e)},jc=function(e){switch(e.elementType){case f.DataType.INTEGER:case f.DataType.STRING:case f.DataType.REAL:var $edOc$$interop$default=k(Cc);return $edOc$$interop$default.d(tm,e);default:return;}};var vm={};function wm($,a,r){return $==$&&(void 0!==r&&($=$<=r?$:r),void 0!==a&&($=$>=a?$:a)),$}vm=wm;var xm={};function ym($,r,e){return $=la($),e=null==e?0:vm(ha(e),0,$.length),r=kc(r),$.slice(e,e+r.length)==r}xm=ym;var zm="vdl=",Am="TableState",Bm="__";function Cm(){var t=window.location.pathname+window.location.hash;if(window.location.search){var r=window.location.search.substr(1).split("&").filter(function(t){var $REiC$$interop$default=k(xm);return $REiC$$interop$default.d(t,zm)});r.length&&(t+="?"+r[0])}return t}var Dm=function(t,r){var e=[Am,Cm(),t,r].join(Bm);return{saveState:function(r){try{window.sessionStorage.setItem(e,JSON.stringify(r))}catch(a){console.error("Could not save table state for tableId: "+t,a)}},loadState:function(){try{return JSON.parse(window.sessionStorage.getItem(e))}catch(r){return console.error("Could not load table state for tableId: "+t,r),{filters:[],sorters:[]}}}}};function Em(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hc(e,t){for(var r=0;r<t.length;r++){var $=t[r];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(e,$.key,$)}}function Gm(e,t,r){return t&&hc(e.prototype,t),r&&hc(e,r),e}var z=k(m);var _b=".insight-table-lock",Jm=z.d(["keydown","keypress","keyup","mousedown","mouseup","click","focusin"],function(e){return e+_b}).join(" "),Km="vdlx-datagrid",Zb="insight-table-locked",Wb="insight-table-locked-overlay",Nm="non-transparent",Om="fico-spinner",Pm=[Wb,Nm].join(" "),Qm=function(){function e(t){var $eeO1$$interop$default=k(j);Em(this,e),this.locked=!1,this.$wrapperElement=$eeO1$$interop$default.d(t).closest(Km),this.overlayDeferred=null}return Gm(e,[{key:"lock",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var $eeO1$$interop$default=k(j);this.locked||(this.locked=!0,this.$wrapperElement.addClass(Zb).on(Jm,function(e){e.stopImmediatePropagation(),e.preventDefault()}),$eeO1$$interop$default.d("<div class=\"".concat(Pm,"\"><div class=\"").concat(Om,"\"></div></div>")).appendTo(this.$wrapperElement),this.overlayDeferred=null)}},{key:"unlock",value:function(){this.locked&&(this.$wrapperElement.off(_b).removeClass(Zb).children(".".concat(Wb)).remove(),this.overlayDeferred&&clearTimeout(this.overlayDeferred),this.locked=!1)}},{key:"isLocked",value:function(){return this.locked}}]),e}();var Rm={};function Sm(r){return function($){return null==r?void 0:r[$]}}Rm=Sm;var Tm={},Um={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"},Vm=Rm(Um);Tm=Vm;var Vb={},Ub=/[&<>"']/g,Ym=RegExp(Ub.source);function Zm($){return($=la($))&&Ym.test($)?$.replace(Ub,Tm):$}Vb=Zm;var Tb={},_m="Expected a function";function an($,e,r){if("function"!=typeof $)throw new TypeError(_m);return setTimeout(function(){$.apply(void 0,r)},e)}Tb=an;var bn={},cn=t(function($,e,r){return Tb($,_(e)||0,r)});bn=cn;var Rb={},en=t(function($,e){return Tb($,1,e)});Rb=en;var Pb={};function gn($){return Za(gc($,void 0,sc),$+"")}Pb=gn;var Ob={},jn="Expected a function",kn=8,ln=32,mn=128,nn=256;function on($){return Pb(function(r){var a=r.length,e=a,F=ba.prototype.thru;for($&&r.reverse();e--;){var t=r[e];if("function"!=typeof t)throw new TypeError(jn);if(F&&!y&&"wrapper"==Qa(t))var y=new ba([],!0)}for(e=y?e:a;++e<a;){t=r[e];var T=Qa(t),b="wrapper"==T?cb(t):void 0;y=b&&eb(b[0])&&b[1]==(mn|kn|ln|nn)&&!b[4].length&&1==b[9]?y[Qa(b[0])].apply(y,b[3]):1==t.length&&eb(t)?y[T]():y.thru(t)}return function(){var $=arguments,e=$[0];if(y&&1==$.length&&d(e))return y.plant(e).value();for(var F=0,t=a?r[F].apply(this,$):e;++F<a;)t=r[F].call(this,t);return t}})}Ob=on;var _d={},qn=Ob();_d=qn;var rn={},sn=Ob(!0);rn=sn;var tn={};function un(r,a){return i(a,function(a){return r[a]})}tn=un;var Yd={};function wn($){return null==$?[]:tn($,w($))}Yd=wn;var Wd={};function yn(r,$){return(d(r)?Na:Kd)(r,za(g($,3)))}Wd=yn;var zn={},An=Math.max,Bn=Math.min;function Cn($,a,n){return $>=Bn(a,n)&&$<An(a,n)}zn=Cn;var Dn={};function En(e,$,r){return $=W($),void 0===r?(r=$,$=0):r=W(r),e=_(e),zn(e,$,r)}Dn=En;var pb={};var Gn={};function Hn(e){return e&&e.length?e[0]:void 0}Gn=Hn;pb=Gn;var M=insightModules.load("components/autotable-select-options"),Pd=insightModules.load("utils/data-utils"),Kn=insightModules.load("dialogs"),Ln="selection-changed",Mn="selection-removed",Od=function(e){var $zOp4$$interop$default=k(d);return $zOp4$$interop$default.d(e)?[{key:void 0,value:""}].concat(e):e},Md=function(e,t){var r=t.getLabelsEntity();return r?e.getEntity(r):t},Pn="Validation Error",Qn=function(){function e(t,r,i){var a=this;kr(this,e),this.subscriptions=[],this.entitiesColumns=void 0,this.indicesColumns=void 0,this.gridOptions$=r,this.columnOptions$=i,this.componentRoot=t,this.view=insight.getView(),this.schema=this.view.getProject().getModelSchema();var o=ko.unwrap(r);this.table=this.createTable(o);var n=t.querySelector(".footer-toolbar");this.addRemoveRowControl=this.createAddRemoveRowControl(n,this.table,o),this.paginatorControl=this.createPaginatorControl(n,this.table,o),this.stateManager=null,this.tableLock=new Qm(this.table.element),this.buildTable(),this.update();var l=function(e){var $uCW0$$interop$default=k(D);t.contains(e.target)||$uCW0$$interop$default.d(a.table.getSelectedRows())||o.alwaysShowSelection||a.table.modules.selectRow.deselectRows()};document.addEventListener("mousedown",l),this.subscriptions=this.subscriptions.concat([{dispose:function(){document.removeEventListener("mousedown",l)}}])}return jr(e,[{key:"buildTable",value:function(){var e=this,t=this.columnOptions$,r=this.gridOptions$,i=Jh(t),a=i.data,o=i.errors;var $rmX6$$interop$default=k(ea);this.subscriptions=this.subscriptions.concat(ko.pureComputed(function(){var i=ko.unwrap(r()),n=t(),l=a(),$=o();var $uCW0$$interop$default=k(D);var $vzeB$$interop$default=k(B);if(e.componentRoot.style.display=$?"none":"block",$uCW0$$interop$default.d($vzeB$$interop$default.d(n,"columnOptions"))||e.tableLock.lock(),i&&n&&l)return ta("PERF TOTAL:",function(){return e.setColumnsAndData(i,n,l).then(function(){return e.tableLock.unlock()})})}).subscribe($rmX6$$interop$default.d))}},{key:"update",value:function(){this.validate(),this.updatePaginator(),this.recalculateHeight(ko.unwrap(this.gridOptions$)),this.recalculateWidth()}},{key:"saveState",value:function(){if(this.stateManager){var e={filters:this.table.getHeaderFilters(),sorters:z.d(this.table.getSorters(),function(e){return{dir:e.dir,column:e.field}})};this.stateManager.saveState(e)}}},{key:"loadState",value:function(){var e=this;if(this.stateManager){var t=this.stateManager.loadState();var $uCW0$$interop$default=k(D);var $yla4$$interop$default=k(y);t&&(!$uCW0$$interop$default.d(t.sorters)&&this.table.setSort(t.sorters),$uCW0$$interop$default.d(t.filters)||(this.table.clearHeaderFilter(),$yla4$$interop$default.d(t.filters,function(t){e.table.getColumn(t.field)&&e.table.setHeaderFilterValue(t.field,t.value)})))}}},{key:"createTable",value:function(e){var t=this,r=function(e){var $yla4$$interop$default=k(y);var $jAUG$$interop$default=k(E);$yla4$$interop$default.d($jAUG$$interop$default.d(t.table.getSelectedRows(),function(t){return t.getPosition()!==e.getPosition()}),function(e){return e.deselect()}),e.isSelected()||e.select()},i=function(){return t.saveState()},a={pagination:e.pagination,paginationSize:e.paginationSize,paginationElement:e.paginationElement,layout:"fitDataFill",placeholder:"No data available",groupStartOpen:!1,ajaxLoader:!0,height:"100%",resizableColumns:!1,dataFiltered:i,dataSorting:i,cellEditing:function(e){return r(e.getRow())},rowClick:function(e,t){return r(t)},rowSelectionChanged:function(e,r){var $m4wv$$interop$default=k(pb);return t.setSelectedRow($m4wv$$interop$default.d(r))},renderComplete:function(){return t.update()}};var $g0Xx$$interop$default=k(Ga);return new $g0Xx$$interop$default.d("#".concat(e.tableId),a)}},{key:"recalculateHeight",value:function(e){if("scrolling"===e.pageMode){var t;if(this.table.getDataCount()>e.paginationSize){if(!(t=e.gridHeight)){var r=this.table.getRowFromPosition(0,!0);var $eeO1$$interop$default=k(j);t=$eeO1$$interop$default.d(r.getElement()).outerHeight(!0)*e.paginationSize}}else t="100%";this.table.setHeight(t)}else"paged"===e.pageMode&&this.table.setHeight("100%")}},{key:"recalculateWidth",value:function(){var $m4wv$$interop$default=k(pb);var e=$m4wv$$interop$default.d(this.table.element.getElementsByClassName("tabulator-tableHolder")),t=e?e.clientWidth:0,r=e?e.offsetWidth:0,i=this.table.columnManager.getWidth();var $Aev9$$interop$default=k(Dn);if(i<t||$Aev9$$interop$default.d(i,r-2,r+2)){var $jAUG$$interop$default=k(E);var $MscT$$interop$default=k(Wd);var a=$jAUG$$interop$default.d($MscT$$interop$default.d(this.table.getColumns(),function(e){return!!e.getDefinition().width}),function(e){return e.getVisibility()}),o=(t-i)/a.length;var $yla4$$interop$default=k(y);$yla4$$interop$default.d(a,function(e){return e._column.setWidthActual(e._column.getWidth()+o)})}}},{key:"setSelectedRow",value:function(e){var $eeO1$$interop$default=k(j);if(this.table)if(this.addRemoveRowControl&&this.addRemoveRowControl.setSelectedRow(e),e){var t=e.getPosition(),r=z.d(e.getCells(),function(e){return e.getValue()}),i=z.d(e.getCells(),function(e,i){return{rowData:r,value:e.getValue(),element:e.getElement(),displayPosition:{row:t,column:i}}});var $eeO1$$interop$default=k(j);var $m4wv$$interop$default=k(pb);$eeO1$$interop$default.d(this.table.element).trigger(Ln,{selection:i,activeCell:$m4wv$$interop$default.d(i),selectionType:"ROW"})}else $eeO1$$interop$default.d(this.table.element).trigger(Mn)}},{key:"createPaginatorControl",value:function(e,t,r){if(r.pagination){var i=new Wi(t,r.paginationSize);return i.appendTo(e),i}}},{key:"createStateManager",value:function(e,t,r){if(e.saveState){var i=z.d(t,"name").join("#");return Dm(e.tableId,i)}}},{key:"createAddRemoveRowControl",value:function(e,t,r){if(r.addRemoveRow){var i=new Zj(t,"addrow-autoinc"===r.addRemoveRow);return i.setEnabled(!1),i.appendTo(e),i}}},{key:"updatePaginator",value:function(){this.paginatorControl&&this.paginatorControl.updatePageIndicators()}},{key:"updateAddRemoveControl",value:function(e,t,r,i,a,o){this.addRemoveRowControl&&(this.addRemoveRowControl.setEnabled(e),this.addRemoveRowControl.update(t,r,i,a,o))}},{key:"setColumnsAndData",value:function(e,t,r){var $uwez$$interop$default=k(Ca);var $J1hG$$interop$default=k(Yd);var i=this,a=this.table,o=this.schema,n=t.indicesOptions,l=t.columnOptions,$=uh(o,l),s=wh($,l),c=z.d(s,function(e){var $vzeB$$interop$default=k(B);return nr({},e,{options:$vzeB$$interop$default.d(n,"".concat(e.name,".").concat(e.position),{id:"".concat(e.name,"_").concat(e.position)})})}),u=$uwez$$interop$default.d([r.defaultScenario].concat($J1hG$$interop$default.d(r.scenarios))),d=z.d(c,function(t){var $vzeB$$interop$default=k(B);var $ZP50$$interop$default=k(_a);var $L7XJ$$interop$default=k(Vb);var r,i=t.name,a=t.options,n=o.getEntity(i),l=Md(o,n),$=Pd.entityTypeIsNumber(l),s=$vzeB$$interop$default.d(a,"title",n.getAbbreviation()||i),c=$ZP50$$interop$default.d({},t.options,{title:$L7XJ$$interop$default.d(String(s)),field:a.id,cssClass:(r=["index"],$&&(r=r.concat("numeric")),r.join(" ")),formatter:function(e){return M.getLabel(o,u,n,e.getValue())},dataType:n.getType(),elementType:l.getElementType(),labelsEntity:n.getLabelsEntity(),name:i});if(e.columnFilter){c=$ZP50$$interop$default.d(c,{headerFilterPlaceholder:"No filter",headerFilter:!!e.columnFilter,headerFilterFunc:function(){var e=jc(c);if(e)return function(t,r,i,a){var l=M.getLabel(o,u,n,r);return e(t,l,i,a)}}()})}return c}),p=[].concat(z.d(c,"options.id"),z.d(l,"id")),m=Zi(p),O=z.d(l,function(t,a){var $vzeB$$interop$default=k(B);var $hv1q$$interop$default=k(rn);var $ZP50$$interop$default=k(_a);var $L7XJ$$interop$default=k(Vb);var n,l=o.getEntity(t.name),c=Md(o,l),d=Pd.entityTypeIsNumber(c),p=$vzeB$$interop$default.d(r.scenarios,t.id,r.defaultScenario),O=$hv1q$$interop$default.d(function(e){var r=Gc(s,e);return yh(r,s,$[a],t)},m),f=function(e,r){return i={key:O(e),value:r},p.modify().setArrayElement(t.name,i).commit();var i},v=function(e){return r=O(e),p.modify().removeFromArray(t.name,r).commit();var r},g=function(e){var r=String(e.getValue())===String($vzeB$$interop$default.d(t,"checkedValue",!0))?"checked":"",i=t.editable?"":"disabled";return"<div class=\"checkbox-editor\"><input type=\"checkbox\" ".concat(r," ").concat(i,"/></div>")},h=function(e){return M.getLabel(o,u,l,e.getValue())},X=function(e,r){var i=$vzeB$$interop$default.d(t,"checkedValue",!0),a=$vzeB$$interop$default.d(t,"uncheckedValue",!1),o=String(r.getValue())===String(i)?a:i;r.setValue(o)},Z=function(e,r){var a=function(e,r){var a=e.getData(),o=O(a),n=insight.validation.EntityValidator.checkValue(l,r,void 0,o);return n.isValid&&"function"==typeof t.editorValidate&&(n=t.editorValidate.call(i,r,m(a),o)),n}(e,r),o=e.getElement();return a.isValid?o.classList.remove("invalid"):o.classList.add("invalid"),a},b=$vzeB$$interop$default.d(t,"title",l.getAbbreviation()||name),y=$ZP50$$interop$default.d({},t,{title:$L7XJ$$interop$default.d(String(b)),field:t.id,cssClass:(n=[],d&&(n=n.concat("numeric")),t.editorType===x.select&&(n=n.concat("select-editor")),n.join(" ")),cellClick:function(){if(t.editorType===x.checkbox&&t.editable)return X}(),formatter:t.render?function(e){return t.render(e.getValue(),"display",m(e.getData()))}:t.editorType===x.checkbox?g:h,editor:t.editorType,editorParams:function(){if(t.editorType===x.select){var e;var $wn26$$interop$default=k(_d);var $atk5$$interop$default=k(A);t.editorOptionsSet?e=$wn26$$interop$default.d(function(){return M.generateSelectOptions(o,[p],t.editorOptionsSet,p.getSet(t.editorOptionsSet))},t.selectNull?Od:$atk5$$interop$default.d):t.editorOptions&&(e=$wn26$$interop$default.d(t.editorOptions,function(e){return M.generateSelectOptionsFromValues(e,d)},t.selectNull?Od:$atk5$$interop$default.d));var r=function(){if(d)return function(e,t){return"<div class=\"numeric\">".concat(t,"</div>")}};return function(t){return{listItemFormatter:r(),values:z.d(e(t.getValue(),O(t.getData())),function(e){return{value:e.key,label:e.value}})}}}}(),cellEditing:function(){if(t.editorType!==x.select)return function(e){var t=e.getElement();var $eeO1$$interop$default=k(j);$eeO1$$interop$default.d(t).on("keyup",function(t){Z(e,t.target.value)})}}(),cellEdited:function(e){var $eeO1$$interop$default=k(j);$eeO1$$interop$default.d(e.getElement()).off("keyup");var $HEdP$$interop$default=k(F);var t=$HEdP$$interop$default.d(e.getOldValue())?"":e.getOldValue(),r=e.getValue(),i=Z(e,r);i.isValid||i.allowSave?r!==t&&($HEdP$$interop$default.d(r)||""===r?v(e.getData()).catch(function(t){e.restoreOldValue()}):f(e.getData(),r).catch(function(t){e.restoreOldValue()})):(e.restoreOldValue(),Z(e,e.getValue()),Kn.alert(i.errorMessage,Pn,function(){var $gfnG$$interop$default=k(Rb);$gfnG$$interop$default.d(function(){return e.edit(!0)})}))},cellEditCancelled:function(e){var $eeO1$$interop$default=k(j);$eeO1$$interop$default.d(e.getElement()).off("keyup");var t=e.getValue();Z(e,t)},dataType:l.getType(),elementType:c.getElementType(),scenario:p,getRowKey:O,validate:Z});if(e.columnFilter){var E=y.editor===x.checkbox?x.select:x.text,S=function(){if(y.editor===x.checkbox){var e=$vzeB$$interop$default.d(t,"checkedValue",!0),r=$vzeB$$interop$default.d(t,"uncheckedValue",!1);return{values:[{value:void 0,label:"No Filter"},{value:String(e),label:"Checked"},{value:String(r),label:"Unchecked"}]}}}(),w=function(e,t,r,i){var a=String(e),o=String(t);if(a===o)return!0;var $qi8U$$interop$default=k(Aa);var n=$qi8U$$interop$default.d(i.values,function(e){return e.value===a||e.label===a});var $HEdP$$interop$default=k(F);return!$HEdP$$interop$default.d(n)&&n.value===o},R=function(e){if(null==e)return!0;var $qi8U$$interop$default=k(Aa);var t=String(e),r=$qi8U$$interop$default.d(S.values,function(e){return e.value===t||e.label===t});var $HEdP$$interop$default=k(F);return $HEdP$$interop$default.d(r)||$HEdP$$interop$default.d(r.value)};y=$ZP50$$interop$default.d(y,{headerFilterPlaceholder:"No filter",headerFilter:E,headerFilterParams:S,headerFilterFuncParams:S,headerFilterFunc:function(){if(y.editor===x.checkbox)return w;var e=jc(y);var $HEdP$$interop$default=k(F);return $HEdP$$interop$default.d(e)?void 0:function(r,i,a,n){var $;return $=t.render?t.render(i,"filter",m(a)):M.getLabel(o,u,l,i),e(r,$,a,n)}}(),headerFilterEmptyCheck:function(){if(y.editor===x.checkbox)return R}()})}return y}),f=[].concat(d,O),v=parseInt(e.freezeColumns);v&&!isNaN(v)&&(f=z.d(f,function(e,t){return t<v&&(e.frozen=!0),e}));var $fRxz$$interop$default=k(Sb);var $MscT$$interop$default=k(Wd);var g=ta("PERF Data generation:",function(){return Bh($,f,O,c,r,e.rowFilter)}),h=g.data,X=g.allSetValues,Z=$fRxz$$interop$default.d($MscT$$interop$default.d(l,function(e){var $vzeB$$interop$default=k(B);return!$vzeB$$interop$default.d(e,"visible",!0)}),"editable");!Z&&e.addRemoveRow&&console.log("vdl-table (".concat(e.tableId,"): add/remove rows disabled. Table needs to have at least one editable column to use this feature."));var b=Z&&e.addRemoveRow;this.updateAddRemoveControl(b,d,O,r.defaultScenario,X,h),this.entitiesColumns=O,this.indicesColumns=d,a.setColumns(f),this.stateManager=this.createStateManager(e,f,z.d(O,"scenario")),this.loadState();return ta("PERF Tabulator.setData():",function(){return a.setData(h).then(function(){return function e(){return i.table.element.offsetParent?Promise.resolve(i.table.redraw(!0)):new Promise(function(t,r){var $Nc2p$$interop$default=k(bn);$Nc2p$$interop$default.d(function(){e().then(t).catch(r)},100)})}()}).catch(function(e){})})}},{key:"validate",value:function(){var $jAUG$$interop$default=k(E);var e=this,t=$jAUG$$interop$default.d(this.entitiesColumns,"editable");var $yla4$$interop$default=k(y);$yla4$$interop$default.d(t,function(t){var r=e.table.columnManager.columnsByField[t.field].cells;$yla4$$interop$default.d(r,function(e){t.validate(e.getComponent(),e.getValue())})})}},{key:"dispose",value:function(){var $yla4$$interop$default=k(y);this.table.destroy(),$yla4$$interop$default.d(this.subscriptions,function(e){return e.dispose()})}}]),e}();var Rn={},Sn=Math.ceil,Tn=Math.max;function Un(a,$,r,e){for(var o=-1,v=Tn(Sn(($-a)/(r||1)),0),t=Array(v);v--;)t[e?v:++o]=a,a+=r;return t}Rn=Un;var Vn={};function Wn(e){return function($,r,a){return a&&"number"!=typeof a&&L($,r,a)&&(r=a=void 0),$=W($),void 0===r?(r=$,$=0):r=W(r),a=void 0===a?$<r?1:-1:W(a),Rn($,r,a,e)}}Vn=Wn;var Xn={},Yn=Vn();Xn=Yn;var Zn={},$n=Object.prototype,_n=$n.hasOwnProperty;function ao($,r){return null!=$&&_n.call($,r)}Zn=ao;var Cd={};function co($,a){return null!=$&&md($,a,Zn)}Cd=co;var eo={};function fo(a,$,e){for(var r=-1,t=$.length,s={};++r<t;){var I=$[r],T=ma(a,I);e(T,I)&&Ac(s,O(I,a),T)}return s}eo=fo;var Nb={},ho=sd(Object.getPrototypeOf,Object);Nb=ho;var xd={},jo=Object.getOwnPropertySymbols,ko=jo?function(r){for(var $=[];r;)Hb($,Gb(r)),r=Nb(r);return $}:Td;xd=ko;var lo={};function mo(u){var r=[];if(null!=u)for(var $ in Object(u))r.push($);return r}lo=mo;var no={},oo=Object.prototype,po=oo.hasOwnProperty;function qo($){if(!h($))return lo($);var r=oa($),e=[];for(var t in $)("constructor"!=t||!r&&po.call($,t))&&e.push(t);return e}no=qo;var wd={};function so(r){return n(r)?ld(r,!0):no(r)}wd=so;var sb={};function uo($){return Ud($,wd,xd)}sb=uo;var od={};function wo(r,$){if(null==r)return{};var e=i(sb(r),function(r){return[r]});return $=g($),eo(r,e,function(r,e){return $(r,e[0])})}od=wo;var xo={};function yo($,e){return od($,za(g(e)))}xo=yo;var zo={};function Ao($,e){return $&&S(e,w(e),$)}zo=Ao;var Bo={};function Co($,e){return $&&S(e,wd(e),$)}Bo=Co;var Do=function(){var e={exports:this},o="object"==typeof this&&this&&!this.nodeType&&this,r=o&&"object"==typeof e&&e&&!e.nodeType&&e,n=r&&r.exports===o?b.Buffer:void 0,s=n?n.allocUnsafe:void 0;return e.exports=function(e,t){if(t)return e.slice();var o=e.length,r=s?s(o):new e.constructor(o);return e.copy(r),r},e.exports}.call({});var Eo={};function Fo($,r){return S($,Gb($),r)}Eo=Fo;var Go={};function Ho($,r){return S($,xd($),r)}Go=Ho;var Io={},Jo=Object.prototype,Ko=Jo.hasOwnProperty;function Lo(r){var t=r.length,$=new r.constructor(t);return t&&"string"==typeof r[0]&&Ko.call(r,"index")&&($.index=r.index,$.input=r.input),$}Io=Lo;var vb={};function No(r){var $=new r.constructor(r.byteLength);return new Ea($).set(new Ea(r)),$}vb=No;var Oo={};function Po(r,e){var $=e?vb(r.buffer):r.buffer;return new r.constructor($,r.byteOffset,r.byteLength)}Oo=Po;var Qo={},Ro=/\w*$/;function So($){var e=new $.constructor($.source,Ro.exec($));return e.lastIndex=$.lastIndex,e}Qo=So;var To={},Yc=a?a.prototype:void 0,Rc=Yc?Yc.valueOf:void 0;function Wo($){return Rc?Object(Rc.call($)):{}}To=Wo;var Xo={};function Yo(r,e){var $=e?vb(r.buffer):r.buffer;return new r.constructor($,r.byteOffset,r.length)}Xo=Yo;var Zo={},$o="[object Boolean]",_o="[object Date]",ap="[object Map]",bp="[object Number]",cp="[object RegExp]",dp="[object Set]",ep="[object String]",fp="[object Symbol]",gp="[object ArrayBuffer]",hp="[object DataView]",ip="[object Float32Array]",jp="[object Float64Array]",kp="[object Int8Array]",lp="[object Int16Array]",mp="[object Int32Array]",np="[object Uint8Array]",op="[object Uint8ClampedArray]",pp="[object Uint16Array]",qp="[object Uint32Array]";function rp(a,$,r){var e=a.constructor;switch($){case gp:return vb(a);case $o:case _o:return new e(+a);case hp:return Oo(a,r);case ip:case jp:case kp:case lp:case mp:case np:case op:case pp:case qp:return Xo(a,r);case ap:return new e;case bp:case ep:return new e(a);case cp:return Qo(a);case dp:return new e;case fp:return To(a);}}Zo=rp;var sp={};function tp(t){return"function"!=typeof t.constructor||oa(t)?{}:Va(Nb(t))}sp=tp;var up={},vp="[object Map]";function wp($){return c($)&&C($)==vp}up=wp;var xp={},Kc=V&&V.isMap,zp=Kc?La(Kc):up;xp=zp;var Ap={},Bp="[object Set]";function Cp($){return c($)&&C($)==Bp}Ap=Cp;var Dp={},Jc=V&&V.isSet,Fp=Jc?La(Jc):Ap;Dp=Fp;var wb={},Hp=1,Ip=2,Jp=4,yc="[object Arguments]",Lp="[object Function]",Mp="[object GeneratorFunction]",xc="[object Object]",p={};function va($,a,r,v,e,m){var G,N=a&Hp,l=a&Ip,n=a&Jp;if(r&&(G=e?r($,v,e,m):r($)),void 0!==G)return G;if(!h($))return $;var t=d($);if(t){if(G=Io($),!N)return db($,G)}else{var g=C($),o=g==Lp||g==Mp;if(fa($))return Do($,N);if(g==xc||g==yc||o&&!e){if(G=l||o?{}:sp($),!N)return l?Go($,Bo(G,$)):Eo($,zo(G,$))}else{if(!p[g])return e?$:{};G=Zo($,g,N)}}m||(m=new ga);var c=m.get($);if(c)return c;m.set($,G),Dp($)?$.forEach(function(v){G.add(va(v,a,r,v,$,m))}):xp($)&&$.forEach(function(v,e){G.set(e,va(v,a,r,e,$,m))});var i=n?l?sb:Fb:l?keysIn:w,s=t?void 0:i($);return Wa(s||$,function(v,e){s&&(v=$[e=v]),Z(G,e,va(v,a,r,e,$,m))}),G}p[yc]=p[$NGmv$var$arrayBufferTag]=p[$NGmv$var$dateTag]=p[$NGmv$var$float64Tag]=p[$NGmv$var$int16Tag]=p[$NGmv$var$numberTag]=p[xc]=p[$NGmv$var$setTag]=p[$NGmv$var$symbolTag]=p[$NGmv$var$uint8ClampedTag]=p[$NGmv$var$uint32Tag]=!0,wb=va;var Qp={},Rp=4;function Sp($){return wb($,Rp)}Qp=Sp;var ic={},Up="[object Object]",Vp=Function.prototype,Wp=Object.prototype,cc=Vp.toString,Yp=Wp.hasOwnProperty,Zp=cc.call(Object);function $p($){if(!c($)||e($)!=Up)return!1;var r=Nb($);if(null===r)return!0;var t=Yp.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&cc.call(t)==Zp}ic=$p;var _p={},aq=1,bq=4;function cq($){return wb($,aq|bq)}_p=cq;var dq={},eq=1,fq=2,gq=32,xb=t(function($,r,e){var a=eq|fq;if(e.length){var s=T(e,Fa(xb));a|=gq}return Tc(r,a,$,e,s)});xb.placeholder={},dq=xb;var iq={};function jq($){return null===$}iq=jq;var kq={};function lq($){return Ma($)&&$!=+$}kq=lq;var mq=50;function nq(e){var $uMND$$interop$default=k(Xa);var r=$uMND$$interop$default.d(e);var $TUw9$$interop$default=k(kq);return $TUw9$$interop$default.d(r)?e:r}function Ha(e){var $pOKJ$$interop$default=k(iq);var $HEdP$$interop$default=k(F);return $pOKJ$$interop$default.d(e)||$HEdP$$interop$default.d(e)}var Vd=function(e){var $yDlx$$interop$default=k(od);var $wn26$$interop$default=k(_d);var $atk5$$interop$default=k(A);var $t6QJ$$interop$default=k(za);return $yDlx$$interop$default.d(e,$wn26$$interop$default.d($atk5$$interop$default.d,$t6QJ$$interop$default.d(Ha)))},qq=function(e){return function(){var $swSi$$interop$default=k(dq);var $vzeB$$interop$default=k(B);var r=Vd({searching:e.showFilter,columnFilter:e.columnFilter}),i={tableId:e.tableId,addRemoveRow:e.addRemoveRow,selectionAndNavigation:e.selectionNavigation,overrides:r,columnFilter:e.columnFilter,onError:$swSi$$interop$default.d(self,"_wrapAlert"),alwaysShowSelection:e.alwaysShowSelection,gridHeight:e.gridHeight,gridData:e.gridData,paginationSize:e.pageSize||mq,saveState:$vzeB$$interop$default.d(e,"saveState",!0),pageMode:e.pageMode,freezeColumns:e.freezeColumns},$=e.pageMode;var $eeO1$$interop$default=k(j);var $xOlx$$interop$default=k(v);var $HEdP$$interop$default=k(F);if("paged"===$&&(i.pagination="local",i.paginationElement=$eeO1$$interop$default.d(".hidden-footer-toolbar").get(0)),$xOlx$$interop$default.d(e.rowFilter)&&(i.rowFilter=e.rowFilter),i=Vd(i),!$HEdP$$interop$default.d(e.modifier)&&$xOlx$$interop$default.d(e.modifier)){var $Ok6L$$interop$default=k(_p);var t=e.modifier($Ok6L$$interop$default.d(i));var $EUXB$$interop$default=k(ic);$EUXB$$interop$default.d(t)&&(i=t)}return i}};function rq(e,r){var i={};e.width&&(i.tableWidth=e.width.replace("px",""));var $vzeB$$interop$default=k(B);var $mMrb$$interop$default=k(ya);var $=r.element,t=e.scenarioId||0,a=$vzeB$$interop$default.d(e,"tableId",$mMrb$$interop$default.d("vdlx-datagrid-"));e.tableId=a;var $eeO1$$interop$default=k(j);var o=$eeO1$$interop$default.d($),n=$eeO1$$interop$default.d("<div/>");n.attr("id",a),n.addClass("vdlx-datagrid table-striped table-bordered table-condensed"),o.append(n),e.class&&$eeO1$$interop$default.d($).find(".vdlx-datagrid").addClass(e.class);var l=$eeO1$$interop$default.d("<div class=\"hidden-footer-toolbar\" style=\"display: none\"/>");o.append(l);var d=$eeO1$$interop$default.d("<div class=\"footer-toolbar\"/>");o.append(d);var s=Ec(ko.pureComputed(qq(e))),p=Ec(ko.observable({})),u=new Qn($,s,p);function c(){var r=o.find("vdlx-datagrid-column").map(function(e,r){var $AJ87$$interop$default=k(Qp);return $AJ87$$interop$default.d(r.autotableConfig)});if(r.length){var i=[],$={};var $OoKq$$interop$default=k(zc);$OoKq$$interop$default.d(r,function(e){var r=nq(e.scenario||t);var $diUV$$interop$default=k(Ma);var $CKi4$$interop$default=k(xo);if($diUV$$interop$default.d(r),e.scenario=r,e.entity)e.name=e.entity,delete e.entity,i.push($CKi4$$interop$default.d(e,Ha));else if(e.set){var $Rloh$$interop$default=k(Cd);$Rloh$$interop$default.d($,[e.set])||($[e.set]=[]);var a=$[e.set],o=$CKi4$$interop$default.d(e,Ha),n=e.setPosition;var $nTpU$$interop$default=k(Xn);null==n?a.push(o):a[n]||(a[n]=o,$nTpU$$interop$default.d(a.length).forEach(function(e){a[e]||(a[e]=null)}))}});var a=sortBy(uniq(map(filter(i,function(e){return!Ha(e)}),function(e){return ko.unwrap(e.scenario)})));var $uCW0$$interop$default=k(D);($uCW0$$interop$default.d(a)||$uCW0$$interop$default.d(i))&&console.debug("vdl-table ("+e.tableId+"): Scenario list or table column configuration is empty, ignoring update"),p({columnOptions:i,indicesOptions:$,scenarioList:a})}else p({columnOptions:[],indicesOptions:{},scenarioList:[]})}return i.tableUpdate=function(){var $gfnG$$interop$default=k(Rb);$gfnG$$interop$default.d(function(){return c()})},i.tableValidate=function(){u.validate()},i.dispose=function(){u.dispose()},c(),i}VDL("vdlx-datagrid",{tag:"vdlx-datagrid",attributes:cr,createViewModel:rq,transform:Pr,modifiesDescendants:!1});var sq=[{name:"entity",description:"Name of the array entity to show in this column. Throws an error if the entity doesn't exist or is not an array or set type.",required:!1},{name:"set",description:"Name of the set entity to show in this column. Throws an error if the entity doesn't exist or is not a set type.",required:!1},{name:"set-position",description:"Index (zero-based) of occurrence of that index set in the index tuple for the array.Defaults to next available position."},{name:"scenario",description:"The scenario id/index for this column. Not allowed on index column (when specifying a set entity)",acceptsExpression:!0},{name:"editable",description:"Whether the cells within this column are editable.",acceptsExpression:!0},{name:"vdl-visible",acceptsExpression:!0,docIgnore:!0},{name:"heading",description:"A custom header for this column, will default to be the entity alias. Alternatively, you can set the title as the text contents of the <vdlx-datagrid-column> element.",acceptsExpression:!0},{name:"width",description:"The width, in pixels, to set the column.",acceptsExpression:!0},{name:"class",description:"CSS classes to add to the table column cells. You can provide multiple classes separated by spaces.",acceptsExpression:!0},{name:"sort-by-formatted",description:"Use formatted values for sorting."},{name:"filter-by-formatted",description:"Use formatted values for filtering. This defaults to false unless the entity has a label in which case the default is true."},{name:"editor-type",description:"The editor type to use, in edit mode, for cells in this column. If not specified then it will be autodetected based on entity type. Possible values: checkbox, select, text"},{name:"editor-checked-value",description:"The value to set the cell data to if input type is checkbox and it is checked."},{name:"editor-unchecked-value",description:"The value to set the cell data to if input type is checkbox and it is not checked."},{name:"editor-options-set",description:"Name of a set entity to use for select options. This will display labels if a labels entity is defined against this set. This will automatically set the editor-type to be \"select\"."},{name:"editor-options",description:"An expression that results in one of the follow to be used as the select options: an array of values, an object of property to value or an array of objects containing key and value properties. This will automatically set the editor-type to be \"select\".",acceptsExpression:!0,expressionVars:[{name:"value",type:"(string|boolean|number)",description:"The value of the cell. Its data type will match that of the array elements in this column."},{name:"rowData",type:"Array.<(string|boolean|number)>",description:"The values from each cell in the current row"}],expressionReturns:{type:"Array.<*>|Object.<string, string>|Array.<{key: string, value: *}>",description:"An array of values, an object of property to value or an array of objects containing key and value properties"}},{name:"editor-options-include-empty",description:"Allow array elements to be removed using the select input. Setting this to true will add a blank item to the top of the select list. Defaults to false."},{name:"render",description:"Reference to a custom cell renderer. Overrides any default entity rendering. This will be used to generate the cell value for rendering, filtering and sorting. It must be an expression and resolves as a function, this function should return a string.",acceptsExpression:!0,expressionVars:[{name:"data",type:"(string|boolean|number)",description:"The value of the cell being rendered. Its data type will match that of the array elements in this column."},{name:"type",type:"string",description:"The type call data requested - this will be \"filter\", \"display\", \"type\" or \"sort\""},{name:"row",type:"Array.<(string|boolean|number)>",description:"The values from each cell in the current row"}]},{name:"format",description:"Specify a number formatting string. Only applicable to array elements of type integer, real, decision variable and constraint. The formatting syntax is explained in the Xpress Insight Developer Guide."},{name:"bottom-calc",description:"Specify a built-in calculation, one of avg, max, min, sum, concat or count to show that calculated value, alternatively provide a custom function, as a dynamic expression.",acceptsExpression:!0,expressionVars:[{name:"values",type:"(string|boolean|number)",description:"Array of column values"},{name:"data",type:"string",description:"All table data"},{name:"calcParams",type:"Array.<(string|boolean|number)>",description:"params passed from the column definition object"}]}];var Sd={},uq="[object String]";function vq($){return"string"==typeof $||!d($)&&c($)&&e($)==uq}Sd=vq;var wq={},xq=Math.max;function yq(r,$,e,a){r=n(r)?r:Yd(r),e=e&&!a?ha(e):0;var L=r.length;return e<0&&(e=xq(L+e,0)),Sd(r)?e<=L&&r.indexOf($,e)>-1:!!L&&bd(r,$,e)>-1}wq=yq;var zq=insightModules.load("utils/data-utils"),Ba=insightModules.load("enums"),Bq=function(t,e,a){var $eeO1$$interop$default=k(j);var r=$eeO1$$interop$default.d(t);if(!r.closest("vdlx-datagrid").length)throw Error("<vdlx-datagrid-column> must be contained within a <vdlx-datagrid> tag.");if(!e.entity&&!e.set)throw Error("Must specify either an \"entity\" or \"set\" attribute for <vdlx-datagrid-column>.");if(e.entity&&e.set)throw Error("You cannot specify both \"entity\" and \"set\" on a <vdlx-datagrid-column>.");if(e["set-position"]&&!e.set)throw Error("You cannot specify \"set-position\" without also specifying \"set\"");if(e.set&&e.scenario)throw Error("The \"scenario\" attribute cannot be used in combination with the \"set\" attribute on a <vdlx-datagrid-column>.");var i=(e.entity?e.entity:e.set).rawValue,o=a.getModelEntityByName(i);if(!o)throw Error("Entity \""+i+"\" does not exist in the model schema.");var $vzeB$$interop$default=k(B);var n=$vzeB$$interop$default.d(e,["set-position","rawValue"]);if(null!=n){if(!/^\d+$/.test(n))throw Error("Invalid set-position \""+n+"\", must be a number at least zero");n=+n}var d=o.getType();if(e.entity&&d!==Ba.DataType.ARRAY)throw Error("Entity type "+d+" cannot be displayed as a column in <vdlx-datagrid>.");if(e.set&&d!==Ba.DataType.SET)throw Error("Entity type "+d+" cannot be specified as an index set in <vdlx-datagrid>.");var s=a.getComponentParamsBuilder(t).addParam("tableUpdate","$component.tableUpdate",!0).addParam("tableValidate","$component.tableValidate",!0).addParam("validate","$component.validate",!0);e.entity?s.addParam("entity",i):s.addParam("set",i),null!=n&&s.addParam("setPosition",n);var l=e.heading;if(l)s.addRawOrExpressionParam("heading",l);else{var m=$eeO1$$interop$default.d(t).contents().filter(function(t,e){return e.nodeType===Node.TEXT_NODE&&""!==e.textContent.trim()}).toArray().map(function(t){return t.textContent.trim()}).join(" ");m&&s.addParam("heading",m)}var u=e.scenario;u&&s.addRawOrExpressionParam("scenario",u);var p=e.editable;if(e.editable){if(o.getManagementType()===Ba.EntityManagementType.RESULT)throw Error("Cannot set editable attribute on a <vdlx-datagrid-column> bound to a result entity.");s.addRawOrExpressionParam("editable",p)}var c=e["vdl-visible"];if(c){var $uCW0$$interop$default=k(D);if(c.expression.isString||$uCW0$$interop$default.d(c.expression.value))throw Error("vdl-visible has to be an expression");s.addRawOrExpressionParam("visible",c),r.removeAttr("vdl-visible")}var v=e.width;v&&(s.addRawOrExpressionParam("width",v),r.removeAttr("width"));var $=e.class;$&&(s.addRawOrExpressionParam("style",$),r.removeAttr("class"));var h=e["sort-by-formatted"];h&&"true"===h.rawValue&&s.addParam("sortByFormatted",!0);var f=e["filter-by-formatted"];f&&("true"===f.rawValue?s.addParam("filterByFormatted",!0):"false"===f.rawValue&&s.addParam("filterByFormatted",!1));var y=e["editor-type"];if(y&&-1!==["checkbox","select","text"].indexOf(y.rawValue)){if("select"===y.rawValue&&!e["editor-options-set"]&&!e["editor-options"])throw Error("vdlx-datagrid-column with \"editor-type\" of \"select\" needs either the \"editor-options-set\" or the \"editor-options\" attribute to be supplied.");s.addParam("editorType",y.rawValue)}var w=e["editor-checked-value"];w&&s.addParam("editorCheckedValue",w.rawValue);var x=e["editor-unchecked-value"];x&&s.addParam("editorUncheckedValue",x.rawValue);var b=e["editor-options-set"];if(b){var E=a.getModelEntityByName(b.rawValue);if(!E)throw Error("vdlx-datagrid-column editor-options-set entity \""+b.rawValue+"\" does not exist in the model schema.");if(E.getType()!==Ba.DataType.SET)throw Error("Entity \""+b.rawValue+"\" cannot be used as editor-options-set, wrong data type.");s.addParam("editorOptionsSet",b.rawValue)}var g=e["editor-options"];if(g){if(g.expression.isString)throw Error("vdlx-datagrid-column attribute \"editor-options\" must be an expression.");s.addFunctionOrExpressionParam("editorOptions",g.expression.value,["value","rowData"])}if(b&&g)throw Error("vdlx-datagrid-column cannot have both editor-options-set and editor-options specified.");var T=e["editor-options-include-empty"];T&&s.addParam("editorOptionsIncludeEmpty","true"===T.rawValue);var P=e.render;if(P){if(P.expression.isString)throw Error("Render parameter has to be an expression");s.addParam("render",P.expression.value,!0)}var C=e["bottom-calc"];if(C)if(C.expression.isString){var V=["avg","sum","min","max","count","concat"];var $CLUr$$interop$default=k(wq);if(!$CLUr$$interop$default.d(V,C.rawValue))throw Error("The \"bottom-calc\" attribute must either be an (=)expression or one of "+V.join(", ")+". "+C.expression.value+" is not a valid option.");s.addParam("bottomCalc",C.rawValue,!1)}else s.addParam("bottomCalc",C.expression.value,!0);var O=e.format;if(O){if(!zq.entityTypeIsNumber(o))throw Error("Entity "+i+" with element type "+o.getElementType()+" cannot be formatted");s.addParam("format",O.rawValue)}};var Cq={};function Dq($){var r=null==$?0:$.length;return r?$[r-1]:void 0}Cq=Dq;var Eq={};function Fq(r,$,a){var e=-1,t=r.length;$<0&&($=-$>t?0:t+$),(a=a>t?t:a)<0&&(a+=t),t=$>a?0:a-$>>>0,$>>>=0;for(var v=Array(t);++e<t;)v[e]=r[e+$];return v}Eq=Fq;var Gq={};function Hq($,e){return e.length<2?$:ma($,Eq(e,0,-1))}Gq=Hq;var Iq={};function Jq($,r){return r=O(r,$),null==($=Gq($,r))||delete $[N(Cq(r))]}Iq=Jq;var Kq={};function Lq($){return ic($)?void 0:$}Kq=Lq;var Mq={},Nq=1,Oq=2,Pq=4,Qq=Pb(function(e,$){var r={};if(null==e)return r;var a=!1;$=i($,function($){return $=O($,e),a||(a=$.length>1),$}),S(e,sb(e),r),a&&(r=wb(r,Nq|Oq|Pq,Kq));for(var G=$.length;G--;)Iq(r,$[G]);return r});Mq=Qq;var Rq={},Sq=mb("length");Rq=Sq;var Tq={},Uq="\\ud800-\\udfff",Vq="\\u0300-\\u036f",Wq="\\ufe20-\\ufe2f",Xq="\\u20d0-\\u20ff",Yq=Vq+Wq+Xq,Zq="\\ufe0e\\ufe0f",$q="\\u200d",_q=RegExp("["+$q+Uq+Yq+Zq+"]");function ar($){return _q.test($)}Tq=ar;var br={},ed="\\ud800-\\udfff",dr="\\u0300-\\u036f",er="\\ufe20-\\ufe2f",fr="\\u20d0-\\u20ff",gr=dr+er+fr,hr="\\ufe0e\\ufe0f",ir="["+ed+"]",zb="["+gr+"]",Ab="\\ud83c[\\udffb-\\udfff]",lr="(?:"+zb+"|"+Ab+")",pc="[^"+ed+"]",ac="(?:\\ud83c[\\udde6-\\uddff]){2}",Yb="[\\ud800-\\udbff][\\udc00-\\udfff]",pr="\\u200d",ud=lr+"?",fd="["+hr+"]?",sr="(?:"+pr+"(?:"+[pc,ac,Yb].join("|")+")"+fd+ud+")*",tr=fd+ud+sr,ur="(?:"+[pc+zb+"?",zb,ac,Yb,ir].join("|")+")",Wc=RegExp(Ab+"(?="+Ab+")|"+ur+tr,"g");function wr($){for(var r=Wc.lastIndex=0;Wc.test($);)++r;return r}br=wr;var xr={};function yr($){return Tq($)?br($):Rq($)}xr=yr;var zr={},Ar="[object Map]",Br="[object Set]";function Cr($){if(null==$)return 0;if(n($))return Sd($)?xr($):$.length;var r=C($);return r==Ar||r==Br?$.size:ub($).length}zr=Cr;var Cb={},Er=function(){return b.Date.now()};Cb=Er;var Fr={},Gr="Expected a function",Hr=Math.max,Ir=Math.min;function Jr(n,r,$){var e,t,i,a,o,u,v=0,d=!1,T=!1,c=!0;if("function"!=typeof n)throw new TypeError(Gr);function F(r){var $=e,i=t;return e=t=void 0,v=r,a=n.apply(i,$)}function f(n){var $=n-u;return void 0===u||$>=r||$<0||T&&n-v>=i}function m(){var n=Cb();if(f(n))return l(n);o=setTimeout(m,function(n){var $=r-(n-u);return T?Ir($,i-(n-v)):$}(n))}function l(n){return o=void 0,c&&e?F(n):(e=t=void 0,a)}function s(){var n=Cb(),$=f(n);if(e=arguments,t=this,u=n,$){if(void 0===o)return function(n){return v=n,o=setTimeout(m,r),d?F(n):a}(u);if(T)return clearTimeout(o),o=setTimeout(m,r),F(u)}return void 0===o&&(o=setTimeout(m,r)),a}return r=_(r)||0,h($)&&(d=!!$.leading,i=(T="maxWait"in $)?Hr(_($.maxWait)||0,r):i,c="trailing"in $?!!$.trailing:c),s.cancel=function(){void 0!==o&&clearTimeout(o),v=0,e=u=t=o=void 0},s.flush=function(){return void 0===o?a:l(Cb())},s}Fr=Jr;var Kr={},Lr="Expected a function";function Mr($,r,e){var t=!0,a=!0;if("function"!=typeof $)throw new TypeError(Lr);return h(e)&&(t="leading"in e?!!e.leading:t,a="trailing"in e?!!e.trailing:a),Fr($,r,{leading:t,maxWait:r,trailing:a})}Kr=Mr;var Nr=insightModules.load("enums"),Jb=insightModules.load("vdl/vdl-validator-factory"),Bd=insightModules.load("insight-getter"),Qr=50,Rr=function(e,t){var $mMrb$$interop$default=k(ya);var $MbB6$$interop$default=k(Kr);var r=ko.observable({}),i=ko.pureComputed(function(){var $lRKl$$interop$default=k(ca);return $lRKl$$interop$default.d(r(),function(e,t){var $H7Ai$$interop$default=k(G);return $H7Ai$$interop$default.d(e,[t.setName,t.setPosition],t.value)},{})}),o=$mMrb$$interop$default.d("datagrid-column"),a=$MbB6$$interop$default.d(function(a){console.log("vdlx-datagrid update column");var $eeO1$$interop$default=k(j);var $hFsS$$interop$default=k(zr);var n=$eeO1$$interop$default.d(t.element).find("vdlx-datagrid-index-filter").length===$hFsS$$interop$default.d(r()),$={scenario:ko.unwrap(e.scenario),title:ko.unwrap(e.heading),width:ko.unwrap(e.width),editable:"true"===(""+ko.unwrap(e.editable)).toLowerCase(),visible:!("false"===(""+ko.unwrap(e.visible)).toLowerCase()),style:e.style,sortByFormatted:e.sortByFormatted,filterByFormatted:e.filterByFormatted,editorOptionsSet:e.editorOptionsSet,selectNull:e.editorOptionsIncludeEmpty,checkedValue:e.editorCheckedValue,uncheckedValue:e.editorUncheckedValue,id:o,bottomCalc:e.bottomCalc};var $xOlx$$interop$default=k(v);if(e.bottomCalc&&($.bottomCalcFormatter=function(t){var r=t.getValue();var $diUV$$interop$default=k(Ma);return $diUV$$interop$default.d(r)?Bd().Formatter.formatNumber(r,e.format):r}),e.editorOptions&&($.editorOptions=function(){return e.editorOptions.apply(null,arguments)||[]}),$xOlx$$interop$default.d(e.render)&&($.render=e.render),e.format?($.render=function(t,r){return"display"===r||"filter"===r&&e.filterByFormatted||"sort"===r&&e.sortByFormatted?Bd().Formatter.formatNumber(t,e.format):t},$.format=e.format):$.format=null,e.entity){if($.entity=e.entity,e.editorType)$.editorType=x[e.editorType];else{switch(insight.getView().getProject().getModelSchema().getEntity(e.entity).getElementType()){case Nr.DataType.BOOLEAN:$.editorType=x.checkbox;break;default:$.editorType=x.text;}void 0!==$.checkedValue&&void 0!==$.uncheckedValue&&($.editorType=x.checkbox),($.editorOptions||$.editorOptionsSet)&&($.editorType=x.select)}}else e.set&&($.set=e.set);if(null!=e.setPosition&&($.setPosition=e.setPosition),$hFsS$$interop$default.d(i())&&($.filters=i()),$.entity){var l=ko.observable().extend({functionObservable:{onDependenciesChange:function(){e.tableValidate()},read:function(e,r,i){return function(e){var r=Jb.getValidationProperties({entity:$.entity,indices:e}),i=Jb.getCustomValidators(r,t.element);return Jb.createFromValidators(i)}(e)(r,i)},disposeWhenDependenciesChange:!1}});$.editorValidate=function(e,t,r){return l(r,e,t),l.peek()}}n&&($xOlx$$interop$default.d(e.tableUpdate)&&e.tableUpdate()),$xOlx$$interop$default.d(a)&&a()},Qr,{leading:!1}),n=ko.computed(function(){var t={scenario:ko.unwrap(e.scenario),title:ko.unwrap(e.heading),width:ko.unwrap(e.width),editable:ko.unwrap(e.editable),visible:ko.unwrap(e.visible)};return a(),t});return{columnUpdate:a,validate:a,dispose:function(){var $xOlx$$interop$default=k(v);n.dispose(),$xOlx$$interop$default.d(e.tableUpdate)&&e.tableUpdate()},filterUpdate:function(e,t){var $H7Ai$$interop$default=k(G);r($H7Ai$$interop$default.d(r(),e,t)),a()},filterRemove:function(e){var $dkGe$$interop$default=k(Mq);r($dkGe$$interop$default.d(r(),e)),a()}}};VDL("vdlx-datagrid-column",{tag:"vdlx-datagrid-column",attributes:sq,errorTargetSelector:function(e){var $eeO1$$interop$default=k(j);return $eeO1$$interop$default.d(e).closest("vdlx-datagrid")[0]||e},template:"<vdl-contents></vdl-contents>",modifiesDescendants:!1,createViewModel:Rr,transform:Bq});var Sr=[{name:"set",description:"Name of the set entity to filter out of the indices for the column.",required:!0},{name:"set-position",description:"Index (zero-based) of occurrence of that index set in the index tuple for the array. Defaults to zero."},{name:"value",description:"Single value to fix the indices to.",acceptsExpression:!0,required:!0}];var Tr=insightModules.load("utils/data-utils"),Ur=function(t,a,e){var $eeO1$$interop$default=k(j);var r=$eeO1$$interop$default.d(t).closest("[entity]").attr("entity");if(!r)throw Error("<vdlx-datagrid-index-filter> must be contained within a <vdlx-datagrid-column> that defines an \"entity\".");var i=e.getModelEntityByName(r);if(!i)throw Error("Entity \""+r+"\" does not exist in the model schema.");var o=i.getIndexSets();if(!o)throw Error("Entity \""+r+"\" must be an array.");var $vzeB$$interop$default=k(B);var n=Tr.getSetNamesAndPosns(o),d=a.set.rawValue,s=$vzeB$$interop$default.d(a,["set-position","rawValue"],0);if(!/^\d+$/.test(s))throw Error("Invalid set-position: "+s);if(s=+s,!e.getModelEntityByName(d))throw Error("Entity \""+d+"\" not found in the model. Cannot set index filter.");var $qi8U$$interop$default=k(Aa);var $Rloh$$interop$default=k(Cd);if(!$qi8U$$interop$default.d(n,{name:d,position:s}))throw $Rloh$$interop$default.d(a,"set-position")?Error("Invalid index set name/position combination (\""+d+"\","+s+") for array "+r):Error("Invalid index set \""+d+"\" for array "+r);e.getComponentParamsBuilder(t).addParam("setName",d).addParam("setPosition",s).addRawOrExpressionParam("value",a.value).addParentCallbackParam("filterUpdate").addParentCallbackParam("filterRemove")};var Vr=function(e){var $mMrb$$interop$default=k(ya);var $edOc$$interop$default=k(Cc);var t=$mMrb$$interop$default.d("vdl-index-filter-"),r=$edOc$$interop$default.d(e.filterUpdate,t),i=$edOc$$interop$default.d(e.filterRemove,t),n=ko.pureComputed(function(){return{setName:e.setName,setPosition:e.setPosition,value:ko.unwrap(e.value).toString()}}),o=n.subscribe(r);return r(n()),{dispose:function(){o.dispose(),i()}}};VDL("vdlx-datagrid-index-filter",{tag:"vdlx-datagrid-index-filter",attributes:Sr,createViewModel:Vr,transform:Ur,errorTargetSelector:function(r){var $eeO1$$interop$default=k(j);return $eeO1$$interop$default.d(r).closest("vdlx-datagrid")[0]||r},requiredParent:["vdlx-datagrid"]});var Wr=[{name:"pass",description:"Expression to used for validating the value of a <vdl-field> or <vdl-table-column>. This must be an expression and should resolve to either a function or a boolean value. If a function it will be executed on each change to the vdl-field or vdl-table-column and also when a save is attempted. The function will have the following signature (entityName, value, key) and should return a boolean.",acceptsExpression:!0,required:!0,expressionVars:[{name:"entityName",type:"string",description:"Name of the entity being validated"},{name:"value",type:"(string|boolean|number)",description:"Value to be validated. The data type depends on the user input binding"},{name:"indices",type:"?Array.<(string|boolean|number)>",description:"Optional array indices provided when binding to an array element"},{name:"rowData",type:"?Array.<(string|boolean|number)>",description:"Optional array containing indices and values of the current row. Provided when tag is used in combination with vdl-table."}]},{name:"allow-save",description:"If set to true this will allow a field to be saved even though it is marked as invalid. Defaults to false",acceptsExpression:!0}];var Xr="The value is not valid",or=function(a,e,r){var $eeO1$$interop$default=k(j);var t=$eeO1$$interop$default.d(a);if(!t.parents("vdlx-datagrid-column").length)throw Error("<vdl-validate> must be contained within a <vdlx-datagrid-column> tag");var p=e.pass;if(!p||p.expression.isString)throw Error("The \"pass\" attribute must be supplied as an expression");var i=r.getComponentParamsBuilder(a),s=t.text().trim();s||(s=Xr);var o=e["allow-save"];o&&(o.expression.isString?i.addParam("allowSave","true"===o.rawValue):i.addParam("allowSave",o.expression.value,!0)),i.addFunctionOrExpressionParam("pass",p.expression.value,["entityName","value","indices","rowData"]).addParam("message",s).addParam("validate","$component.validate",!0)};var rc=insightModules.load("vdl-validator-registry"),Yr=function(a,r){var $eeO1$$interop$default=k(j);var e=$eeO1$$interop$default.d(r.element).parents("vdlx-datagrid-column")[0];if(!e)throw Error("Cannot find parent <vdlx-datagrid-column> for <vdl-validate>");var t=a.pass;if(!t)throw Error("Missing a \"pass\" attribute for <vdl-validate>");var i=rc.add({element:e,validate:function(r,e,i,o){return t(r,e,i,o)?{isValid:!0}:{isValid:!1,errorMessage:a.message,allowSave:ko.unwrap(a.allowSave)||!1}}});var $xOlx$$interop$default=k(v);return $xOlx$$interop$default.d(a.validate)&&a.validate(),{dispose:function(){rc.remove(i),$xOlx$$interop$default.d(a.validate)&&a.validate()}}};VDL("vdlx-datagrid-validate",{tag:"vdlx-datagrid-validate",attributes:Wr,doc:{description:"Add a validation rule to a <code>&lt;vdlx-datagrid-column&gt;</code> element. You can declare multiple <code>&lt;vdl-validate&gt;</code> rules within a <code>&lt;vdlx-datagrid-column&gt;</code> and they will all be applied. Each rule can specify whether the field is allowed to save data if that rule fails (this is soft validation). The \"pass\" attribute defines the expression that is called every time the field or autocolumn changes. The expression is automatically given the variables: \"entityName\", \"value\", \"indices\" and \"rowData\" (if used with vdlx-datagrid). \"entityName\" is the name of the entity bound to the field, \"value\" is the current value being input, \"indices\" is an array of indices if the field is bound to an array element and rowData is an array containing indices and values of the current row.",descriptionAsHtml:!0,elementContents:{description:"Text content of the element is used as the message to display when attempting to save and validation fails"},example:"<vdlx-datagrid>\n  <vdlx-datagrid-column entity=\"FactoryDemand\">\n    <vdl-validate pass=\"=value >= scenario.entities.SupportLevel.value\" allow-save=\"=scenario.entities.CanSave.value\">\n      FactoryDemand should be greater than or equal to SupportLevel\n    </vdl-validate>\n  </vdlx-datagrid-column>\n</vdlx-datagrid>"},requiredParent:["vdlx-datagrid-column"],createViewModel:Yr,transform:or});})();